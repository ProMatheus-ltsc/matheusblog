<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>AOP 简介 | Java 全栈知识体系</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="包含: Java 基础, Java 部分源码, JVM, Spring, Spring Boot, Spring Cloud, MySQL, ElasticSearch, MongoDB, Docker, k8s, Linux, DevOps, 分布式, 中间件, 开发工具, Git, IDE, 大数据, 机器学习...">
    
    <link rel="preload" href="/matheusblog/assets/css/0.styles.633991d7.css" as="style"><link rel="preload" href="/matheusblog/assets/js/app.1fce64b3.js" as="script"><link rel="preload" href="/matheusblog/assets/js/2.07d659a0.js" as="script"><link rel="preload" href="/matheusblog/assets/js/178.6c037674.js" as="script"><link rel="prefetch" href="/matheusblog/assets/js/10.c0801246.js"><link rel="prefetch" href="/matheusblog/assets/js/100.d06e2829.js"><link rel="prefetch" href="/matheusblog/assets/js/101.863619df.js"><link rel="prefetch" href="/matheusblog/assets/js/102.aac2b493.js"><link rel="prefetch" href="/matheusblog/assets/js/103.26455eb0.js"><link rel="prefetch" href="/matheusblog/assets/js/104.4825f378.js"><link rel="prefetch" href="/matheusblog/assets/js/105.a1c6dc6a.js"><link rel="prefetch" href="/matheusblog/assets/js/106.76129ce1.js"><link rel="prefetch" href="/matheusblog/assets/js/107.c3d66682.js"><link rel="prefetch" href="/matheusblog/assets/js/108.768c427f.js"><link rel="prefetch" href="/matheusblog/assets/js/109.97dba497.js"><link rel="prefetch" href="/matheusblog/assets/js/11.60046433.js"><link rel="prefetch" href="/matheusblog/assets/js/110.5f7700e0.js"><link rel="prefetch" href="/matheusblog/assets/js/111.bcb3cd06.js"><link rel="prefetch" href="/matheusblog/assets/js/112.1172440b.js"><link rel="prefetch" href="/matheusblog/assets/js/113.e6bf08e3.js"><link rel="prefetch" href="/matheusblog/assets/js/114.f274fafa.js"><link rel="prefetch" href="/matheusblog/assets/js/115.f8303081.js"><link rel="prefetch" href="/matheusblog/assets/js/116.64248f33.js"><link rel="prefetch" href="/matheusblog/assets/js/117.f4d6b969.js"><link rel="prefetch" href="/matheusblog/assets/js/118.76a6af34.js"><link rel="prefetch" href="/matheusblog/assets/js/119.42c8c869.js"><link rel="prefetch" href="/matheusblog/assets/js/12.4aa3cf6d.js"><link rel="prefetch" href="/matheusblog/assets/js/120.f7152065.js"><link rel="prefetch" href="/matheusblog/assets/js/121.0b4bd5bc.js"><link rel="prefetch" href="/matheusblog/assets/js/122.1968e88a.js"><link rel="prefetch" href="/matheusblog/assets/js/123.00eaf320.js"><link rel="prefetch" href="/matheusblog/assets/js/124.d50606a6.js"><link rel="prefetch" href="/matheusblog/assets/js/125.27ba5ab6.js"><link rel="prefetch" href="/matheusblog/assets/js/126.0fecd9a0.js"><link rel="prefetch" href="/matheusblog/assets/js/127.dba2fe1d.js"><link rel="prefetch" href="/matheusblog/assets/js/128.1d295311.js"><link rel="prefetch" href="/matheusblog/assets/js/129.c2db8ee0.js"><link rel="prefetch" href="/matheusblog/assets/js/13.ab1bf208.js"><link rel="prefetch" href="/matheusblog/assets/js/130.e65c720d.js"><link rel="prefetch" href="/matheusblog/assets/js/131.86d8fdb8.js"><link rel="prefetch" href="/matheusblog/assets/js/132.70a14efb.js"><link rel="prefetch" href="/matheusblog/assets/js/133.f954b645.js"><link rel="prefetch" href="/matheusblog/assets/js/134.d75b6e56.js"><link rel="prefetch" href="/matheusblog/assets/js/135.25bb2b86.js"><link rel="prefetch" href="/matheusblog/assets/js/136.bc39187b.js"><link rel="prefetch" href="/matheusblog/assets/js/137.bc3c5001.js"><link rel="prefetch" href="/matheusblog/assets/js/138.d4058c59.js"><link rel="prefetch" href="/matheusblog/assets/js/139.cdd3de85.js"><link rel="prefetch" href="/matheusblog/assets/js/14.30046954.js"><link rel="prefetch" href="/matheusblog/assets/js/140.0ab39239.js"><link rel="prefetch" href="/matheusblog/assets/js/141.0fc9bfda.js"><link rel="prefetch" href="/matheusblog/assets/js/142.e3e1d7fb.js"><link rel="prefetch" href="/matheusblog/assets/js/143.bf171dc2.js"><link rel="prefetch" href="/matheusblog/assets/js/144.3d1a82f5.js"><link rel="prefetch" href="/matheusblog/assets/js/145.83a028c9.js"><link rel="prefetch" href="/matheusblog/assets/js/146.3c2693ac.js"><link rel="prefetch" href="/matheusblog/assets/js/147.bd3fce12.js"><link rel="prefetch" href="/matheusblog/assets/js/148.b8dacc31.js"><link rel="prefetch" href="/matheusblog/assets/js/149.f542a3e6.js"><link rel="prefetch" href="/matheusblog/assets/js/15.cadc2e73.js"><link rel="prefetch" href="/matheusblog/assets/js/150.bc069856.js"><link rel="prefetch" href="/matheusblog/assets/js/151.299a13a6.js"><link rel="prefetch" href="/matheusblog/assets/js/152.06285a53.js"><link rel="prefetch" href="/matheusblog/assets/js/153.7473ca80.js"><link rel="prefetch" href="/matheusblog/assets/js/154.49a41068.js"><link rel="prefetch" href="/matheusblog/assets/js/155.c8424697.js"><link rel="prefetch" href="/matheusblog/assets/js/156.d96b541d.js"><link rel="prefetch" href="/matheusblog/assets/js/157.e87c5e53.js"><link rel="prefetch" href="/matheusblog/assets/js/158.6fa16acc.js"><link rel="prefetch" href="/matheusblog/assets/js/159.3b7391ee.js"><link rel="prefetch" href="/matheusblog/assets/js/16.f5a41dee.js"><link rel="prefetch" href="/matheusblog/assets/js/160.321e8e7f.js"><link rel="prefetch" href="/matheusblog/assets/js/161.2e7be556.js"><link rel="prefetch" href="/matheusblog/assets/js/162.cea70506.js"><link rel="prefetch" href="/matheusblog/assets/js/163.d4a3b887.js"><link rel="prefetch" href="/matheusblog/assets/js/164.893cb2f6.js"><link rel="prefetch" href="/matheusblog/assets/js/165.bda26fcc.js"><link rel="prefetch" href="/matheusblog/assets/js/166.f43e7f2b.js"><link rel="prefetch" href="/matheusblog/assets/js/167.39a60458.js"><link rel="prefetch" href="/matheusblog/assets/js/168.bdc4f656.js"><link rel="prefetch" href="/matheusblog/assets/js/169.ef615ea0.js"><link rel="prefetch" href="/matheusblog/assets/js/17.687ac65a.js"><link rel="prefetch" href="/matheusblog/assets/js/170.a24ce0b1.js"><link rel="prefetch" href="/matheusblog/assets/js/171.d52cdad9.js"><link rel="prefetch" href="/matheusblog/assets/js/172.7ca75372.js"><link rel="prefetch" href="/matheusblog/assets/js/173.799700b0.js"><link rel="prefetch" href="/matheusblog/assets/js/174.743c8917.js"><link rel="prefetch" href="/matheusblog/assets/js/175.91e75a6e.js"><link rel="prefetch" href="/matheusblog/assets/js/176.1b8db37f.js"><link rel="prefetch" href="/matheusblog/assets/js/177.b22c06f9.js"><link rel="prefetch" href="/matheusblog/assets/js/179.71e821ba.js"><link rel="prefetch" href="/matheusblog/assets/js/18.292a6f19.js"><link rel="prefetch" href="/matheusblog/assets/js/180.28d5b150.js"><link rel="prefetch" href="/matheusblog/assets/js/181.c1592cb5.js"><link rel="prefetch" href="/matheusblog/assets/js/182.dbe546ef.js"><link rel="prefetch" href="/matheusblog/assets/js/183.8d4d383a.js"><link rel="prefetch" href="/matheusblog/assets/js/184.a2a44204.js"><link rel="prefetch" href="/matheusblog/assets/js/185.a2875bb5.js"><link rel="prefetch" href="/matheusblog/assets/js/186.49c4f191.js"><link rel="prefetch" href="/matheusblog/assets/js/187.8b33c992.js"><link rel="prefetch" href="/matheusblog/assets/js/188.7acc534e.js"><link rel="prefetch" href="/matheusblog/assets/js/189.322c5c93.js"><link rel="prefetch" href="/matheusblog/assets/js/19.f4f63836.js"><link rel="prefetch" href="/matheusblog/assets/js/190.dfd4905d.js"><link rel="prefetch" href="/matheusblog/assets/js/191.4c9773d8.js"><link rel="prefetch" href="/matheusblog/assets/js/192.83f6bc9c.js"><link rel="prefetch" href="/matheusblog/assets/js/193.d2987669.js"><link rel="prefetch" href="/matheusblog/assets/js/194.42a7c0a4.js"><link rel="prefetch" href="/matheusblog/assets/js/195.3f3f2f7d.js"><link rel="prefetch" href="/matheusblog/assets/js/196.27acd427.js"><link rel="prefetch" href="/matheusblog/assets/js/197.b349c59f.js"><link rel="prefetch" href="/matheusblog/assets/js/198.474c5666.js"><link rel="prefetch" href="/matheusblog/assets/js/199.171e9c61.js"><link rel="prefetch" href="/matheusblog/assets/js/20.cb016cbf.js"><link rel="prefetch" href="/matheusblog/assets/js/200.2765bbf5.js"><link rel="prefetch" href="/matheusblog/assets/js/201.b5216436.js"><link rel="prefetch" href="/matheusblog/assets/js/202.90a9fdb1.js"><link rel="prefetch" href="/matheusblog/assets/js/203.6ed997bd.js"><link rel="prefetch" href="/matheusblog/assets/js/204.ce690218.js"><link rel="prefetch" href="/matheusblog/assets/js/205.1605c2a1.js"><link rel="prefetch" href="/matheusblog/assets/js/206.a837b10f.js"><link rel="prefetch" href="/matheusblog/assets/js/207.028fa2b8.js"><link rel="prefetch" href="/matheusblog/assets/js/208.846c447d.js"><link rel="prefetch" href="/matheusblog/assets/js/209.de26f5ad.js"><link rel="prefetch" href="/matheusblog/assets/js/21.301d2c65.js"><link rel="prefetch" href="/matheusblog/assets/js/210.a31de80e.js"><link rel="prefetch" href="/matheusblog/assets/js/211.cc38e665.js"><link rel="prefetch" href="/matheusblog/assets/js/212.a6cbeb93.js"><link rel="prefetch" href="/matheusblog/assets/js/213.9b0cf8dd.js"><link rel="prefetch" href="/matheusblog/assets/js/214.e4d7a9f2.js"><link rel="prefetch" href="/matheusblog/assets/js/215.e788f3f3.js"><link rel="prefetch" href="/matheusblog/assets/js/216.d1674813.js"><link rel="prefetch" href="/matheusblog/assets/js/217.3b088c7b.js"><link rel="prefetch" href="/matheusblog/assets/js/218.3f3b5768.js"><link rel="prefetch" href="/matheusblog/assets/js/219.3a1944d0.js"><link rel="prefetch" href="/matheusblog/assets/js/22.a9113f4d.js"><link rel="prefetch" href="/matheusblog/assets/js/220.a80a6675.js"><link rel="prefetch" href="/matheusblog/assets/js/221.66dc730e.js"><link rel="prefetch" href="/matheusblog/assets/js/23.b20f5def.js"><link rel="prefetch" href="/matheusblog/assets/js/24.57042743.js"><link rel="prefetch" href="/matheusblog/assets/js/25.b80bef20.js"><link rel="prefetch" href="/matheusblog/assets/js/26.1eb853a3.js"><link rel="prefetch" href="/matheusblog/assets/js/27.9d53dd42.js"><link rel="prefetch" href="/matheusblog/assets/js/28.e17a39d9.js"><link rel="prefetch" href="/matheusblog/assets/js/29.6c61c97d.js"><link rel="prefetch" href="/matheusblog/assets/js/3.06bb182a.js"><link rel="prefetch" href="/matheusblog/assets/js/30.3f59448e.js"><link rel="prefetch" href="/matheusblog/assets/js/31.20aaf539.js"><link rel="prefetch" href="/matheusblog/assets/js/32.17d7acd0.js"><link rel="prefetch" href="/matheusblog/assets/js/33.e2566ea5.js"><link rel="prefetch" href="/matheusblog/assets/js/34.17450872.js"><link rel="prefetch" href="/matheusblog/assets/js/35.5a60eb09.js"><link rel="prefetch" href="/matheusblog/assets/js/36.47f9fc0b.js"><link rel="prefetch" href="/matheusblog/assets/js/37.b868e76f.js"><link rel="prefetch" href="/matheusblog/assets/js/38.bea3f52f.js"><link rel="prefetch" href="/matheusblog/assets/js/39.4bc02079.js"><link rel="prefetch" href="/matheusblog/assets/js/4.81a7f083.js"><link rel="prefetch" href="/matheusblog/assets/js/40.1246b3f5.js"><link rel="prefetch" href="/matheusblog/assets/js/41.bd70d3f8.js"><link rel="prefetch" href="/matheusblog/assets/js/42.23aea631.js"><link rel="prefetch" href="/matheusblog/assets/js/43.cc22b534.js"><link rel="prefetch" href="/matheusblog/assets/js/44.70df46be.js"><link rel="prefetch" href="/matheusblog/assets/js/45.17d17475.js"><link rel="prefetch" href="/matheusblog/assets/js/46.98b10ae4.js"><link rel="prefetch" href="/matheusblog/assets/js/47.d1952187.js"><link rel="prefetch" href="/matheusblog/assets/js/48.d8ee6b2d.js"><link rel="prefetch" href="/matheusblog/assets/js/49.a9446760.js"><link rel="prefetch" href="/matheusblog/assets/js/5.b6324def.js"><link rel="prefetch" href="/matheusblog/assets/js/50.ab357dd2.js"><link rel="prefetch" href="/matheusblog/assets/js/51.a701bf8c.js"><link rel="prefetch" href="/matheusblog/assets/js/52.7e1aff82.js"><link rel="prefetch" href="/matheusblog/assets/js/53.7bba0653.js"><link rel="prefetch" href="/matheusblog/assets/js/54.e8caf875.js"><link rel="prefetch" href="/matheusblog/assets/js/55.648f1bd9.js"><link rel="prefetch" href="/matheusblog/assets/js/56.543df82e.js"><link rel="prefetch" href="/matheusblog/assets/js/57.30f60dae.js"><link rel="prefetch" href="/matheusblog/assets/js/58.95befad0.js"><link rel="prefetch" href="/matheusblog/assets/js/59.25279d4c.js"><link rel="prefetch" href="/matheusblog/assets/js/6.e45ec650.js"><link rel="prefetch" href="/matheusblog/assets/js/60.4201f1b7.js"><link rel="prefetch" href="/matheusblog/assets/js/61.fc914b16.js"><link rel="prefetch" href="/matheusblog/assets/js/62.0e4a6653.js"><link rel="prefetch" href="/matheusblog/assets/js/63.62d65c3c.js"><link rel="prefetch" href="/matheusblog/assets/js/64.4f873961.js"><link rel="prefetch" href="/matheusblog/assets/js/65.b3d664e6.js"><link rel="prefetch" href="/matheusblog/assets/js/66.e9b5fc36.js"><link rel="prefetch" href="/matheusblog/assets/js/67.8ff3e072.js"><link rel="prefetch" href="/matheusblog/assets/js/68.85d7f5b7.js"><link rel="prefetch" href="/matheusblog/assets/js/69.9c048d71.js"><link rel="prefetch" href="/matheusblog/assets/js/7.eb81dc41.js"><link rel="prefetch" href="/matheusblog/assets/js/70.7a917654.js"><link rel="prefetch" href="/matheusblog/assets/js/71.0b46d27f.js"><link rel="prefetch" href="/matheusblog/assets/js/72.1efcae90.js"><link rel="prefetch" href="/matheusblog/assets/js/73.4acb130f.js"><link rel="prefetch" href="/matheusblog/assets/js/74.964b0db6.js"><link rel="prefetch" href="/matheusblog/assets/js/75.1b841ed6.js"><link rel="prefetch" href="/matheusblog/assets/js/76.b0e36f57.js"><link rel="prefetch" href="/matheusblog/assets/js/77.e9f8645f.js"><link rel="prefetch" href="/matheusblog/assets/js/78.7496b84f.js"><link rel="prefetch" href="/matheusblog/assets/js/79.61ba0a84.js"><link rel="prefetch" href="/matheusblog/assets/js/8.5e058527.js"><link rel="prefetch" href="/matheusblog/assets/js/80.cc857ba9.js"><link rel="prefetch" href="/matheusblog/assets/js/81.def93da4.js"><link rel="prefetch" href="/matheusblog/assets/js/82.76229786.js"><link rel="prefetch" href="/matheusblog/assets/js/83.b0e1b02b.js"><link rel="prefetch" href="/matheusblog/assets/js/84.22a5e068.js"><link rel="prefetch" href="/matheusblog/assets/js/85.4acdee03.js"><link rel="prefetch" href="/matheusblog/assets/js/86.2a7f5cde.js"><link rel="prefetch" href="/matheusblog/assets/js/87.26411caf.js"><link rel="prefetch" href="/matheusblog/assets/js/88.f88cbfb6.js"><link rel="prefetch" href="/matheusblog/assets/js/89.b32ce6c5.js"><link rel="prefetch" href="/matheusblog/assets/js/9.495fedc0.js"><link rel="prefetch" href="/matheusblog/assets/js/90.47afc03f.js"><link rel="prefetch" href="/matheusblog/assets/js/91.a50a8c8f.js"><link rel="prefetch" href="/matheusblog/assets/js/92.ff84ca6e.js"><link rel="prefetch" href="/matheusblog/assets/js/93.94bcf035.js"><link rel="prefetch" href="/matheusblog/assets/js/94.81b6131a.js"><link rel="prefetch" href="/matheusblog/assets/js/95.1c787348.js"><link rel="prefetch" href="/matheusblog/assets/js/96.07ebd09a.js"><link rel="prefetch" href="/matheusblog/assets/js/97.a0a65321.js"><link rel="prefetch" href="/matheusblog/assets/js/98.ff42b480.js"><link rel="prefetch" href="/matheusblog/assets/js/99.dd78b0d0.js">
    <link rel="stylesheet" href="/matheusblog/assets/css/0.styles.633991d7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/matheusblog/" class="home-link router-link-active"><!----> <span class="site-name">Java 全栈知识体系</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Menu" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java Menu" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/basic/helloworld.html" class="nav-link">
  认识编程
</a></li></ul></li><li class="dropdown-item"><h4>
          集合
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/collection/泛型和集合.html" class="nav-link">
  泛型和集合
</a></li></ul></li><li class="dropdown-item"><h4>
          IO
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/io/IO.html" class="nav-link">
  IO
</a></li></ul></li><li class="dropdown-item"><h4>
          并发编程
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/thread/多线程.html" class="nav-link">
  多线程
</a></li></ul></li><li class="dropdown-item"><h4>
          JVM
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/basic/helloworld.html" class="nav-link">
  认识编程
</a></li></ul></li><li class="dropdown-item"><h4>
          Java新特性
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/basic/helloworld.html" class="nav-link">
  认识编程
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web Menu" class="dropdown-title"><span class="title">Web基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web Menu" class="mobile-dropdown-title"><span class="title">Web基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/html5/01HTML概述.html" class="nav-link">
  HTML概述
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/css/01基础选择器+字体文本样式.html" class="nav-link">
  基础选择器+字体文本样式
</a></li></ul></li><li class="dropdown-item"><h4>
          JS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/js/01JavaScript基础.html" class="nav-link">
  JavaScript基础
</a></li></ul></li><li class="dropdown-item"><h4>
          VUE
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/vue/01Vue简介与安装使用.html" class="nav-link">
  Vue简介与安装使用
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="database Menu" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="database Menu" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MySQL
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/mysql/01数据库软件的安装与使用.html" class="nav-link">
  数据库软件的安装与使用
</a></li></ul></li><li class="dropdown-item"><h4>
          Redis
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          MongoDB
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/mongodb/01数据库和集合基本操作.html" class="nav-link">
  数据库和集合基本操作
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringFramework Menu" class="dropdown-title"><span class="title">SpringFramework</span> <span class="arrow down"></span></button> <button type="button" aria-label="SpringFramework Menu" class="mobile-dropdown-title"><span class="title">SpringFramework</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Maven
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/spring/Spring概述.html" class="nav-link">
  Spring概述
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringMVC
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/springmvc/01SpringMVC简介.html" class="nav-link">
  SpringMVC简介
</a></li></ul></li><li class="dropdown-item"><h4>
          MyBatis-plus
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/mybatis/01MyBatis简介.html" class="nav-link">
  MyBatis简介
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringBoot
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/project/jt-project/problem.html" class="nav-link">
  项目
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Devops Menu" class="dropdown-title"><span class="title">DevOps</span> <span class="arrow down"></span></button> <button type="button" aria-label="Devops Menu" class="mobile-dropdown-title"><span class="title">DevOps</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          linux
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/linux/00 Centos.html" class="nav-link">
  CentOS
</a></li></ul></li><li class="dropdown-item"><h4>
          tools
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/tools/VS Code使用.html" class="nav-link">
  VS Code使用
</a></li></ul></li><li class="dropdown-item"><h4>
          Docker
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          k8s
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Hadoop
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/springcloud/note.html" class="nav-link">
  SpringCloud
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="develop Menu" class="dropdown-title"><span class="title">开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="develop Menu" class="mobile-dropdown-title"><span class="title">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          代码规范
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          开发环境
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/JUnit/01什么是单元测试.html" class="nav-link">
  开发部署
</a></li></ul></li><li class="dropdown-item"><h4>
          部署环境
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/pattern/设计模式.html" class="nav-link">
  部署部署
</a></li></ul></li><li class="dropdown-item"><h4>
          设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/pattern/设计模式.html" class="nav-link">
  设计模式
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/arch/计算机软件架构发展历史.html" class="nav-link">
  架构
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="other-languages Menu" class="dropdown-title"><span class="title">其他语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="other-languages Menu" class="mobile-dropdown-title"><span class="title">其他语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Go
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/other-languages/go/01Go语言介绍.html" class="nav-link">
  Go语言介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          Scala
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Python
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="algorithm Menu" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="algorithm Menu" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          数据结构
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Spark基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          机器学习
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Menu" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java Menu" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/basic/helloworld.html" class="nav-link">
  认识编程
</a></li></ul></li><li class="dropdown-item"><h4>
          集合
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/collection/泛型和集合.html" class="nav-link">
  泛型和集合
</a></li></ul></li><li class="dropdown-item"><h4>
          IO
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/io/IO.html" class="nav-link">
  IO
</a></li></ul></li><li class="dropdown-item"><h4>
          并发编程
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/thread/多线程.html" class="nav-link">
  多线程
</a></li></ul></li><li class="dropdown-item"><h4>
          JVM
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/basic/helloworld.html" class="nav-link">
  认识编程
</a></li></ul></li><li class="dropdown-item"><h4>
          Java新特性
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/basic/helloworld.html" class="nav-link">
  认识编程
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web Menu" class="dropdown-title"><span class="title">Web基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web Menu" class="mobile-dropdown-title"><span class="title">Web基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/html5/01HTML概述.html" class="nav-link">
  HTML概述
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/css/01基础选择器+字体文本样式.html" class="nav-link">
  基础选择器+字体文本样式
</a></li></ul></li><li class="dropdown-item"><h4>
          JS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/js/01JavaScript基础.html" class="nav-link">
  JavaScript基础
</a></li></ul></li><li class="dropdown-item"><h4>
          VUE
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/vue/01Vue简介与安装使用.html" class="nav-link">
  Vue简介与安装使用
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="database Menu" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="database Menu" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MySQL
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/mysql/01数据库软件的安装与使用.html" class="nav-link">
  数据库软件的安装与使用
</a></li></ul></li><li class="dropdown-item"><h4>
          Redis
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          MongoDB
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/mongodb/01数据库和集合基本操作.html" class="nav-link">
  数据库和集合基本操作
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringFramework Menu" class="dropdown-title"><span class="title">SpringFramework</span> <span class="arrow down"></span></button> <button type="button" aria-label="SpringFramework Menu" class="mobile-dropdown-title"><span class="title">SpringFramework</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Maven
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/spring/Spring概述.html" class="nav-link">
  Spring概述
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringMVC
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/springmvc/01SpringMVC简介.html" class="nav-link">
  SpringMVC简介
</a></li></ul></li><li class="dropdown-item"><h4>
          MyBatis-plus
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/mybatis/01MyBatis简介.html" class="nav-link">
  MyBatis简介
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringBoot
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/project/jt-project/problem.html" class="nav-link">
  项目
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Devops Menu" class="dropdown-title"><span class="title">DevOps</span> <span class="arrow down"></span></button> <button type="button" aria-label="Devops Menu" class="mobile-dropdown-title"><span class="title">DevOps</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          linux
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/linux/00 Centos.html" class="nav-link">
  CentOS
</a></li></ul></li><li class="dropdown-item"><h4>
          tools
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/tools/VS Code使用.html" class="nav-link">
  VS Code使用
</a></li></ul></li><li class="dropdown-item"><h4>
          Docker
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          k8s
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Hadoop
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/springcloud/note.html" class="nav-link">
  SpringCloud
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="develop Menu" class="dropdown-title"><span class="title">开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="develop Menu" class="mobile-dropdown-title"><span class="title">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          代码规范
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          开发环境
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/JUnit/01什么是单元测试.html" class="nav-link">
  开发部署
</a></li></ul></li><li class="dropdown-item"><h4>
          部署环境
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/pattern/设计模式.html" class="nav-link">
  部署部署
</a></li></ul></li><li class="dropdown-item"><h4>
          设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/pattern/设计模式.html" class="nav-link">
  设计模式
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/arch/计算机软件架构发展历史.html" class="nav-link">
  架构
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="other-languages Menu" class="dropdown-title"><span class="title">其他语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="other-languages Menu" class="mobile-dropdown-title"><span class="title">其他语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Go
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/other-languages/go/01Go语言介绍.html" class="nav-link">
  Go语言介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          Scala
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Python
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="algorithm Menu" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="algorithm Menu" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          数据结构
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Spark基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          机器学习
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Maven</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matheusblog/md/spring/maven/01Tomcat入门基础.html" class="sidebar-link">Tomcat入门基础</a></li><li><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="sidebar-link">Maven入门基础</a></li><li><a href="/matheusblog/md/spring/maven/03Maven pom.xml常用配置.html" class="sidebar-link">Maven的pox.xml常用配置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Spring</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matheusblog/md/spring/spring/Spring概述.html" class="sidebar-link">Spring概述</a></li><li><a href="/matheusblog/md/spring/spring/Spring入门案例.html" class="sidebar-link">Spring入门案例</a></li><li><a href="/matheusblog/md/spring/spring/IOC控制反转.html" class="sidebar-link">IOC控制反转</a></li><li><a href="/matheusblog/md/spring/spring/DI依赖注入.html" class="sidebar-link">DI依赖注入</a></li><li><a href="/matheusblog/md/spring/spring/Bean工厂.html" class="sidebar-link">Bean工厂</a></li><li><a href="/matheusblog/md/spring/spring/AOP面向切面编程.html" class="sidebar-link">AOP面向切面编程</a></li><li><a href="/matheusblog/md/spring/spring/事务控制.html" class="sidebar-link">事务控制</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>SpringMVC</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>MyBatis-Plus</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matheusblog/md/spring/mybatis/01MyBatis简介.html" class="sidebar-link">MyBatis简介</a></li><li><a href="/matheusblog/md/spring/mybatis/02入门程序.html" class="sidebar-link">MyBatis入门程序</a></li><li><a href="/matheusblog/md/spring/mybatis/03MyBatis框架.html" class="sidebar-link">MyBatis框架</a></li><li><a href="/matheusblog/md/spring/mybatis/04MyBatis-Plus.html" class="sidebar-link">MyBatis-Plus</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="aop-简介"><a href="#aop-简介" class="header-anchor">#</a> <a href="https://so.csdn.net/so/search?q=AOP&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">AOP<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 简介</h1> <h2 id="背景分析"><a href="#背景分析" class="header-anchor">#</a> 背景分析</h2> <p>对于一个业务而言,我们如何在不修改源代码的基础上对对象功能进行拓展,例如现有一个公告(通知)业务接口及实现:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>pubic <span class="token keyword">interface</span> <span class="token class-name">NoticeService</span><span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span>…ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token number">123</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NoticeServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">NoticeService</span><span class="token punctuation">{</span>
   <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span>…ids<span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">return</span> <span class="token number">0</span> <span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>需求：基于OCP(开闭原则-对扩展开放对修改关闭)设计原则对NoticeServiceImpl类的功能进行扩展,例如在deleteById业务方法执行之前和之后输出一下系统时间.</p> <p>方案1:基于继承方式实现其功能扩展,关键设计如下:**</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CglibLogNoticeService</span> <span class="token keyword">extends</span> <span class="token class-name">NoticeServiceImpl</span><span class="token punctuation">{</span>
   <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span>…ids<span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Start:&quot;</span><span class="token operator">+</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Int</span> rows<span class="token operator">=</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;After:&quot;</span><span class="token operator">+</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">return</span> rows<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">12345678</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>测试类如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NoticeServiceTests</span><span class="token punctuation">{</span>
     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token class-name">NoticeService</span> ns<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">CglibLogNoticeService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         ns<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>其中，基于继承方式实现功能扩展,代码简单，容器理解，但是不够灵活，耦合性比较强。</p> <p>方案2:基于组合方式实现其功能扩展,关键代码设计如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdkLogNoticeService</span> <span class="token keyword">implements</span> <span class="token class-name">NoticeService</span><span class="token punctuation">{</span>
      <span class="token keyword">private</span> <span class="token class-name">NoticeService</span> noticeService<span class="token punctuation">;</span><span class="token comment">//has a </span>
      <span class="token keyword">public</span>  <span class="token class-name">JdkLogNoticeService</span><span class="token punctuation">(</span><span class="token class-name">NoticeService</span> noticeService<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>noticeService<span class="token operator">=</span>noticeService<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
     <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span>…ids<span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Start:&quot;</span><span class="token operator">+</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">int</span> rows<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>noticeService<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;After:&quot;</span><span class="token operator">+</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">return</span> rows<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">123456789101112</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>测试类</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NoticeServiceTests</span><span class="token punctuation">{</span>
     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token class-name">NoticeService</span> ns<span class="token operator">=</span>
         <span class="token keyword">new</span> <span class="token class-name">JdkLogNoticeService</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">NoticeServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         ns<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">1234567</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>其中，基于组合方式实现功能扩展，代码比较灵活，耦合低，稳定性强，但理解相对比较困难。</p> <p>总之，无论是继承,还是组合都是基于OCP方式实现了对象功能扩展,都有相应的优缺点,并且我们都要自己去写这些子类或兄弟类,在这些类中调用目标对象(父类或兄弟类对象)的方法以及扩展业务逻辑.对于这样的模板代码我们能否进行简化呢?例如.由框架实现其共性(创建目录类型的子类类型或兄弟类型),特性交给用户自己实现.</p> <h2 id="aop概述"><a href="#aop概述" class="header-anchor">#</a> AOP概述</h2> <p>AOP（Aspect Orient Programming）是一种设计思想，是软件设计领域中的面向切面编程，它是面向对象编程(OOP)的一种补充和完善。实际项目中我们通常将面向对象理解为一个静态过程(例如一个系统有多少个模块，一个模块有哪些对象，对象有哪些属性)，面向切面理解为一个动态过程（在对象运行时动态织入一些扩展功能或控制对象执行）。如图所示：
<img src="https://img-blog.csdnimg.cn/f633338732cd4eb5b1d3af9b98582d21.png" alt="在这里插入图片描述">
AOP 与 OOP 字面意思相近，但其实两者完全是面向不同领域的设计思想。实际项目中我们通常将面向对象理解为一个静态过程(例如一个系统有多少个模块，一个模块有哪些对象，对象有哪些属性)，面向切面的运行期代理方式，理解为一个动态过程，可以在对象运行时动态织入一些扩展功能或控制对象执行。</p> <h2 id="实现原理"><a href="#实现原理" class="header-anchor">#</a> 实现原理</h2> <p>AOP可以在系统启动时为目标类型创建子类或兄弟类型对象,这样的对象我们通常会称之为动态代理对象.如图所示:</p> <p><img src="https://img-blog.csdnimg.cn/b5526a3b2bdf41a7bb1414e9962cdee8.png" alt="在这里插入图片描述"></p> <p>其中，为目标类型(XxxServiceImpl)创建其代理对象方式有两种(先了解):</p> <ul><li>第一种方式:借助JDK官方API为目标对象类型创建其兄弟类型对象,但是目标对象类型需要实现相应接口.</li> <li>第二种方式:借助CGLIB库为目标对象类型创建其子类类型对象,但是目标对象类型不能使用final修饰.</li></ul> <h2 id="相关术语分析"><a href="#相关术语分析" class="header-anchor">#</a> 相关术语分析</h2> <ul><li>切面(aspect): 横切面对象,一般为一个具体类对象。</li> <li>切入点(pointcut):定义了切入扩展业务逻辑的位置(哪些方法运行时切入扩展业务),一般会通过表达式进行相关定义,一个切面中可以定义多个切入点。</li> <li>通知(Advice): 内部封装扩展业务逻辑的具体方法对象,一个切面中可以有多个通知(在切面的某个特定位置上执行的动作(扩展功能)。</li> <li>连接点(joinpoint):程序执行过程中，封装了某个正在执行的目标方法信息的对象,可以通过此对象获取具体的目标方法信息,甚至去调用目标方法。连接点与切入点定义如图所示：</li></ul> <p>说明：我们可以简单的将机场的一个安检口理解为连接点，多个安检口为切入点，安全检查过程看成是 通知。总之，概念很晦涩难懂，多做例子，做完就会清晰。先可以按白话去理解。</p> <h1 id="spring-aop-快速入门"><a href="#spring-aop-快速入门" class="header-anchor">#</a> Spring AOP 快速入门</h1> <h2 id="业务描述"><a href="#业务描述" class="header-anchor">#</a> 业务描述</h2> <p>在项目中定义一个日志切面,通过切面中的通知方法为目标业务对象做日志功能增强。</p> <h2 id="添加aop依赖"><a href="#添加aop依赖" class="header-anchor">#</a> 添加AOP依赖</h2> <p>项目中添加aop应用依赖，代码如下：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-aop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
1234
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>说明：基于此依赖spring可以整合AspectJ框架快速完成AOP的基本实现。AspectJ 是一个面向切面的框架，他定义了 AOP 的一些语法，有一个专门的字节码生成器来生成遵守 java 规范的 class 文件。</p> <h2 id="业务切面对象设计"><a href="#业务切面对象设计" class="header-anchor">#</a> 业务切面对象设计</h2> <p>通过设计切面对象，为目标业务方法做功能增强，关键步骤如下：
第一步：创建注解类型，应用于切入点表达式的定义，关键代码如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>package com.cy.pj.common.annotation<span class="token punctuation">;</span>

<span class="token function">import</span> java.lang.annotation.ElementType<span class="token punctuation">;</span>
<span class="token function">import</span> java.lang.annotation.Retention<span class="token punctuation">;</span>
<span class="token function">import</span> java.lang.annotation.RetentionPolicy<span class="token punctuation">;</span>
<span class="token function">import</span> java.lang.annotation.Target<span class="token punctuation">;</span>
@Retention<span class="token punctuation">(</span>RetentionPolicy.RUNTIME<span class="token punctuation">)</span>
@Target<span class="token punctuation">(</span>ElementType.METHOD<span class="token punctuation">)</span>
public @interface RequiredLog <span class="token punctuation">{</span>
       String operation<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token number">1234567891011</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>第二步：创建切面对象，用于做日志业务增强，关键代码如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>cy<span class="token punctuation">.</span>pj<span class="token punctuation">.</span>sys<span class="token punctuation">.</span>service<span class="token punctuation">.</span>aspect</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>cy<span class="token punctuation">.</span>pj<span class="token punctuation">.</span>common<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequiredLog</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>cy<span class="token punctuation">.</span>pj<span class="token punctuation">.</span>sys<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">SysLog</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span></span><span class="token class-name">ObjectMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">ProceedingJoinPoint</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Around</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Aspect</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Pointcut</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">MethodSignature</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Logger</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">LoggerFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SysLogAspect</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log<span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">SysLogAspect</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * @Pointcut注解用于定义切入点
     * @annotation(注解)为切入点表达式，后续由此注解描述的方法为切入
     * 点方法
     */</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;@annotation(com.cy.pj.common.annotation.RequiredLog)&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment">//此方法只负责承载切入点的定义</span>

    <span class="token comment">/**
     * @Around注解描述的方法,可以在切入点执行之前和之后进行业务拓展,
     * @param jp 连接点对象,此对象封装了要执行的目标方法信息.
     * 可以通过连接点对象调用目标方法.
     * @return 目标方法的执行结果
     * @throws Throwable
     */</span>
    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;doLog()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">doAround</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> jp<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Throwable</span><span class="token punctuation">{</span>
        <span class="token keyword">long</span> t1<span class="token operator">=</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//执行目标方法(切点方法中的某个方法)</span>
            <span class="token class-name">Object</span> result <span class="token operator">=</span> jp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">long</span> t2<span class="token operator">=</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;opertime:{}&quot;</span><span class="token punctuation">,</span>t2<span class="token operator">-</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> result<span class="token punctuation">;</span><span class="token comment">//目标业务方法的执行结果</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">long</span> t2<span class="token operator">=</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;exception:{}&quot;</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token number">123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><p>第三步：通过注解RequiredLog注解描述日志查询或删除业务相关方法，此时这个方法为日志切入点方法，例如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>@RequiredLog<span class="token punctuation">(</span>operation<span class="token operator">=</span><span class="token string">&quot;公告查询&quot;</span><span class="token punctuation">)</span>
@Override
public List<span class="token operator">&lt;</span>SysLog<span class="token operator">&gt;</span> findLogs<span class="token punctuation">(</span>SysLog sysLog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
List<span class="token operator">&lt;</span>SysLog<span class="token operator">&gt;</span> <span class="token assign-left variable">list</span><span class="token operator">=</span>syslogDao.selectLogs<span class="token punctuation">(</span>sysLog<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin class-name">return</span> list<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token number">123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>第四步：测试通知业务方法，并检测日志输出以及了解其运行原理，如图所示：</p> <p><img src="https://img-blog.csdnimg.cn/8711b72108924cce80687c0c12bf977b.png" alt="在这里插入图片描述"></p> <h2 id="获取并记录详细日志"><a href="#获取并记录详细日志" class="header-anchor">#</a> 获取并记录详细日志</h2> <p>第一步：定义日志pojo对象，用于封装日志信息，例如：</p> <p>package com.pj.sys.pojo;</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">import</span> java.util.Date<span class="token punctuation">;</span>

public class SysLog <span class="token punctuation">{</span>
    private Integer <span class="token function">id</span><span class="token punctuation">;</span>
    private String <span class="token function">ip</span><span class="token punctuation">;</span>
    private String username<span class="token punctuation">;</span>
    private String operation<span class="token punctuation">;</span>
    private String method<span class="token punctuation">;</span>
    private String params<span class="token punctuation">;</span>
    private Long <span class="token function">time</span><span class="token punctuation">;</span>
    private Integer status<span class="token punctuation">;</span>
    private String error<span class="token punctuation">;</span>
    private Date createdTime<span class="token punctuation">;</span>
    //自己添加set/get/toString等方法
<span class="token punctuation">}</span>
<span class="token number">123456789101112131415</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>第二步：修改日切面对象，获取并记录详细日志，关键代码如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>package com.pj.sys.service.aspect<span class="token punctuation">;</span>

<span class="token function">import</span> com.cy.pj.common.annotation.RequiredLog<span class="token punctuation">;</span>
<span class="token function">import</span> com.cy.pj.sys.pojo.SysLog<span class="token punctuation">;</span>
<span class="token function">import</span> com.fasterxml.jackson.databind.ObjectMapper<span class="token punctuation">;</span>
<span class="token function">import</span> org.aspectj.lang.ProceedingJoinPoint<span class="token punctuation">;</span>
<span class="token function">import</span> org.aspectj.lang.annotation.Around<span class="token punctuation">;</span>
<span class="token function">import</span> org.aspectj.lang.annotation.Aspect<span class="token punctuation">;</span>
<span class="token function">import</span> org.aspectj.lang.annotation.Pointcut<span class="token punctuation">;</span>
<span class="token function">import</span> org.aspectj.lang.reflect.MethodSignature<span class="token punctuation">;</span>
<span class="token function">import</span> org.slf4j.Logger<span class="token punctuation">;</span>
<span class="token function">import</span> org.slf4j.LoggerFactory<span class="token punctuation">;</span>
<span class="token function">import</span> org.springframework.stereotype.Component<span class="token punctuation">;</span>

<span class="token function">import</span> java.lang.reflect.Method<span class="token punctuation">;</span>

@Aspect
@Component
public class SysLogAspect <span class="token punctuation">{</span>

    
    private static final Logger <span class="token assign-left variable">log</span><span class="token operator">=</span>LoggerFactory.getLogger<span class="token punctuation">(</span>SysLogAspect.class<span class="token punctuation">)</span><span class="token punctuation">;</span>
    /**
     * @Pointcut注解用于定义切入点
     * @annotation<span class="token punctuation">(</span>注解<span class="token punctuation">)</span>为切入点表达式，后续由此注解描述的方法为切入
     * 点方法
     */
    @Pointcut<span class="token punctuation">(</span><span class="token string">&quot;@annotation(com.cy.pj.common.annotation.RequiredLog)&quot;</span><span class="token punctuation">)</span>
    public void <span class="token function-name function">doLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>//此方法只负责承载切入点的定义

    /**
     * @Around注解描述的方法,可以在切入点执行之前和之后进行业务拓展,
     * @param jp 连接点对象,此对象封装了要执行的目标方法信息.
     * 可以通过连接点对象调用目标方法.
     * @return 目标方法的执行结果
     * @throws Throwable
     */
    @Around<span class="token punctuation">(</span><span class="token string">&quot;doLog()&quot;</span><span class="token punctuation">)</span>
    public Object doAround<span class="token punctuation">(</span>ProceedingJoinPoint jp<span class="token punctuation">)</span>throws Throwable<span class="token punctuation">{</span>
        long <span class="token assign-left variable">t1</span><span class="token operator">=</span>System.currentTimeMillis<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log.info<span class="token punctuation">(</span><span class="token string">&quot;Start:{}&quot;</span>,t1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        try <span class="token punctuation">{</span>
            //执行目标方法<span class="token punctuation">(</span>切点方法中的某个方法<span class="token punctuation">)</span>
            Object result <span class="token operator">=</span> jp.proceed<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            long <span class="token assign-left variable">t2</span><span class="token operator">=</span>System.currentTimeMillis<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log.info<span class="token punctuation">(</span><span class="token string">&quot;After:{}&quot;</span>,t2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            doLogInfo<span class="token punctuation">(</span>jp,t2-t1,null<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token builtin class-name">return</span> result<span class="token punctuation">;</span>//目标业务方法的执行结果
        <span class="token punctuation">}</span>catch<span class="token punctuation">(</span>Throwable e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            e.printStackTrace<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            long <span class="token assign-left variable">t2</span><span class="token operator">=</span>System.currentTimeMillis<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            doLogInfo<span class="token punctuation">(</span>jp,t2-t1,e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            throw e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    //记录用户行为日志
    private void doLogInfo<span class="token punctuation">(</span>ProceedingJoinPoint jp,long time,Throwable e<span class="token punctuation">)</span> throws Exception <span class="token punctuation">{</span>
        //1.获取用户行为日志
        //1.1获取登录用户名<span class="token punctuation">(</span>没做登录时，可以先给个固定值<span class="token punctuation">)</span>
        String <span class="token assign-left variable">username</span><span class="token operator">=</span><span class="token string">&quot;cgb&quot;</span><span class="token punctuation">;</span>
        //1.2获取ip地址
        String <span class="token assign-left variable">ip</span><span class="token operator">=</span> <span class="token string">&quot;202.106.0.20&quot;</span><span class="token punctuation">;</span>
        //1.3获取操作名<span class="token punctuation">(</span>operation<span class="token punctuation">)</span>-@RequiredLog注解中value属性的值
        //1.3.1获取目标对象类型
        Class<span class="token operator">&lt;</span>?<span class="token operator">&gt;</span> <span class="token assign-left variable">targetCls</span><span class="token operator">=</span>jp.getTarget<span class="token punctuation">(</span><span class="token punctuation">)</span>.getClass<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        //1.3.2获取目标方法
        MethodSignature <span class="token assign-left variable">ms</span><span class="token operator">=</span><span class="token punctuation">(</span>MethodSignature<span class="token punctuation">)</span> jp.getSignature<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>//方法签名
        Method <span class="token assign-left variable">targetMethod</span><span class="token operator">=</span>targetCls.getMethod<span class="token punctuation">(</span>ms.getName<span class="token punctuation">(</span><span class="token punctuation">)</span>,ms.getParameterTypes<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
        //1.3.3 获取方法上RequiredLog注解
        RequiredLog annotation <span class="token operator">=</span>targetMethod.getAnnotation<span class="token punctuation">(</span>RequiredLog.class<span class="token punctuation">)</span><span class="token punctuation">;</span>
        //1.3.4 获取注解中定义操作名
        String <span class="token assign-left variable">operation</span><span class="token operator">=</span>annotation.operation<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        //1.4获取方法声明<span class="token punctuation">(</span>类全名+方法名<span class="token punctuation">)</span>
        String <span class="token assign-left variable">classMethodName</span><span class="token operator">=</span>targetCls.getName<span class="token punctuation">(</span><span class="token punctuation">)</span>+<span class="token string">&quot;.&quot;</span>+targetMethod.getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        //1.5获取方法实际参数信息
        Object<span class="token punctuation">[</span><span class="token punctuation">]</span>args<span class="token operator">=</span>jp.getArgs<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String <span class="token assign-left variable">params</span><span class="token operator">=</span>new ObjectMapper<span class="token punctuation">(</span><span class="token punctuation">)</span>.writeValueAsString<span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        //2.封装用户行为日志
        SysLog <span class="token assign-left variable">sysLog</span><span class="token operator">=</span>new SysLog<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sysLog.setUsername<span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        sysLog.setIp<span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">;</span>
        sysLog.setOperation<span class="token punctuation">(</span>operation<span class="token punctuation">)</span><span class="token punctuation">;</span>
        sysLog.setMethod<span class="token punctuation">(</span>classMethodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        sysLog.setParams<span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
        sysLog.setTime<span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>
        if<span class="token punctuation">(</span>e<span class="token operator">!=</span>null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            sysLog.setStatus<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            sysLog.setError<span class="token punctuation">(</span>e.getMessage<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        //3.打印日志
        String <span class="token assign-left variable">userLog</span><span class="token operator">=</span>new ObjectMapper<span class="token punctuation">(</span><span class="token punctuation">)</span>.writeValueAsString<span class="token punctuation">(</span>sysLog<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log.info<span class="token punctuation">(</span><span class="token string">&quot;user.oper {}&quot;</span>,userLog<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token number">123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br></div></div><p>第三步：进行日志业务查询，并检测是否有详细日志输出。</p> <h1 id="spring-aop-技术进阶"><a href="#spring-aop-技术进阶" class="header-anchor">#</a> Spring AOP 技术进阶</h1> <h2 id="通知类型"><a href="#通知类型" class="header-anchor">#</a> 通知类型</h2> <p>Spring框架AOP模块定义通知类型,有如下几种:</p> <ul><li>@Around (优先级最高的通知,可以在目标方法执行之前,之后灵活进行业务拓展.)</li> <li>@Before (目标方法执行之前调用)</li> <li>@AfterReturning (目标方法正常结束时执行)</li> <li>@AfterThrowing (目标方法异常结束时执行)</li> <li>@After (目标方法结束时执行,正常结束和异常结束它都会执行)</li></ul> <p>案例分析如下：（了解，可选择进行实现）</p> <p>第一步：定义注解，代码如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>cy<span class="token punctuation">.</span>pj<span class="token punctuation">.</span>common<span class="token punctuation">.</span>annotation</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ElementType</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Retention</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RetentionPolicy</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Target</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">RequiredTime</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token number">123456789</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>第二步：定义时间切面对象对象演示通知执行，关键代码如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>cy<span class="token punctuation">.</span>pj<span class="token punctuation">.</span>sys<span class="token punctuation">.</span>service<span class="token punctuation">.</span>aspect</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">ProceedingJoinPoint</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SysTimeAspect</span> <span class="token punctuation">{</span>
       
<span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;@annotation(com.cy.pj.common.annotation.RequiredTime)&quot;</span><span class="token punctuation">)</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;doTime()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doBefore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;@Before&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">&quot;doTime()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doAfter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;@After&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span><span class="token string">&quot;doTime()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doAfterReturning</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;@AfterReturning&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span><span class="token string">&quot;doTime()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doAfterThrowing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;@AfterThrowing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//最重要,优先级也是最高</span>
    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;doTime()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">doAround</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Throwable</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;@Around.before&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Object</span> result <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;@Around.AfterReturning&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;@Around.AfterThrowing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;@Around.after&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">1234567891011121314151617181920212223242526272829303132333435363738394041424344454647</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><p>结合业务方法进行测试，检查通知方法执行顺序</p> <h2 id="切面执行顺序"><a href="#切面执行顺序" class="header-anchor">#</a> 切面执行顺序</h2> <p>切面的优先级需要借助@Order注解进行描述，数字越小优先级越高，默认优先级比较低。例如：
定义日志切面并指定优先级。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SysLogAspect</span> <span class="token punctuation">{</span>
 …
<span class="token punctuation">}</span>
<span class="token number">123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>定义缓存切面并指定优先级：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SysCacheAspect</span> <span class="token punctuation">{</span>
	…
<span class="token punctuation">}</span>
<span class="token number">123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>说明：当多个切面作用于同一个目标对象方法时，这些切面会构建成一个切面链，类似过滤器链、拦截器链，其执行分析如图所示：</p> <h1 id="总结-summary"><a href="#总结-summary" class="header-anchor">#</a> 总结（Summary）</h1> <h2 id="重难点分析"><a href="#重难点分析" class="header-anchor">#</a> 重难点分析</h2> <ul><li>AOP 是什么，解决了什么问题，应用场景?</li> <li>AOP 编程基本步骤及实现过程(以基于 AspectJ 框架实现为例)。</li> <li>AOP 编程中的核心对象及应用关系。(代理对象，切面对象，通知，切入点)</li> <li>AOP 思想在 Spring 中的实现原理分析。(基于代理方式进行扩展业务的织入)</li></ul> <h2 id="faq分析"><a href="#faq分析" class="header-anchor">#</a> FAQ分析</h2> <ul><li>AOP中切面的定义需要注意什么?(@Aspect,@Component)</li> <li>AOP 切面中都需要定义什么？(切入点，通知方法)</li> <li>AOP中切面可以有多个吗?(可以)</li> <li>AOP中多个切面可以作用于同一个切入点方法吗？(可以)</li> <li>AOP中通知方法的应用类型哪些，分别是什么时间点执行？</li> <li>SpringBoot中默认AOP代理对象创建方式？（CGLIB-更加灵活）</li></ul> <h2 id="bug分析"><a href="#bug分析" class="header-anchor">#</a> Bug分析</h2> <ul><li>日志切入点引入丢掉（）</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/matheusblog/assets/js/app.1fce64b3.js" defer></script><script src="/matheusblog/assets/js/2.07d659a0.js" defer></script><script src="/matheusblog/assets/js/178.6c037674.js" defer></script>
  </body>
</html>
