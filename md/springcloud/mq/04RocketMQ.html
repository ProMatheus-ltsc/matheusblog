<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RocketMQ | MyBlog</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="包含: Java 基础, JVM, Spring, Spring Boot, Spring Cloud, MySQL, ElasticSearch, MongoDB, Docker, k8s, Linux, DevOps, 分布式,  开发工具, Git, IDE...">
    
    <link rel="preload" href="/matheusblog/assets/css/0.styles.980a01be.css" as="style"><link rel="preload" href="/matheusblog/assets/js/app.410bdacf.js" as="script"><link rel="preload" href="/matheusblog/assets/js/3.21aaf515.js" as="script"><link rel="preload" href="/matheusblog/assets/js/334.399a57b3.js" as="script"><link rel="prefetch" href="/matheusblog/assets/js/10.47e30d55.js"><link rel="prefetch" href="/matheusblog/assets/js/100.6e51dd82.js"><link rel="prefetch" href="/matheusblog/assets/js/101.3f804f45.js"><link rel="prefetch" href="/matheusblog/assets/js/102.d5759b5c.js"><link rel="prefetch" href="/matheusblog/assets/js/103.9451ef33.js"><link rel="prefetch" href="/matheusblog/assets/js/104.3cfe24e4.js"><link rel="prefetch" href="/matheusblog/assets/js/105.fd9fd788.js"><link rel="prefetch" href="/matheusblog/assets/js/106.0e2ebaf8.js"><link rel="prefetch" href="/matheusblog/assets/js/107.f6789388.js"><link rel="prefetch" href="/matheusblog/assets/js/108.99af9286.js"><link rel="prefetch" href="/matheusblog/assets/js/109.0b81e675.js"><link rel="prefetch" href="/matheusblog/assets/js/11.ad64f2aa.js"><link rel="prefetch" href="/matheusblog/assets/js/110.f7cd3a01.js"><link rel="prefetch" href="/matheusblog/assets/js/111.bcf43714.js"><link rel="prefetch" href="/matheusblog/assets/js/112.1a74bb96.js"><link rel="prefetch" href="/matheusblog/assets/js/113.ff52b235.js"><link rel="prefetch" href="/matheusblog/assets/js/114.f7cebfdb.js"><link rel="prefetch" href="/matheusblog/assets/js/115.e41bc7c0.js"><link rel="prefetch" href="/matheusblog/assets/js/116.b1eb3f23.js"><link rel="prefetch" href="/matheusblog/assets/js/117.b337200e.js"><link rel="prefetch" href="/matheusblog/assets/js/118.5c3c9df0.js"><link rel="prefetch" href="/matheusblog/assets/js/119.e0967512.js"><link rel="prefetch" href="/matheusblog/assets/js/12.3ce40fa3.js"><link rel="prefetch" href="/matheusblog/assets/js/120.26674994.js"><link rel="prefetch" href="/matheusblog/assets/js/121.6869056b.js"><link rel="prefetch" href="/matheusblog/assets/js/122.da8f2cde.js"><link rel="prefetch" href="/matheusblog/assets/js/123.4dafe117.js"><link rel="prefetch" href="/matheusblog/assets/js/124.d3619672.js"><link rel="prefetch" href="/matheusblog/assets/js/125.bece8f0b.js"><link rel="prefetch" href="/matheusblog/assets/js/126.38a97af9.js"><link rel="prefetch" href="/matheusblog/assets/js/127.9bfd4011.js"><link rel="prefetch" href="/matheusblog/assets/js/128.c7621d95.js"><link rel="prefetch" href="/matheusblog/assets/js/129.020ca51a.js"><link rel="prefetch" href="/matheusblog/assets/js/13.856d5b38.js"><link rel="prefetch" href="/matheusblog/assets/js/130.fb5547c7.js"><link rel="prefetch" href="/matheusblog/assets/js/131.02a33173.js"><link rel="prefetch" href="/matheusblog/assets/js/132.22a7f6f3.js"><link rel="prefetch" href="/matheusblog/assets/js/133.28e2a042.js"><link rel="prefetch" href="/matheusblog/assets/js/134.cea97435.js"><link rel="prefetch" href="/matheusblog/assets/js/135.fc6a9d8a.js"><link rel="prefetch" href="/matheusblog/assets/js/136.053c35c2.js"><link rel="prefetch" href="/matheusblog/assets/js/137.2513d5fc.js"><link rel="prefetch" href="/matheusblog/assets/js/138.c10c815c.js"><link rel="prefetch" href="/matheusblog/assets/js/139.1cac91bc.js"><link rel="prefetch" href="/matheusblog/assets/js/14.5c38e28f.js"><link rel="prefetch" href="/matheusblog/assets/js/140.500bf0b2.js"><link rel="prefetch" href="/matheusblog/assets/js/141.b0eac92e.js"><link rel="prefetch" href="/matheusblog/assets/js/142.31ca9508.js"><link rel="prefetch" href="/matheusblog/assets/js/143.cf3744c3.js"><link rel="prefetch" href="/matheusblog/assets/js/144.f4b520f6.js"><link rel="prefetch" href="/matheusblog/assets/js/145.3e59286e.js"><link rel="prefetch" href="/matheusblog/assets/js/146.84dbc072.js"><link rel="prefetch" href="/matheusblog/assets/js/147.e43d7df4.js"><link rel="prefetch" href="/matheusblog/assets/js/148.6a8f2406.js"><link rel="prefetch" href="/matheusblog/assets/js/149.21849ddf.js"><link rel="prefetch" href="/matheusblog/assets/js/15.705613cd.js"><link rel="prefetch" href="/matheusblog/assets/js/150.575a5981.js"><link rel="prefetch" href="/matheusblog/assets/js/151.50176b57.js"><link rel="prefetch" href="/matheusblog/assets/js/152.6d192f60.js"><link rel="prefetch" href="/matheusblog/assets/js/153.27a16b43.js"><link rel="prefetch" href="/matheusblog/assets/js/154.03f42b0e.js"><link rel="prefetch" href="/matheusblog/assets/js/155.b811f5a9.js"><link rel="prefetch" href="/matheusblog/assets/js/156.4a4883e1.js"><link rel="prefetch" href="/matheusblog/assets/js/157.fb79ef3c.js"><link rel="prefetch" href="/matheusblog/assets/js/158.c49c7f63.js"><link rel="prefetch" href="/matheusblog/assets/js/159.05cf824e.js"><link rel="prefetch" href="/matheusblog/assets/js/16.07cdc33a.js"><link rel="prefetch" href="/matheusblog/assets/js/160.ffa81c78.js"><link rel="prefetch" href="/matheusblog/assets/js/161.686884cf.js"><link rel="prefetch" href="/matheusblog/assets/js/162.3c359384.js"><link rel="prefetch" href="/matheusblog/assets/js/163.46a9b17c.js"><link rel="prefetch" href="/matheusblog/assets/js/164.78327141.js"><link rel="prefetch" href="/matheusblog/assets/js/165.a2481c1b.js"><link rel="prefetch" href="/matheusblog/assets/js/166.2954a59d.js"><link rel="prefetch" href="/matheusblog/assets/js/167.a3bd83f8.js"><link rel="prefetch" href="/matheusblog/assets/js/168.f0660a0e.js"><link rel="prefetch" href="/matheusblog/assets/js/169.d12d1758.js"><link rel="prefetch" href="/matheusblog/assets/js/17.f9463288.js"><link rel="prefetch" href="/matheusblog/assets/js/170.b748a5b8.js"><link rel="prefetch" href="/matheusblog/assets/js/171.6d51d35d.js"><link rel="prefetch" href="/matheusblog/assets/js/172.db51c06c.js"><link rel="prefetch" href="/matheusblog/assets/js/173.938fd7c9.js"><link rel="prefetch" href="/matheusblog/assets/js/174.2ceabb55.js"><link rel="prefetch" href="/matheusblog/assets/js/175.cf52c6f0.js"><link rel="prefetch" href="/matheusblog/assets/js/176.8011d3a5.js"><link rel="prefetch" href="/matheusblog/assets/js/177.fd281e22.js"><link rel="prefetch" href="/matheusblog/assets/js/178.3eabe935.js"><link rel="prefetch" href="/matheusblog/assets/js/179.68deaee0.js"><link rel="prefetch" href="/matheusblog/assets/js/18.1d68fb6b.js"><link rel="prefetch" href="/matheusblog/assets/js/180.39837910.js"><link rel="prefetch" href="/matheusblog/assets/js/181.edd55eba.js"><link rel="prefetch" href="/matheusblog/assets/js/182.2dbe3970.js"><link rel="prefetch" href="/matheusblog/assets/js/183.4bb2fa0d.js"><link rel="prefetch" href="/matheusblog/assets/js/184.aef249f4.js"><link rel="prefetch" href="/matheusblog/assets/js/185.ba3d76a6.js"><link rel="prefetch" href="/matheusblog/assets/js/186.e8c0a59e.js"><link rel="prefetch" href="/matheusblog/assets/js/187.ce9ab2bc.js"><link rel="prefetch" href="/matheusblog/assets/js/188.ee0e030d.js"><link rel="prefetch" href="/matheusblog/assets/js/189.e211102e.js"><link rel="prefetch" href="/matheusblog/assets/js/19.47489010.js"><link rel="prefetch" href="/matheusblog/assets/js/190.86300dc2.js"><link rel="prefetch" href="/matheusblog/assets/js/191.6f74d45e.js"><link rel="prefetch" href="/matheusblog/assets/js/192.8eff2b63.js"><link rel="prefetch" href="/matheusblog/assets/js/193.1e3f93e0.js"><link rel="prefetch" href="/matheusblog/assets/js/194.f3f1b249.js"><link rel="prefetch" href="/matheusblog/assets/js/195.db59dd23.js"><link rel="prefetch" href="/matheusblog/assets/js/196.6243705f.js"><link rel="prefetch" href="/matheusblog/assets/js/197.58db99ab.js"><link rel="prefetch" href="/matheusblog/assets/js/198.a827be53.js"><link rel="prefetch" href="/matheusblog/assets/js/199.e64510f3.js"><link rel="prefetch" href="/matheusblog/assets/js/2.c3e83c61.js"><link rel="prefetch" href="/matheusblog/assets/js/20.50b4b462.js"><link rel="prefetch" href="/matheusblog/assets/js/200.e13c5d6c.js"><link rel="prefetch" href="/matheusblog/assets/js/201.78998a8b.js"><link rel="prefetch" href="/matheusblog/assets/js/202.d8fe57e5.js"><link rel="prefetch" href="/matheusblog/assets/js/203.9b2dae39.js"><link rel="prefetch" href="/matheusblog/assets/js/204.55256dd9.js"><link rel="prefetch" href="/matheusblog/assets/js/205.e0d99ed0.js"><link rel="prefetch" href="/matheusblog/assets/js/206.0aa30b7c.js"><link rel="prefetch" href="/matheusblog/assets/js/207.a5745626.js"><link rel="prefetch" href="/matheusblog/assets/js/208.f20ee233.js"><link rel="prefetch" href="/matheusblog/assets/js/209.f723c01e.js"><link rel="prefetch" href="/matheusblog/assets/js/21.290dfd39.js"><link rel="prefetch" href="/matheusblog/assets/js/210.51f38874.js"><link rel="prefetch" href="/matheusblog/assets/js/211.33274c33.js"><link rel="prefetch" href="/matheusblog/assets/js/212.fa687e1a.js"><link rel="prefetch" href="/matheusblog/assets/js/213.4d25912b.js"><link rel="prefetch" href="/matheusblog/assets/js/214.66cb57c5.js"><link rel="prefetch" href="/matheusblog/assets/js/215.a95bf91d.js"><link rel="prefetch" href="/matheusblog/assets/js/216.2ca1689d.js"><link rel="prefetch" href="/matheusblog/assets/js/217.54bd9a09.js"><link rel="prefetch" href="/matheusblog/assets/js/218.897c007d.js"><link rel="prefetch" href="/matheusblog/assets/js/219.9d9632db.js"><link rel="prefetch" href="/matheusblog/assets/js/22.2dc04101.js"><link rel="prefetch" href="/matheusblog/assets/js/220.1374bc7f.js"><link rel="prefetch" href="/matheusblog/assets/js/221.3f678808.js"><link rel="prefetch" href="/matheusblog/assets/js/222.dd0c8fe9.js"><link rel="prefetch" href="/matheusblog/assets/js/223.cf6d10d2.js"><link rel="prefetch" href="/matheusblog/assets/js/224.9ec61da1.js"><link rel="prefetch" href="/matheusblog/assets/js/225.b7f1ff5c.js"><link rel="prefetch" href="/matheusblog/assets/js/226.a32ac821.js"><link rel="prefetch" href="/matheusblog/assets/js/227.35ae2e0c.js"><link rel="prefetch" href="/matheusblog/assets/js/228.048f617d.js"><link rel="prefetch" href="/matheusblog/assets/js/229.3ebe5f7d.js"><link rel="prefetch" href="/matheusblog/assets/js/23.58ce594c.js"><link rel="prefetch" href="/matheusblog/assets/js/230.a045f74b.js"><link rel="prefetch" href="/matheusblog/assets/js/231.ed89bae1.js"><link rel="prefetch" href="/matheusblog/assets/js/232.c8135478.js"><link rel="prefetch" href="/matheusblog/assets/js/233.7d3cc65b.js"><link rel="prefetch" href="/matheusblog/assets/js/234.91e959ea.js"><link rel="prefetch" href="/matheusblog/assets/js/235.6de15ca6.js"><link rel="prefetch" href="/matheusblog/assets/js/236.44321aeb.js"><link rel="prefetch" href="/matheusblog/assets/js/237.6c68e409.js"><link rel="prefetch" href="/matheusblog/assets/js/238.5fa9d096.js"><link rel="prefetch" href="/matheusblog/assets/js/239.b8cc9b75.js"><link rel="prefetch" href="/matheusblog/assets/js/24.07538029.js"><link rel="prefetch" href="/matheusblog/assets/js/240.a2126f78.js"><link rel="prefetch" href="/matheusblog/assets/js/241.f3a62eed.js"><link rel="prefetch" href="/matheusblog/assets/js/242.2ec904c6.js"><link rel="prefetch" href="/matheusblog/assets/js/243.27a79867.js"><link rel="prefetch" href="/matheusblog/assets/js/244.a4d9f8d8.js"><link rel="prefetch" href="/matheusblog/assets/js/245.2863da58.js"><link rel="prefetch" href="/matheusblog/assets/js/246.ec782149.js"><link rel="prefetch" href="/matheusblog/assets/js/247.d96fa266.js"><link rel="prefetch" href="/matheusblog/assets/js/248.972e23a8.js"><link rel="prefetch" href="/matheusblog/assets/js/249.c8655729.js"><link rel="prefetch" href="/matheusblog/assets/js/25.bf309f9b.js"><link rel="prefetch" href="/matheusblog/assets/js/250.8bf3588a.js"><link rel="prefetch" href="/matheusblog/assets/js/251.ad39b2f2.js"><link rel="prefetch" href="/matheusblog/assets/js/252.2c151ae2.js"><link rel="prefetch" href="/matheusblog/assets/js/253.aa93b569.js"><link rel="prefetch" href="/matheusblog/assets/js/254.c7d42912.js"><link rel="prefetch" href="/matheusblog/assets/js/255.e1ceeee4.js"><link rel="prefetch" href="/matheusblog/assets/js/256.0179cf45.js"><link rel="prefetch" href="/matheusblog/assets/js/257.444f45de.js"><link rel="prefetch" href="/matheusblog/assets/js/258.b222e775.js"><link rel="prefetch" href="/matheusblog/assets/js/259.5ed26ab8.js"><link rel="prefetch" href="/matheusblog/assets/js/26.7c68debc.js"><link rel="prefetch" href="/matheusblog/assets/js/260.c605ba4d.js"><link rel="prefetch" href="/matheusblog/assets/js/261.68eb8558.js"><link rel="prefetch" href="/matheusblog/assets/js/262.c978c582.js"><link rel="prefetch" href="/matheusblog/assets/js/263.069b83bd.js"><link rel="prefetch" href="/matheusblog/assets/js/264.09c2dd46.js"><link rel="prefetch" href="/matheusblog/assets/js/265.050e28ec.js"><link rel="prefetch" href="/matheusblog/assets/js/266.394a85c1.js"><link rel="prefetch" href="/matheusblog/assets/js/267.d873cb3d.js"><link rel="prefetch" href="/matheusblog/assets/js/268.43afe886.js"><link rel="prefetch" href="/matheusblog/assets/js/269.afc16a79.js"><link rel="prefetch" href="/matheusblog/assets/js/27.03a09431.js"><link rel="prefetch" href="/matheusblog/assets/js/270.e221328e.js"><link rel="prefetch" href="/matheusblog/assets/js/271.c64c57f9.js"><link rel="prefetch" href="/matheusblog/assets/js/272.3e6f2d1c.js"><link rel="prefetch" href="/matheusblog/assets/js/273.0a814da7.js"><link rel="prefetch" href="/matheusblog/assets/js/274.a568c76b.js"><link rel="prefetch" href="/matheusblog/assets/js/275.27cc3e05.js"><link rel="prefetch" href="/matheusblog/assets/js/276.77060abb.js"><link rel="prefetch" href="/matheusblog/assets/js/277.2639a269.js"><link rel="prefetch" href="/matheusblog/assets/js/278.52707e03.js"><link rel="prefetch" href="/matheusblog/assets/js/279.f08baecb.js"><link rel="prefetch" href="/matheusblog/assets/js/28.d7490f07.js"><link rel="prefetch" href="/matheusblog/assets/js/280.2f087c2d.js"><link rel="prefetch" href="/matheusblog/assets/js/281.8c67b63d.js"><link rel="prefetch" href="/matheusblog/assets/js/282.3bd18cdb.js"><link rel="prefetch" href="/matheusblog/assets/js/283.94d9a086.js"><link rel="prefetch" href="/matheusblog/assets/js/284.8195cd87.js"><link rel="prefetch" href="/matheusblog/assets/js/285.5f7f7e82.js"><link rel="prefetch" href="/matheusblog/assets/js/286.1fadfff9.js"><link rel="prefetch" href="/matheusblog/assets/js/287.87160849.js"><link rel="prefetch" href="/matheusblog/assets/js/288.2da6c25f.js"><link rel="prefetch" href="/matheusblog/assets/js/289.85544bb1.js"><link rel="prefetch" href="/matheusblog/assets/js/29.55e6d55c.js"><link rel="prefetch" href="/matheusblog/assets/js/290.a0d6d7ac.js"><link rel="prefetch" href="/matheusblog/assets/js/291.255e9a76.js"><link rel="prefetch" href="/matheusblog/assets/js/292.2eb10722.js"><link rel="prefetch" href="/matheusblog/assets/js/293.db7b8e2c.js"><link rel="prefetch" href="/matheusblog/assets/js/294.645db28a.js"><link rel="prefetch" href="/matheusblog/assets/js/295.5efd7177.js"><link rel="prefetch" href="/matheusblog/assets/js/296.0860009d.js"><link rel="prefetch" href="/matheusblog/assets/js/297.292594eb.js"><link rel="prefetch" href="/matheusblog/assets/js/298.7510ca7a.js"><link rel="prefetch" href="/matheusblog/assets/js/299.30526071.js"><link rel="prefetch" href="/matheusblog/assets/js/30.14922ceb.js"><link rel="prefetch" href="/matheusblog/assets/js/300.baa1552f.js"><link rel="prefetch" href="/matheusblog/assets/js/301.c40bc034.js"><link rel="prefetch" href="/matheusblog/assets/js/302.4a83b48b.js"><link rel="prefetch" href="/matheusblog/assets/js/303.1a2ebc74.js"><link rel="prefetch" href="/matheusblog/assets/js/304.ecdb1a89.js"><link rel="prefetch" href="/matheusblog/assets/js/305.98cd2683.js"><link rel="prefetch" href="/matheusblog/assets/js/306.a87de641.js"><link rel="prefetch" href="/matheusblog/assets/js/307.cde469fc.js"><link rel="prefetch" href="/matheusblog/assets/js/308.148db964.js"><link rel="prefetch" href="/matheusblog/assets/js/309.344b5f5e.js"><link rel="prefetch" href="/matheusblog/assets/js/31.baae5c93.js"><link rel="prefetch" href="/matheusblog/assets/js/310.3753ac86.js"><link rel="prefetch" href="/matheusblog/assets/js/311.4cf7ec82.js"><link rel="prefetch" href="/matheusblog/assets/js/312.73cb67d0.js"><link rel="prefetch" href="/matheusblog/assets/js/313.6a561696.js"><link rel="prefetch" href="/matheusblog/assets/js/314.e50fe568.js"><link rel="prefetch" href="/matheusblog/assets/js/315.f8078d82.js"><link rel="prefetch" href="/matheusblog/assets/js/316.cea0101f.js"><link rel="prefetch" href="/matheusblog/assets/js/317.e1dbaa63.js"><link rel="prefetch" href="/matheusblog/assets/js/318.3003268e.js"><link rel="prefetch" href="/matheusblog/assets/js/319.cd9d6764.js"><link rel="prefetch" href="/matheusblog/assets/js/32.d7f33f64.js"><link rel="prefetch" href="/matheusblog/assets/js/320.6fe6475b.js"><link rel="prefetch" href="/matheusblog/assets/js/321.6f644c81.js"><link rel="prefetch" href="/matheusblog/assets/js/322.39ebca52.js"><link rel="prefetch" href="/matheusblog/assets/js/323.539770c7.js"><link rel="prefetch" href="/matheusblog/assets/js/324.dfa73f17.js"><link rel="prefetch" href="/matheusblog/assets/js/325.e1f4b9f9.js"><link rel="prefetch" href="/matheusblog/assets/js/326.04287cfb.js"><link rel="prefetch" href="/matheusblog/assets/js/327.e0798dd5.js"><link rel="prefetch" href="/matheusblog/assets/js/328.27c21898.js"><link rel="prefetch" href="/matheusblog/assets/js/329.3423ffd8.js"><link rel="prefetch" href="/matheusblog/assets/js/33.eae7f6b4.js"><link rel="prefetch" href="/matheusblog/assets/js/330.7bce1a7b.js"><link rel="prefetch" href="/matheusblog/assets/js/331.f3dc8755.js"><link rel="prefetch" href="/matheusblog/assets/js/332.66db2b0c.js"><link rel="prefetch" href="/matheusblog/assets/js/333.d2627364.js"><link rel="prefetch" href="/matheusblog/assets/js/335.3b80591b.js"><link rel="prefetch" href="/matheusblog/assets/js/336.e8554a65.js"><link rel="prefetch" href="/matheusblog/assets/js/337.c974105a.js"><link rel="prefetch" href="/matheusblog/assets/js/338.c5a114ff.js"><link rel="prefetch" href="/matheusblog/assets/js/339.25a45d0f.js"><link rel="prefetch" href="/matheusblog/assets/js/34.933d2bc8.js"><link rel="prefetch" href="/matheusblog/assets/js/340.a7669dc7.js"><link rel="prefetch" href="/matheusblog/assets/js/341.01ca6d36.js"><link rel="prefetch" href="/matheusblog/assets/js/342.79592149.js"><link rel="prefetch" href="/matheusblog/assets/js/343.17c6bbad.js"><link rel="prefetch" href="/matheusblog/assets/js/344.1d3f2bad.js"><link rel="prefetch" href="/matheusblog/assets/js/345.593c74c8.js"><link rel="prefetch" href="/matheusblog/assets/js/35.4edbcba5.js"><link rel="prefetch" href="/matheusblog/assets/js/36.f666d027.js"><link rel="prefetch" href="/matheusblog/assets/js/37.021be9f4.js"><link rel="prefetch" href="/matheusblog/assets/js/38.a327ee00.js"><link rel="prefetch" href="/matheusblog/assets/js/39.24c89d0c.js"><link rel="prefetch" href="/matheusblog/assets/js/4.210ede07.js"><link rel="prefetch" href="/matheusblog/assets/js/40.8d0a40df.js"><link rel="prefetch" href="/matheusblog/assets/js/41.1137a351.js"><link rel="prefetch" href="/matheusblog/assets/js/42.711fd480.js"><link rel="prefetch" href="/matheusblog/assets/js/43.af9edbc5.js"><link rel="prefetch" href="/matheusblog/assets/js/44.6b987e5d.js"><link rel="prefetch" href="/matheusblog/assets/js/45.7724b677.js"><link rel="prefetch" href="/matheusblog/assets/js/46.08086758.js"><link rel="prefetch" href="/matheusblog/assets/js/47.aa0a0b0f.js"><link rel="prefetch" href="/matheusblog/assets/js/48.dff11b83.js"><link rel="prefetch" href="/matheusblog/assets/js/49.a689c326.js"><link rel="prefetch" href="/matheusblog/assets/js/5.b8d87de7.js"><link rel="prefetch" href="/matheusblog/assets/js/50.811a33a0.js"><link rel="prefetch" href="/matheusblog/assets/js/51.bf183831.js"><link rel="prefetch" href="/matheusblog/assets/js/52.9f32dbee.js"><link rel="prefetch" href="/matheusblog/assets/js/53.68a3d0c2.js"><link rel="prefetch" href="/matheusblog/assets/js/54.277ce02e.js"><link rel="prefetch" href="/matheusblog/assets/js/55.126d6c4b.js"><link rel="prefetch" href="/matheusblog/assets/js/56.df929f7d.js"><link rel="prefetch" href="/matheusblog/assets/js/57.56859003.js"><link rel="prefetch" href="/matheusblog/assets/js/58.e69b85a8.js"><link rel="prefetch" href="/matheusblog/assets/js/59.5ce7bfcb.js"><link rel="prefetch" href="/matheusblog/assets/js/6.97ae29f1.js"><link rel="prefetch" href="/matheusblog/assets/js/60.50d7e927.js"><link rel="prefetch" href="/matheusblog/assets/js/61.e148e81d.js"><link rel="prefetch" href="/matheusblog/assets/js/62.f0128dce.js"><link rel="prefetch" href="/matheusblog/assets/js/63.4da683dd.js"><link rel="prefetch" href="/matheusblog/assets/js/64.9a7f06a3.js"><link rel="prefetch" href="/matheusblog/assets/js/65.40d9796e.js"><link rel="prefetch" href="/matheusblog/assets/js/66.992cb28d.js"><link rel="prefetch" href="/matheusblog/assets/js/67.dcf36f49.js"><link rel="prefetch" href="/matheusblog/assets/js/68.bb9f3dca.js"><link rel="prefetch" href="/matheusblog/assets/js/69.4654f4f9.js"><link rel="prefetch" href="/matheusblog/assets/js/7.77c85305.js"><link rel="prefetch" href="/matheusblog/assets/js/70.eb9172bf.js"><link rel="prefetch" href="/matheusblog/assets/js/71.3a8e86aa.js"><link rel="prefetch" href="/matheusblog/assets/js/72.a86f3478.js"><link rel="prefetch" href="/matheusblog/assets/js/73.9a717185.js"><link rel="prefetch" href="/matheusblog/assets/js/74.d371ee99.js"><link rel="prefetch" href="/matheusblog/assets/js/75.518c7394.js"><link rel="prefetch" href="/matheusblog/assets/js/76.e3616e97.js"><link rel="prefetch" href="/matheusblog/assets/js/77.db8ef0c7.js"><link rel="prefetch" href="/matheusblog/assets/js/78.c941f6e9.js"><link rel="prefetch" href="/matheusblog/assets/js/79.c23daede.js"><link rel="prefetch" href="/matheusblog/assets/js/8.cb024c7f.js"><link rel="prefetch" href="/matheusblog/assets/js/80.e60fa878.js"><link rel="prefetch" href="/matheusblog/assets/js/81.c768d163.js"><link rel="prefetch" href="/matheusblog/assets/js/82.edecb687.js"><link rel="prefetch" href="/matheusblog/assets/js/83.0e023d07.js"><link rel="prefetch" href="/matheusblog/assets/js/84.c82fb96b.js"><link rel="prefetch" href="/matheusblog/assets/js/85.263050a0.js"><link rel="prefetch" href="/matheusblog/assets/js/86.d4161949.js"><link rel="prefetch" href="/matheusblog/assets/js/87.960eaec9.js"><link rel="prefetch" href="/matheusblog/assets/js/88.82047600.js"><link rel="prefetch" href="/matheusblog/assets/js/89.e01a0f77.js"><link rel="prefetch" href="/matheusblog/assets/js/9.ca8f72d2.js"><link rel="prefetch" href="/matheusblog/assets/js/90.8a7a027f.js"><link rel="prefetch" href="/matheusblog/assets/js/91.20b6a284.js"><link rel="prefetch" href="/matheusblog/assets/js/92.fce02977.js"><link rel="prefetch" href="/matheusblog/assets/js/93.ba0b8882.js"><link rel="prefetch" href="/matheusblog/assets/js/94.78c85e17.js"><link rel="prefetch" href="/matheusblog/assets/js/95.d17d251c.js"><link rel="prefetch" href="/matheusblog/assets/js/96.b087ef79.js"><link rel="prefetch" href="/matheusblog/assets/js/97.9ba0439c.js"><link rel="prefetch" href="/matheusblog/assets/js/98.9291c459.js"><link rel="prefetch" href="/matheusblog/assets/js/99.62bca8eb.js">
    <link rel="stylesheet" href="/matheusblog/assets/css/0.styles.980a01be.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/matheusblog/" class="home-link router-link-active"><!----> <span class="site-name">MyBlog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Menu" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java Menu" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/basic/helloworld.html" class="nav-link">
  认识编程
</a></li></ul></li><li class="dropdown-item"><h4>
          集合
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/collection/泛型和集合.html" class="nav-link">
  泛型和集合
</a></li></ul></li><li class="dropdown-item"><h4>
          IO
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/io/IO.html" class="nav-link">
  IO
</a></li></ul></li><li class="dropdown-item"><h4>
          并发编程
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/thread/多线程.html" class="nav-link">
  多线程
</a></li></ul></li><li class="dropdown-item"><h4>
          JVM
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/jvm/01JVM简介.html" class="nav-link">
  JVM简介
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web Menu" class="dropdown-title"><span class="title">Web基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web Menu" class="mobile-dropdown-title"><span class="title">Web基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/html5/01HTML概述.html" class="nav-link">
  HTML概述
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/css/01基础选择器+字体文本样式.html" class="nav-link">
  基础选择器+字体文本样式
</a></li></ul></li><li class="dropdown-item"><h4>
          JS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/js/01JavaScript基础.html" class="nav-link">
  JavaScript基础
</a></li></ul></li><li class="dropdown-item"><h4>
          VUE
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/vue/01Vue简介与安装使用.html" class="nav-link">
  Vue简介与安装使用
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="database Menu" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="database Menu" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MySQL
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/mysql/01数据库软件的安装与使用.html" class="nav-link">
  数据库软件的安装与使用
</a></li></ul></li><li class="dropdown-item"><h4>
          MongoDB
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/mongodb/01数据库和集合基本操作.html" class="nav-link">
  数据库和集合基本操作
</a></li></ul></li><li class="dropdown-item"><h4>
          ElasticSearch
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/elasticsearch/02Elasticsearch-Docker搭建ES.html" class="nav-link">
  Docker搭建ES
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringFramework Menu" class="dropdown-title"><span class="title">SpringFramework</span> <span class="arrow down"></span></button> <button type="button" aria-label="SpringFramework Menu" class="mobile-dropdown-title"><span class="title">SpringFramework</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Maven
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/spring/Spring概述.html" class="nav-link">
  Spring概述
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringMVC
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/springmvc/springMVC框架.html" class="nav-link">
  SpringMVC框架
</a></li></ul></li><li class="dropdown-item"><h4>
          MyBatis-plus
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/mybatis/01MyBatis简介.html" class="nav-link">
  MyBatis简介
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringBoot
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/springboot/SpringBoot简介.html" class="nav-link">
  SpringBoot简介
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/project/jt-project/problem.html" class="nav-link">
  项目
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Devops Menu" class="dropdown-title"><span class="title">DevOps</span> <span class="arrow down"></span></button> <button type="button" aria-label="Devops Menu" class="mobile-dropdown-title"><span class="title">DevOps</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          linux
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/linux/00 Centos.html" class="nav-link">
  CentOS
</a></li></ul></li><li class="dropdown-item"><h4>
          tools
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/tools/VS Code使用.html" class="nav-link">
  VS Code使用
</a></li></ul></li><li class="dropdown-item"><h4>
          Docker
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/docker/01Docker入门.html" class="nav-link">
  Docker入门
</a></li></ul></li><li class="dropdown-item"><h4>
          k8s
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/k8s/01Kubernetes介绍及使用.html" class="nav-link">
  K8s介绍与使用
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/springcloud/note.html" class="nav-link">
  SpringCloud
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="develop Menu" class="dropdown-title"><span class="title">开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="develop Menu" class="mobile-dropdown-title"><span class="title">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          代码规范
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/code-style/effective-java/目录.html" class="nav-link">
  Effective-Java
</a></li></ul></li><li class="dropdown-item"><h4>
          开发环境
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/JUnit/01什么是单元测试.html" class="nav-link">
  单元测试
</a></li><li class="dropdown-subitem"><a href="/matheusblog/md/project/jt-project/2. IDEA配置.html" class="nav-link">
  IDEA配置
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/arch/计算机软件架构发展历史.html" class="nav-link">
  架构
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="other-languages Menu" class="dropdown-title"><span class="title">其他语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="other-languages Menu" class="mobile-dropdown-title"><span class="title">其他语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Go
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/other-languages/go/01Go语言介绍.html" class="nav-link">
  Go语言介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          Scala
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/other-languages/scala/Scala学习宝典.html" class="nav-link">
  Scala学习宝典
</a></li></ul></li><li class="dropdown-item"><h4>
          Python
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/other-languages/python/Python基础学习.html" class="nav-link">
  Python基础学习
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Menu" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java Menu" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/basic/helloworld.html" class="nav-link">
  认识编程
</a></li></ul></li><li class="dropdown-item"><h4>
          集合
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/collection/泛型和集合.html" class="nav-link">
  泛型和集合
</a></li></ul></li><li class="dropdown-item"><h4>
          IO
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/io/IO.html" class="nav-link">
  IO
</a></li></ul></li><li class="dropdown-item"><h4>
          并发编程
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/thread/多线程.html" class="nav-link">
  多线程
</a></li></ul></li><li class="dropdown-item"><h4>
          JVM
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/jvm/01JVM简介.html" class="nav-link">
  JVM简介
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web Menu" class="dropdown-title"><span class="title">Web基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web Menu" class="mobile-dropdown-title"><span class="title">Web基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/html5/01HTML概述.html" class="nav-link">
  HTML概述
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/css/01基础选择器+字体文本样式.html" class="nav-link">
  基础选择器+字体文本样式
</a></li></ul></li><li class="dropdown-item"><h4>
          JS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/js/01JavaScript基础.html" class="nav-link">
  JavaScript基础
</a></li></ul></li><li class="dropdown-item"><h4>
          VUE
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/vue/01Vue简介与安装使用.html" class="nav-link">
  Vue简介与安装使用
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="database Menu" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="database Menu" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MySQL
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/mysql/01数据库软件的安装与使用.html" class="nav-link">
  数据库软件的安装与使用
</a></li></ul></li><li class="dropdown-item"><h4>
          MongoDB
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/mongodb/01数据库和集合基本操作.html" class="nav-link">
  数据库和集合基本操作
</a></li></ul></li><li class="dropdown-item"><h4>
          ElasticSearch
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/elasticsearch/02Elasticsearch-Docker搭建ES.html" class="nav-link">
  Docker搭建ES
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringFramework Menu" class="dropdown-title"><span class="title">SpringFramework</span> <span class="arrow down"></span></button> <button type="button" aria-label="SpringFramework Menu" class="mobile-dropdown-title"><span class="title">SpringFramework</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Maven
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/spring/Spring概述.html" class="nav-link">
  Spring概述
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringMVC
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/springmvc/springMVC框架.html" class="nav-link">
  SpringMVC框架
</a></li></ul></li><li class="dropdown-item"><h4>
          MyBatis-plus
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/mybatis/01MyBatis简介.html" class="nav-link">
  MyBatis简介
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringBoot
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/springboot/SpringBoot简介.html" class="nav-link">
  SpringBoot简介
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/project/jt-project/problem.html" class="nav-link">
  项目
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Devops Menu" class="dropdown-title"><span class="title">DevOps</span> <span class="arrow down"></span></button> <button type="button" aria-label="Devops Menu" class="mobile-dropdown-title"><span class="title">DevOps</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          linux
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/linux/00 Centos.html" class="nav-link">
  CentOS
</a></li></ul></li><li class="dropdown-item"><h4>
          tools
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/tools/VS Code使用.html" class="nav-link">
  VS Code使用
</a></li></ul></li><li class="dropdown-item"><h4>
          Docker
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/docker/01Docker入门.html" class="nav-link">
  Docker入门
</a></li></ul></li><li class="dropdown-item"><h4>
          k8s
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/k8s/01Kubernetes介绍及使用.html" class="nav-link">
  K8s介绍与使用
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/springcloud/note.html" class="nav-link">
  SpringCloud
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="develop Menu" class="dropdown-title"><span class="title">开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="develop Menu" class="mobile-dropdown-title"><span class="title">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          代码规范
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/code-style/effective-java/目录.html" class="nav-link">
  Effective-Java
</a></li></ul></li><li class="dropdown-item"><h4>
          开发环境
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/JUnit/01什么是单元测试.html" class="nav-link">
  单元测试
</a></li><li class="dropdown-subitem"><a href="/matheusblog/md/project/jt-project/2. IDEA配置.html" class="nav-link">
  IDEA配置
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/arch/计算机软件架构发展历史.html" class="nav-link">
  架构
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="other-languages Menu" class="dropdown-title"><span class="title">其他语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="other-languages Menu" class="mobile-dropdown-title"><span class="title">其他语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Go
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/other-languages/go/01Go语言介绍.html" class="nav-link">
  Go语言介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          Scala
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/other-languages/scala/Scala学习宝典.html" class="nav-link">
  Scala学习宝典
</a></li></ul></li><li class="dropdown-item"><h4>
          Python
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/other-languages/python/Python基础学习.html" class="nav-link">
  Python基础学习
</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>SpringCloud</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matheusblog/md/springcloud/note.html" class="sidebar-link">微服务部署</a></li><li><a href="/matheusblog/md/springcloud/00微服务架构入门.html" class="sidebar-link">微服务架构入门</a></li><li><a href="/matheusblog/md/springcloud/01Nacos注册中心入门.html" class="sidebar-link">Nacos注册中心入门</a></li><li><a href="/matheusblog/md/springcloud/02远程服务调用实践.html" class="sidebar-link">远程服务调用实践</a></li><li><a href="/matheusblog/md/springcloud/03Nacos配置中心实践.html" class="sidebar-link">Nacos配置中心实践</a></li><li><a href="/matheusblog/md/springcloud/04Sentinel限流应用实践.html" class="sidebar-link">Sentinel简介</a></li><li><a href="/matheusblog/md/springcloud/05API网关入门实践.html" class="sidebar-link">网关简介</a></li><li><a href="/matheusblog/md/springcloud/06SSO单点登录系统进阶实现.html" class="sidebar-link">单点登陆系统简介</a></li><li><a href="/matheusblog/md/springcloud/07若依权限管理子系统简介.html" class="sidebar-link">若依系统简介</a></li><li><a href="/matheusblog/md/springcloud/08SpringCloud入门操作手册.html" class="sidebar-link">SpringCloud入门操作手册</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>消息队列</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matheusblog/md/springcloud/mq/01RabbitMQ.html" class="sidebar-link">RabbitMQ</a></li><li><a href="/matheusblog/md/springcloud/mq/02SpringBoot整合.html" class="sidebar-link">SpringBoot整合</a></li><li><a href="/matheusblog/md/springcloud/mq/03消息队列对比.html" class="sidebar-link">消息队列对比</a></li><li><a href="/matheusblog/md/springcloud/mq/04RocketMQ.html" aria-current="page" class="active sidebar-link">RocketMQ</a></li><li><a href="/matheusblog/md/springcloud/mq/05使用RocketMQ原生API收发消息代码样例.html" class="sidebar-link">使用RocketMQ原生API收发消息代码样例</a></li><li><a href="/matheusblog/md/springcloud/mq/06Springboot整合RocetMQ收发消息样例.html" class="sidebar-link">Springboot整合RocetMQ收发消息样例</a></li><li><a href="/matheusblog/md/springcloud/mq/07RocketMQ发送事务消息原理分析和代码实现.html" class="sidebar-link">RocketMQ发送事务消息原理分析和代码实现</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="rocketmq"><a href="#rocketmq" class="header-anchor">#</a> RocketMQ</h1> <p></p><div class="table-of-contents"><ul><li><a href="#文件下载">文件下载</a></li><li><a href="#安装">安装</a><ul><li><a href="#安装配置-jdk8">安装配置 jdk8</a></li><li><a href="#安装rocketmq">安装RocketMQ</a></li></ul></li><li><a href="#测试">测试</a></li><li><a href="#rocketmq-的关闭命令">RocketMQ 的关闭命令</a><ul><li><a href="#关闭-broker">关闭 broker</a></li><li><a href="#关闭-nameserver">关闭 nameserver</a></li></ul></li><li><a href="#管理界面">管理界面</a></li><li><a href="#收发消息出现超时问题">收发消息出现超时问题</a></li><li><a href="#部署环境">部署环境</a></li><li><a href="#安装rocketmq">安装Rocketmq</a></li><li><a href="#建文件夹">建文件夹</a></li><li><a href="#配置">配置</a><ul><li><a href="#_1-broker-a-a主服务器配置">1. broker-a，a主服务器配置</a></li><li><a href="#_2-broker-a-slave-a从服务器配置">2. broker-a slave，a从服务器配置</a></li><li><a href="#_3-broker-b-b主服务器配置">3. broker-b，b主服务器配置</a></li><li><a href="#_4-broker-b-slave-b从服务器配置">4. broker-b slave，b从服务器配置</a></li><li><a href="#配置要点说明">配置要点说明</a></li></ul></li><li><a href="#启动">启动</a><ul><li><a href="#_1-启动两个-name-server">1. 启动两个 name server</a></li><li><a href="#_2-启动-broker-a-的主从两台服务器">2. 启动 broker a 的主从两台服务器</a></li><li><a href="#_3-启动-broker-b-的主从两台服务器">3. 启动 broker b 的主从两台服务器</a></li></ul></li><li><a href="#检查启动的服务">检查启动的服务</a></li><li><a href="#启动管理界面">启动管理界面</a></li><li><a href="#topic-基本原理">Topic 基本原理</a><ul><li><a href="#在rocketmq集群中新建-topic1">在Rocketmq集群中新建 Topic1</a></li><li><a href="#perm-参数的含义">perm 参数的含义</a></li><li><a href="#topic-收发消息原理">Topic 收发消息原理</a></li><li><a href="#生产者的负载均衡">生产者的负载均衡</a></li><li><a href="#消费者的负载均衡">消费者的负载均衡</a></li><li><a href="#问题">问题</a></li></ul></li><li><a href="#nameserver-基本原理">NameServer 基本原理</a><ul><li><a href="#基本认识">基本认识</a></li><li><a href="#broker、producer、consumer-与nameserver的通信">Broker、Producer、Consumer 与NameServer的通信</a></li></ul></li></ul></div><p></p> <h2 id="文件下载"><a href="#文件下载" class="header-anchor">#</a> 文件下载</h2> <ul><li><a href="https://download.csdn.net/download/weixin_38305440/12552021" target="_blank" rel="noopener noreferrer">jdk-8-u212<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://download.csdn.net/download/weixin_38305440/12552334" target="_blank" rel="noopener noreferrer">rocketmq4.7-rocketconsole1.0.1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <h3 id="安装配置-jdk8"><a href="#安装配置-jdk8" class="header-anchor">#</a> 安装配置 jdk8</h3> <p><strong>1. 上传jdk压缩文件</strong></p> <p>将文件<code>jdk-8u212-linux-x64.tar.gz</code>上传到 /root 目录</p> <p><img src="https://img-blog.csdnimg.cn/20200625220008838.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODMwNTQ0MA==,size_16,color_FFFFFF,t_70#pic_center" alt="jdk"></p> <p><strong>2. 解压缩</strong></p> <p>执行解压命令</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 将jdk解压到 /usr/local/ 目录</span>
<span class="token function">tar</span> -xf jdk-8u212-linux-x64.tar.gz -C /usr/local/

<span class="token comment"># 切换到 /usr/local/ 目录, 显示列表, 查看解压缩的jdk目录</span>
<span class="token builtin class-name">cd</span> /usr/local
ll
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>3. 配置环境变量</strong></p> <p>修改 /etc/profile 配置文件, 配置环境变量</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">vim</span> /etc/profile

<span class="token comment"># 在文件末尾添加以下内容:</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/local/jdk1.8.0_212
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token environment constant">$PATH</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>修改完后, 让环境变量立即生效</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">source</span> /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>4. 验证</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>java -version

----------------------------------------------------------------
java version <span class="token string">&quot;1.8.0_212&quot;</span>
Java<span class="token punctuation">(</span>TM<span class="token punctuation">)</span> SE Runtime Environment <span class="token punctuation">(</span>build <span class="token number">1.8</span>.0_212-b10<span class="token punctuation">)</span>
Java HotSpot<span class="token punctuation">(</span>TM<span class="token punctuation">)</span> <span class="token number">64</span>-Bit Server VM <span class="token punctuation">(</span>build <span class="token number">25.212</span>-b10, mixed mode<span class="token punctuation">)</span>


javac -version

---------------
javac <span class="token number">1.8</span>.0_212
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="安装rocketmq"><a href="#安装rocketmq" class="header-anchor">#</a> 安装RocketMQ</h3> <h4 id="_1-下载-rocketmq-二进制文件"><a href="#_1-下载-rocketmq-二进制文件" class="header-anchor">#</a> 1. 下载 rocketmq 二进制文件</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">wget</span> --no-check-certificate https://dlcdn.apache.org/rocketmq/4.9.2/rocketmq-all-4.9.2-bin-release.zip
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2-解压缩-rocketmq"><a href="#_2-解压缩-rocketmq" class="header-anchor">#</a> 2. 解压缩 rocketmq</h4> <p>将 rocketmq 解压到 /usr/local/ 目录</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">unzip</span> rocketmq-all-4.9.2-bin-release.zip -d /usr/local/

<span class="token comment"># 修改一下文件夹名，改成 rocketmq 方便使用</span>
<span class="token function">mv</span> /usr/local/rocketmq-4.9.2 /usr/local/rocketmq
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_3-配置环境变量-rocketmq-home-和-path"><a href="#_3-配置环境变量-rocketmq-home-和-path" class="header-anchor">#</a> 3. 配置环境变量 ROCKETMQ_HOME 和 PATH</h4> <p>为了后续操作方便可以配置环境变量，之后在任意位置都可以执行rocketmq的操作命令。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">vim</span> /etc/profile

<span class="token comment"># 在文件末尾添加以下内容:</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">ROCKETMQ_HOME</span><span class="token operator">=</span>/usr/local/rocketmq
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$ROCKETMQ_HOME</span>/bin:<span class="token environment constant">$PATH</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>修改完后, 让环境变量立即生效</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">source</span> /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_4-减小-rocketmq-使用的内存"><a href="#_4-减小-rocketmq-使用的内存" class="header-anchor">#</a> 4. 减小 rocketmq 使用的内存</h4> <p>rocketmq需要启动两个服务: <code>name server</code> 和 <code>broker</code>, <code>name server</code> 默认配置JVM使用的内存是4g, <code>broker</code>默认配置JVM使用的内存是8g.</p> <p>开发环境中如果内存不足, 服务可能会无法启动, 可以通过降低两个服务的内存, 使服务可以正常启动, 也可以节省内存.</p> <p><strong>修改 <code>name server</code> 内存改为 256m</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> /usr/local/rocketmq/

<span class="token comment"># 编辑 bin/runserver.sh</span>
<span class="token function">vim</span> bin/runserver.sh

<span class="token comment"># 找到文件中下面这一行:</span>
<span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -server -Xms4g -Xmx4g -Xmn2g -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m&quot;</span>

<span class="token comment"># 将 -Xms4g -Xmx4g -Xmn2g 修改为 -Xms256m -Xmx256m -Xmn128m</span>
<span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -server -Xms256m -Xmx256m -Xmn128m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>修改 <code>broker</code> 内存改为 256m</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 编辑 bin/runbroker.sh</span>
<span class="token function">vim</span> bin/runbroker.sh

<span class="token comment"># 找到文件中下面这一行:</span>
<span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -server -Xms8g -Xmx8g&quot;</span>

<span class="token comment"># 将 -Xms8g -Xmx8g -Xmn4g 修改为 -Xms256m -Xmx256m</span>
<span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -server -Xms256m -Xmx256m&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_5-启动-rocketmq"><a href="#_5-启动-rocketmq" class="header-anchor">#</a> 5. 启动 rocketmq</h4> <p>先启动 <code>name server</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 进入 rocketmq 目录</span>
<span class="token builtin class-name">cd</span> /usr/local/rocketmq/

<span class="token comment"># 启动 name server</span>
<span class="token function">nohup</span> <span class="token function">sh</span> bin/mqnamesrv <span class="token operator">&amp;</span>

<span class="token comment"># 查看运行日志, 看到&quot;The Name Server boot success.&quot;表示启动成功</span>
<span class="token function">tail</span> -f ~/logs/rocketmqlogs/namesrv.log
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>再启动 <code>broker</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 启动 broker, 连接name server: localhost:9876</span>
<span class="token function">nohup</span> <span class="token function">sh</span> bin/mqbroker -n localhost:9876 <span class="token operator">&amp;</span>

<span class="token comment"># 查看运行日志, 看到&quot;The broker[......:10911] boot success.&quot;表示启动成功</span>
<span class="token function">tail</span> -f ~/logs/rocketmqlogs/broker.log 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_6-关闭防火墙"><a href="#_6-关闭防火墙" class="header-anchor">#</a> 6. 关闭防火墙</h4> <p>rocketmq的通信会用到多个端口, 为了方便测试我们关闭防火墙</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 关闭防火墙</span>
systemctl stop firewalld.service

<span class="token comment"># 禁止防火墙开机启动</span>
systemctl disable firewalld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="测试"><a href="#测试" class="header-anchor">#</a> 测试</h2> <p>运行测试, 启动生产者发送消息, 启动消费者接收消息</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 通过环境变量, 告诉客户端程序name server的地址</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">NAMESRV_ADDR</span><span class="token operator">=</span>localhost:9876

<span class="token comment"># 启动生产者来测试发送消息</span>
<span class="token function">sh</span> bin/tools.sh org.apache.rocketmq.example.quickstart.Producer

<span class="token comment"># 启动消费者来测试接收消息</span>
<span class="token function">sh</span> bin/tools.sh org.apache.rocketmq.example.quickstart.Consumer
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="rocketmq-的关闭命令"><a href="#rocketmq-的关闭命令" class="header-anchor">#</a> RocketMQ 的关闭命令</h2> <h3 id="关闭-broker"><a href="#关闭-broker" class="header-anchor">#</a> 关闭 broker</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>mqshutdown broker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="关闭-nameserver"><a href="#关闭-nameserver" class="header-anchor">#</a> 关闭 nameserver</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>mqshutdown namesrv
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="管理界面"><a href="#管理界面" class="header-anchor">#</a> 管理界面</h2> <p>在开源项目 <code>rocketmq-dashboard</code> 中提供了rocketmq 的管理界面: 地址为: https://github.com/apache/rocketmq-dashboard</p> <p>github 在国内访问缓慢, 也可以使用码云的镜像项目, 地址为: https://gitee.com/mirrors_apache/rocketmq-dashboard</p> <p><strong>1. 克隆项目</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> /usr/local/rocketmq/

<span class="token comment"># 克隆 rocketmq-dashboard 项目</span>
<span class="token function">git</span> clone https://gitee.com/mirrors_apache/rocketmq-dashboard
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>2. maven打包管理界面项目</strong></p> <p><strong>如果没有安装 maven，请先安装</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 下载 maven</span>
<span class="token function">wget</span> --no-check-certificate https://dlcdn.apache.org/maven/maven-3/3.8.4/binaries/apache-maven-3.8.4-bin.tar.gz

<span class="token comment"># 解压</span>
<span class="token function">tar</span> xf apache-maven-3.8.4-bin.tar.gz -C /usr/local/

<span class="token comment"># 设置环境变量</span>
<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/profile.d/mvn.sh</span>
export PATH=/usr/local/apache-maven-3.8.4/bin:<span class="token environment constant">$PATH</span>
EOF</span>

<span class="token comment"># 让环境变量生效</span>
<span class="token builtin class-name">source</span> /etc/profile.d/mvn.sh

<span class="token comment"># 检查 maven 是否可运行</span>
mvn -version

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>打包管理界面项目 <code>rocketmq-dashboard</code>.
打包过程中会下载各种依赖,比较缓慢,请耐心等待</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 进入管理界面项目的文件夹</span>
<span class="token builtin class-name">cd</span> rocketmq-dashboard

<span class="token comment"># 执行maven 打包命令, 执行时间较长, 请耐心等待</span>
mvn clean package -Dmaven.test.skip<span class="token operator">=</span>true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>3. 运行启动管理界面</strong></p> <p>打包的 jar 文件在 target 目录, 进入目录执行jar文件</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 进入 target 目录</span>
<span class="token builtin class-name">cd</span> target

<span class="token comment"># 运行管理界面</span>
<span class="token function">nohup</span> java -jar rocketmq-dashboard-1.0.1-SNAPSHOT.jar --server.port<span class="token operator">=</span><span class="token number">8080</span> --rocketmq.config.namesrvAddr<span class="token operator">=</span>localhost:9876 <span class="token operator">&amp;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>访问管理界面:</strong></p> <p><a href="http://192.168.64.141:8080/" target="_blank" rel="noopener noreferrer">http://192.168.64.141:8080<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="https://img-blog.csdnimg.cn/2020062600561495.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODMwNTQ0MA==,size_16,color_FFFFFF,t_70#pic_center" alt="rocketmq"></p> <h2 id="收发消息出现超时问题"><a href="#收发消息出现超时问题" class="header-anchor">#</a> 收发消息出现超时问题</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> /usr/local/rocketmq/

<span class="token function">vim</span> conf/broker.conf

末尾添加
<span class="token assign-left variable">brokerIP1</span><span class="token operator">=</span><span class="token number">192.168</span>.64.141

关闭 broker 服务
mqshutdown broker

重新使用 broker.conf 配置启动 broker
<span class="token function">nohup</span> <span class="token function">sh</span> bin/mqbroker -n localhost:9876 -c conf/broker.conf <span class="token operator">&amp;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="部署环境"><a href="#部署环境" class="header-anchor">#</a> 部署环境</h2> <p>作为测试环境，我们使用两台虚拟机来部署双主双从环境，具体结构如下：</p> <p><img src="https://img-blog.csdnimg.cn/20200709000005103.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODMwNTQ0MA==,size_16,color_FFFFFF,t_70" alt="集群"></p> <p>整个集群由<strong>两个 name server</strong> 实例和<strong>四个 broker</strong> 实例组成</p> <p><strong>name server:</strong></p> <ul><li>两台服务器分别启动两个name server</li></ul> <p><strong>broker A 主从:</strong></p> <ul><li>服务器1部署 broker A 主服务</li> <li>服务器2部署 broker A 从服务</li></ul> <p><strong>broker B 主从:</strong></p> <ul><li>服务器2部署 broker B 主服务</li> <li>服务器1部署 broker B 从服务</li></ul> <h2 id="安装rocketmq-2"><a href="#安装rocketmq-2" class="header-anchor">#</a> 安装Rocketmq</h2> <p>首先在两台虚拟机上安装 Rocketmq。或在一台虚拟机上装好后进行克隆。</p> <h2 id="建文件夹"><a href="#建文件夹" class="header-anchor">#</a> 建文件夹</h2> <p>在一台服务器上启动两个 broker 实例，需要为不同实例设置单独的数据存储目录。</p> <p>为了方便起见，我们在两台服务器上都创建这四个实例所需要的的目录。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">mkdir</span> /usr/local/rocketmq/store/
<span class="token function">mkdir</span> /usr/local/rocketmq/store/broker-a
<span class="token function">mkdir</span> /usr/local/rocketmq/store/broker-a/commitlog
<span class="token function">mkdir</span> /usr/local/rocketmq/store/broker-b
<span class="token function">mkdir</span> /usr/local/rocketmq/store/broker-b/commitlog
<span class="token function">mkdir</span> /usr/local/rocketmq/store/broker-as
<span class="token function">mkdir</span> /usr/local/rocketmq/store/broker-as/commitlog
<span class="token function">mkdir</span> /usr/local/rocketmq/store/broker-bs
<span class="token function">mkdir</span> /usr/local/rocketmq/store/broker-bs/commitlog
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h2> <p>在 <code>rocketmq/conf</code> 目录下提供了四种集群方案的配置样例</p> <ul><li>2m-2s-async：双主双从异步复制</li> <li><strong>2m-2s-sync：双主双从同步复制</strong></li> <li>2m-noslave：双主</li> <li>dledger： raft主从切换</li></ul> <p>这里我们选择<strong>双主双从同步复制</strong>方案。</p> <h3 id="_1-broker-a-a主服务器配置"><a href="#_1-broker-a-a主服务器配置" class="header-anchor">#</a> 1. broker-a，a主服务器配置</h3> <p><img src="https://img-blog.csdnimg.cn/20200709142712299.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODMwNTQ0MA==,size_16,color_FFFFFF,t_70#pic_center" alt="a"></p> <p>在<strong>服务器1</strong>修改样例配置文件：<code>rocketmq/conf/2m-2s-sync/broker-a.properties</code></p> <p>在样例配置文件中，添加三项配置：</p> <ul><li><code>listenPort</code>：我们在一台服务器上要运行两个broker实例，所以两个实例的端口要有所区分。这里broker-a主服务器的端口使用默认的10911。</li> <li><code>storePathRootDir</code>：数据存储目录</li> <li><code>storePathCommitLog</code>：提交日志存储目录</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token assign-left variable">brokerClusterName</span><span class="token operator">=</span>DefaultCluster
<span class="token assign-left variable">brokerName</span><span class="token operator">=</span>broker-a
<span class="token assign-left variable">brokerId</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">deleteWhen</span><span class="token operator">=</span>04
<span class="token assign-left variable">fileReservedTime</span><span class="token operator">=</span><span class="token number">48</span>
<span class="token assign-left variable">brokerRole</span><span class="token operator">=</span>SYNC_MASTER
<span class="token assign-left variable">flushDiskType</span><span class="token operator">=</span>ASYNC_FLUSH

<span class="token assign-left variable">listenPort</span><span class="token operator">=</span><span class="token number">10911</span>
<span class="token assign-left variable">storePathRootDir</span><span class="token operator">=</span>/usr/local/rocketmq/store/broker-a
<span class="token assign-left variable">storePathCommitLog</span><span class="token operator">=</span>/usr/local/rocketmq/store/broker-a/commitlog
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_2-broker-a-slave-a从服务器配置"><a href="#_2-broker-a-slave-a从服务器配置" class="header-anchor">#</a> 2. broker-a slave，a从服务器配置</h3> <p><img src="https://img-blog.csdnimg.cn/20200709142816923.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODMwNTQ0MA==,size_16,color_FFFFFF,t_70#pic_center" alt="as"></p> <p>在<strong>服务器2</strong>修改样例配置文件：<code>rocketmq/conf/2m-2s-sync/broker-a-s.properties</code></p> <p>在样例配置文件中，添加三项配置：</p> <ul><li><code>listenPort</code>：我们在一台服务器上要运行两个broker实例，所以两个实例的端口要有所区分。这里broker-a slave从服务器的端口使用11911。</li> <li><code>storePathRootDir</code>：数据存储目录</li> <li><code>storePathCommitLog</code>：提交日志存储目录</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token assign-left variable">brokerClusterName</span><span class="token operator">=</span>DefaultCluster
<span class="token assign-left variable">brokerName</span><span class="token operator">=</span>broker-a
<span class="token assign-left variable">brokerId</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">deleteWhen</span><span class="token operator">=</span>04
<span class="token assign-left variable">fileReservedTime</span><span class="token operator">=</span><span class="token number">48</span>
<span class="token assign-left variable">brokerRole</span><span class="token operator">=</span>SLAVE
<span class="token assign-left variable">flushDiskType</span><span class="token operator">=</span>ASYNC_FLUSH

<span class="token assign-left variable">listenPort</span><span class="token operator">=</span><span class="token number">11911</span>
<span class="token assign-left variable">storePathRootDir</span><span class="token operator">=</span>/usr/local/rocketmq/store/broker-as
<span class="token assign-left variable">storePathCommitLog</span><span class="token operator">=</span>/usr/local/rocketmq/store/broker-as/commitlog
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_3-broker-b-b主服务器配置"><a href="#_3-broker-b-b主服务器配置" class="header-anchor">#</a> 3. broker-b，b主服务器配置</h3> <p><img src="https://img-blog.csdnimg.cn/20200709142900653.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODMwNTQ0MA==,size_16,color_FFFFFF,t_70#pic_center" alt="b"></p> <p>在<strong>服务器2</strong>修改样例配置文件：<code>rocketmq/conf/2m-2s-sync/broker-b.properties</code></p> <p>在样例配置文件中，添加三项配置：</p> <ul><li><code>listenPort</code>：我们在一台服务器上要运行两个broker实例，所以两个实例的端口要有所区分。这里broker-b主服务器的端口使用默认的10911。</li> <li><code>storePathRootDir</code>：数据存储目录</li> <li><code>storePathCommitLog</code>：提交日志存储目录</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token assign-left variable">brokerClusterName</span><span class="token operator">=</span>DefaultCluster
<span class="token assign-left variable">brokerName</span><span class="token operator">=</span>broker-b
<span class="token assign-left variable">brokerId</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">deleteWhen</span><span class="token operator">=</span>04
<span class="token assign-left variable">fileReservedTime</span><span class="token operator">=</span><span class="token number">48</span>
<span class="token assign-left variable">brokerRole</span><span class="token operator">=</span>SYNC_MASTER
<span class="token assign-left variable">flushDiskType</span><span class="token operator">=</span>ASYNC_FLUSH

<span class="token assign-left variable">listenPort</span><span class="token operator">=</span><span class="token number">10911</span>
<span class="token assign-left variable">storePathRootDir</span><span class="token operator">=</span>/usr/local/rocketmq/store/broker-b
<span class="token assign-left variable">storePathCommitLog</span><span class="token operator">=</span>/usr/local/rocketmq/store/broker-b/commitlog
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_4-broker-b-slave-b从服务器配置"><a href="#_4-broker-b-slave-b从服务器配置" class="header-anchor">#</a> 4. broker-b slave，b从服务器配置</h3> <p><img src="https://img-blog.csdnimg.cn/20200709142929917.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODMwNTQ0MA==,size_16,color_FFFFFF,t_70#pic_center" alt="bs"></p> <p>在<strong>服务器1</strong>修改样例配置文件：<code>rocketmq/conf/2m-2s-sync/broker-b-s.properties</code></p> <p>在样例配置文件中，添加三项配置：</p> <ul><li><code>listenPort</code>：我们在一台服务器上要运行两个broker实例，所以两个实例的端口要有所区分。这里broker-b slave从服务器的端口使用11911。</li> <li><code>storePathRootDir</code>：数据存储目录</li> <li><code>storePathCommitLog</code>：提交日志存储目录</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token assign-left variable">brokerClusterName</span><span class="token operator">=</span>DefaultCluster
<span class="token assign-left variable">brokerName</span><span class="token operator">=</span>broker-b
<span class="token assign-left variable">brokerId</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">deleteWhen</span><span class="token operator">=</span>04
<span class="token assign-left variable">fileReservedTime</span><span class="token operator">=</span><span class="token number">48</span>
<span class="token assign-left variable">brokerRole</span><span class="token operator">=</span>SLAVE
<span class="token assign-left variable">flushDiskType</span><span class="token operator">=</span>ASYNC_FLUSH

<span class="token assign-left variable">listenPort</span><span class="token operator">=</span><span class="token number">11911</span>
<span class="token assign-left variable">storePathRootDir</span><span class="token operator">=</span>/usr/local/rocketmq/store/broker-bs
<span class="token assign-left variable">storePathCommitLog</span><span class="token operator">=</span>/usr/local/rocketmq/store/broker-bs/commitlog
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="配置要点说明"><a href="#配置要点说明" class="header-anchor">#</a> 配置要点说明</h3> <ol><li>四台服务器的集群名 <code>brokerClusterName</code> 相同。集群名称相同的服务器共同组成服务集群 。</li> <li>从服务器通过名字与主服务器关联在一起，<code>brokerName</code> 与主服务器相同。</li> <li><code>brokerId</code>为0是主服务器。从服务器的值是非零值，例如如果有四个从服务器，他们的 <code>brokerId</code> 应该是 1,2,3,4。</li> <li><code>brokerRole</code>的值为 <code>SYNC_MASTER</code> 是同步复制的主服务器。如果是 <code>ASYNC_MASTER</code> 则为异步复制的主服务器。</li></ol> <ul><li><strong>同步复制</strong>：消息复制到从服务器后才向生产者发回反馈信息。</li> <li><strong>异步复制</strong>：消息发到主服务器就向生产者发回反馈信息，之后再向从服务器复制。</li></ul> <h2 id="启动"><a href="#启动" class="header-anchor">#</a> 启动</h2> <h3 id="_1-启动两个-name-server"><a href="#_1-启动两个-name-server" class="header-anchor">#</a> 1. 启动两个 name server</h3> <p><img src="https://img-blog.csdnimg.cn/20200709143211216.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODMwNTQ0MA==,size_16,color_FFFFFF,t_70#pic_center" alt="namesrv"></p> <p>在两台服务器上启动两个 name server，它们不用做任何集群的配置，都是作为独立服务运行，它们之间也不会进行数据复制。</p> <p>所有broker服务启动后，要同时连接这两个 name server，向两个 name server 进行注册。</p> <p><strong>在两台服务器上都启动 name server</strong>：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">nohup</span> <span class="token function">sh</span> mqnamesrv <span class="token operator">&amp;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-启动-broker-a-的主从两台服务器"><a href="#_2-启动-broker-a-的主从两台服务器" class="header-anchor">#</a> 2. 启动 broker a 的主从两台服务器</h3> <p><img src="https://img-blog.csdnimg.cn/20200709144521933.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODMwNTQ0MA==,size_16,color_FFFFFF,t_70#pic_center" alt="a"></p> <p><strong>在服务器1上启动 broker a 主服务器</strong>：</p> <p>参数说明：</p> <ul><li><strong>-n参数</strong>：指定name server地址列表，多个地址用分号分隔</li> <li><strong>-c参数</strong>：指定配置文件，使用指定的配置文件启动 broker</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">nohup</span> <span class="token function">sh</span> mqbroker <span class="token punctuation">\</span>
-n <span class="token string">'192.168.64.151:9876;192.168.64.152:9876'</span> <span class="token punctuation">\</span>
-c <span class="token variable">$ROCKETMQ_HOME</span>/conf/2m-2s-sync/broker-a.properties <span class="token punctuation">\</span>
<span class="token operator">&amp;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>在服务器2上启动 broker a 从服务器</strong>：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">nohup</span> <span class="token function">sh</span> mqbroker <span class="token punctuation">\</span>
-n <span class="token string">'192.168.64.151:9876;192.168.64.152:9876'</span> <span class="token punctuation">\</span>
-c <span class="token variable">$ROCKETMQ_HOME</span>/conf/2m-2s-sync/broker-a-s.properties <span class="token punctuation">\</span>
<span class="token operator">&amp;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_3-启动-broker-b-的主从两台服务器"><a href="#_3-启动-broker-b-的主从两台服务器" class="header-anchor">#</a> 3. 启动 broker b 的主从两台服务器</h3> <p><img src="https://img-blog.csdnimg.cn/20200709150333945.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODMwNTQ0MA==,size_16,color_FFFFFF,t_70#pic_center" alt="b"></p> <p><strong>在服务器2上启动 broker b 主服务器</strong>：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">nohup</span> <span class="token function">sh</span> mqbroker <span class="token punctuation">\</span>
-n <span class="token string">'192.168.64.151:9876;192.168.64.152:9876'</span> <span class="token punctuation">\</span>
-c <span class="token variable">$ROCKETMQ_HOME</span>/conf/2m-2s-sync/broker-b.properties <span class="token punctuation">\</span>
<span class="token operator">&amp;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>在服务器1上启动 broker b 从服务器</strong>：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">nohup</span> <span class="token function">sh</span> mqbroker <span class="token punctuation">\</span>
-n <span class="token string">'192.168.64.151:9876;192.168.64.152:9876'</span> <span class="token punctuation">\</span>
-c <span class="token variable">$ROCKETMQ_HOME</span>/conf/2m-2s-sync/broker-b-s.properties <span class="token punctuation">\</span>
<span class="token operator">&amp;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="检查启动的服务"><a href="#检查启动的服务" class="header-anchor">#</a> 检查启动的服务</h2> <p>在两台服务器上分别查看java进程，确认两台服务器上是否各启动了三个java进程，分别运行name server和两个broker。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 查看 java 进程</span>
jps 

---------------------
<span class="token number">12081</span> NamesrvStartup
<span class="token number">15745</span> BrokerStartup
<span class="token number">15595</span> BrokerStartup
<span class="token number">16655</span> Jps
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="启动管理界面"><a href="#启动管理界面" class="header-anchor">#</a> 启动管理界面</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 进入 rocketmq-console 项目打包文件目录</span>
<span class="token builtin class-name">cd</span> /usr/local/rocketmq/RocketMQ-Externals/rocketmq-console/target/

<span class="token comment"># 启动管理界面</span>
<span class="token function">nohup</span> java -jar rocketmq-console-ng-1.0.1.jar <span class="token punctuation">\</span>
--server.port<span class="token operator">=</span><span class="token number">8080</span> <span class="token punctuation">\</span>
--rocketmq.config.namesrvAddr<span class="token operator">=</span><span class="token string">'192.168.64.151:9876;192.168.64.152:9876'</span> <span class="token punctuation">\</span>
<span class="token operator">&amp;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>查看集群状态</strong>：</p> <p><img src="https://img-blog.csdnimg.cn/20200709172705572.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODMwNTQ0MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p> <h2 id="topic-基本原理"><a href="#topic-基本原理" class="header-anchor">#</a> Topic 基本原理</h2> <h3 id="在rocketmq集群中新建-topic1"><a href="#在rocketmq集群中新建-topic1" class="header-anchor">#</a> 在Rocketmq集群中新建 Topic1</h3> <p>在管理界面中新建<strong>主题</strong><code>Topic1</code>，为了方便观察测试效果，这里把<strong>写队列</strong>和<strong>读队列</strong>的数量都设置成3。</p> <p><img src="https://img-blog.csdnimg.cn/20200711002829639.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODMwNTQ0MA==,size_16,color_FFFFFF,t_70#pic_center" alt="topic1"></p> <p>这样，在 broker-a 和 broker-b 上都创建了 Topic1 主题，并各创建了3写3读队列，共6写6读，如下图所示：</p> <p><img src="https://img-blog.csdnimg.cn/20200711002512809.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODMwNTQ0MA==,size_16,color_FFFFFF,t_70#pic_center" alt="topic1"></p> <p><em>你也可以修改Topic1分别配置 broker-a 和 borker-b 上的队列数量。</em></p> <h3 id="perm-参数的含义"><a href="#perm-参数的含义" class="header-anchor">#</a> perm 参数的含义</h3> <p><code>perm</code> 参数是设置队列的读写权限，下面表格列出了可配置的值及其含义：</p> <table><thead><tr><th>取值</th> <th>含义</th></tr></thead> <tbody><tr><td>6</td> <td>同时开启读写</td></tr> <tr><td>4</td> <td>禁写</td></tr> <tr><td>2</td> <td>禁读</td></tr></tbody></table> <h3 id="topic-收发消息原理"><a href="#topic-收发消息原理" class="header-anchor">#</a> Topic 收发消息原理</h3> <p><img src="https://img-blog.csdnimg.cn/20200711143824268.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODMwNTQ0MA==,size_16,color_FFFFFF,t_70#pic_center" alt="topic"></p> <p>生产者将消息发送到 Topic1 的其中一个<strong>写队列</strong>，消费者从对应的一个<strong>读队列</strong>接收消息。</p> <h3 id="生产者的负载均衡"><a href="#生产者的负载均衡" class="header-anchor">#</a> 生产者的负载均衡</h3> <p><img src="https://img-blog.csdnimg.cn/20200711153533541.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODMwNTQ0MA==,size_16,color_FFFFFF,t_70#pic_center" alt="producer"></p> <p>生产者以<strong>轮询</strong>的方式向所有写队列发送消息，这些队列可能会分布在多个broker实例上。</p> <h3 id="消费者的负载均衡"><a href="#消费者的负载均衡" class="header-anchor">#</a> 消费者的负载均衡</h3> <p>一个 group 中的多个消费者，可以以负载均衡的方式来接收消息。</p> <p><code>读取队列</code>被均匀分配给这些消费者，它们从指定的队列来接收消息。队列的分配可以采用不同的策略，这里简略介绍以下三种策略：</p> <h4 id="allocatemessagequeueaveragely-平均分配"><a href="#allocatemessagequeueaveragely-平均分配" class="header-anchor">#</a> AllocateMessageQueueAveragely 平均分配</h4> <p>这是默认策略，它是这样分配队列的：</p> <p><img src="https://img-blog.csdnimg.cn/20200713225310740.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODMwNTQ0MA==,size_16,color_FFFFFF,t_70#pic_center" alt="topic"></p> <h4 id="allocatemessagequeueaveragelybycircle-环形分配"><a href="#allocatemessagequeueaveragelybycircle-环形分配" class="header-anchor">#</a> AllocateMessageQueueAveragelyByCircle 环形分配</h4> <p>如果使用环形分配，在消费者的代码中需要设置分配策略，代码如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>consumer<span class="token punctuation">.</span><span class="token function">setAllocateMessageQueueStrategy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AllocateMessageQueueAveragelyByCircle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这种分配策略的逻辑很简单，所有0号队列分给0号消费者，所有1号队列分给1号消费者，以此类推。</p> <p><img src="https://img-blog.csdnimg.cn/20200713225823999.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODMwNTQ0MA==,size_16,color_FFFFFF,t_70#pic_center" alt="topic"></p> <h4 id="allocatemessagequeueconsistenthash-一致性哈希"><a href="#allocatemessagequeueconsistenthash-一致性哈希" class="header-anchor">#</a> AllocateMessageQueueConsistentHash 一致性哈希</h4> <p>如果使用一致性哈希算法进行分配，在消费者的代码中需要设置分配策略，代码如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>consumer<span class="token punctuation">.</span><span class="token function">setAllocateMessageQueueStrategy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AllocateMessageQueueConsistentHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这种算法依靠一致性哈希算法，看当前消费者可以落到哪个虚拟节点，该虚拟节点对应哪个队列。</p> <h3 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h3> <p>思考一下，如果写队列比读队列多会怎样？反之会怎样？</p> <h2 id="nameserver-基本原理"><a href="#nameserver-基本原理" class="header-anchor">#</a> NameServer 基本原理</h2> <p><img src="https://img-blog.csdnimg.cn/20200713233623258.png#pic_center" alt="rocketmq"></p> <p>NameServer 是 rocketmq 自己开发的一个轻型注册中心，他的作用相当于是 zk、eureka等。</p> <p>rocketmq 为什么不使用 zk 呢？实际上 rocketmq 的早期版本使用的就是 zookeeper。</p> <p>而 rocketmq 的架构设计决定了只需要一个轻量级的元数据服务器就足够了。杀鸡焉用牛刀？小区里，搞个货架就行了，建个仓库，又占地方，维护成本又高。</p> <p>甚至，NameServer 都不需要有一个集群的管理者。以至于，NameServer 看起来都不像一个集群。事实上，NameServer 本质上来看，也不是一个集群。因为它的各个节点是独立的，不相关的。每个 NameServer 都是独立和 Producer、Consumer打交道。</p> <h3 id="基本认识"><a href="#基本认识" class="header-anchor">#</a> 基本认识</h3> <ol><li>NameServer主要用于存储Topic，Broker关系信息，功能简单，稳定性高。</li> <li>各个NameServer节点之间不相关，不需要通信，单台宕机不影响其它节点。</li> <li>NameServer集群整体宕机不影响已建立关系的Concumer，Producer，Broker。</li></ol> <h3 id="broker、producer、consumer-与nameserver的通信"><a href="#broker、producer、consumer-与nameserver的通信" class="header-anchor">#</a> Broker、Producer、Consumer 与NameServer的通信</h3> <ol><li>每个Borker和所有NameServer保持长连接，心跳间隔为30秒。每次心跳时还会携带当前的Topic信息。当某个Broker两分钟之内没有心跳，则认为该Broker下线，并调整内存中与该Broker相关的Topic信息。</li> <li>Consumer 从 NameServer 获得 Topic 的路由信息，与对应的 Broker 建立长连接。间隔30秒发送心跳至Broker。Broker检查若发现某 Consumer 两分钟内无心跳则认为该Consumer下线，并通知该Consumer所有的消费者集群中的其他实例，触发该消费者集群重新负载均衡。</li> <li>Producer 与消费者一样，也是从 NameServer 获得 Topic 的路由信息，与对应的 Broker 建立长连接，30秒发送一次心跳。Broker 也会认为两分钟内没有心跳的 Producer 下线。</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/matheusblog/md/springcloud/mq/03消息队列对比.html" class="prev">
        消息队列对比
      </a></span> <span class="next"><a href="/matheusblog/md/springcloud/mq/05使用RocketMQ原生API收发消息代码样例.html">
        使用RocketMQ原生API收发消息代码样例
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/matheusblog/assets/js/app.410bdacf.js" defer></script><script src="/matheusblog/assets/js/3.21aaf515.js" defer></script><script src="/matheusblog/assets/js/334.399a57b3.js" defer></script>
  </body>
</html>
