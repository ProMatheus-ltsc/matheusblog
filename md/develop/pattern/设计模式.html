<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>设计模式 | Java 全栈知识体系</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="包含: Java 基础, JVM, Spring, Spring Boot, Spring Cloud, MySQL, ElasticSearch, MongoDB, Docker, k8s, Linux, DevOps, 分布式,  开发工具, Git, IDE...">
    
    <link rel="preload" href="/matheusblog/assets/css/0.styles.633991d7.css" as="style"><link rel="preload" href="/matheusblog/assets/js/app.c8cdbcd7.js" as="script"><link rel="preload" href="/matheusblog/assets/js/2.de611079.js" as="script"><link rel="preload" href="/matheusblog/assets/js/248.c5ff9967.js" as="script"><link rel="prefetch" href="/matheusblog/assets/js/10.05752954.js"><link rel="prefetch" href="/matheusblog/assets/js/100.0f95b688.js"><link rel="prefetch" href="/matheusblog/assets/js/101.25f9fb42.js"><link rel="prefetch" href="/matheusblog/assets/js/102.abebd791.js"><link rel="prefetch" href="/matheusblog/assets/js/103.0b181e08.js"><link rel="prefetch" href="/matheusblog/assets/js/104.f445372e.js"><link rel="prefetch" href="/matheusblog/assets/js/105.8ef7265c.js"><link rel="prefetch" href="/matheusblog/assets/js/106.270eb743.js"><link rel="prefetch" href="/matheusblog/assets/js/107.452006c1.js"><link rel="prefetch" href="/matheusblog/assets/js/108.09e168e9.js"><link rel="prefetch" href="/matheusblog/assets/js/109.9ecd6a80.js"><link rel="prefetch" href="/matheusblog/assets/js/11.07481a77.js"><link rel="prefetch" href="/matheusblog/assets/js/110.f21d7aa3.js"><link rel="prefetch" href="/matheusblog/assets/js/111.3d47d3d5.js"><link rel="prefetch" href="/matheusblog/assets/js/112.f74fabdd.js"><link rel="prefetch" href="/matheusblog/assets/js/113.e4beb8fc.js"><link rel="prefetch" href="/matheusblog/assets/js/114.90721681.js"><link rel="prefetch" href="/matheusblog/assets/js/115.e033f5d2.js"><link rel="prefetch" href="/matheusblog/assets/js/116.d16e91da.js"><link rel="prefetch" href="/matheusblog/assets/js/117.d5a0e167.js"><link rel="prefetch" href="/matheusblog/assets/js/118.96788368.js"><link rel="prefetch" href="/matheusblog/assets/js/119.3f148836.js"><link rel="prefetch" href="/matheusblog/assets/js/12.b50792da.js"><link rel="prefetch" href="/matheusblog/assets/js/120.3e880eb5.js"><link rel="prefetch" href="/matheusblog/assets/js/121.e99c948e.js"><link rel="prefetch" href="/matheusblog/assets/js/122.5281f418.js"><link rel="prefetch" href="/matheusblog/assets/js/123.7b3ffcda.js"><link rel="prefetch" href="/matheusblog/assets/js/124.2b98fb56.js"><link rel="prefetch" href="/matheusblog/assets/js/125.ae9396dc.js"><link rel="prefetch" href="/matheusblog/assets/js/126.2085e01f.js"><link rel="prefetch" href="/matheusblog/assets/js/127.e75ccf5c.js"><link rel="prefetch" href="/matheusblog/assets/js/128.c0b387a1.js"><link rel="prefetch" href="/matheusblog/assets/js/129.1b0792bc.js"><link rel="prefetch" href="/matheusblog/assets/js/13.f55adddb.js"><link rel="prefetch" href="/matheusblog/assets/js/130.e55bcc9f.js"><link rel="prefetch" href="/matheusblog/assets/js/131.65fa582a.js"><link rel="prefetch" href="/matheusblog/assets/js/132.cad6bbb8.js"><link rel="prefetch" href="/matheusblog/assets/js/133.dfbd0aa7.js"><link rel="prefetch" href="/matheusblog/assets/js/134.b7026189.js"><link rel="prefetch" href="/matheusblog/assets/js/135.383f2c15.js"><link rel="prefetch" href="/matheusblog/assets/js/136.58c8328c.js"><link rel="prefetch" href="/matheusblog/assets/js/137.49d15dc4.js"><link rel="prefetch" href="/matheusblog/assets/js/138.399d5a7f.js"><link rel="prefetch" href="/matheusblog/assets/js/139.b7d66293.js"><link rel="prefetch" href="/matheusblog/assets/js/14.9131c98c.js"><link rel="prefetch" href="/matheusblog/assets/js/140.0b75f13b.js"><link rel="prefetch" href="/matheusblog/assets/js/141.4e76f4ba.js"><link rel="prefetch" href="/matheusblog/assets/js/142.b87a84fe.js"><link rel="prefetch" href="/matheusblog/assets/js/143.38671b8f.js"><link rel="prefetch" href="/matheusblog/assets/js/144.2c7c85e5.js"><link rel="prefetch" href="/matheusblog/assets/js/145.ed8e786c.js"><link rel="prefetch" href="/matheusblog/assets/js/146.a39fb7ca.js"><link rel="prefetch" href="/matheusblog/assets/js/147.2b3ada74.js"><link rel="prefetch" href="/matheusblog/assets/js/148.811c94a5.js"><link rel="prefetch" href="/matheusblog/assets/js/149.30b44f84.js"><link rel="prefetch" href="/matheusblog/assets/js/15.6eb7db6d.js"><link rel="prefetch" href="/matheusblog/assets/js/150.67a0201a.js"><link rel="prefetch" href="/matheusblog/assets/js/151.83f19a13.js"><link rel="prefetch" href="/matheusblog/assets/js/152.77b3ad71.js"><link rel="prefetch" href="/matheusblog/assets/js/153.b551955b.js"><link rel="prefetch" href="/matheusblog/assets/js/154.92a731ef.js"><link rel="prefetch" href="/matheusblog/assets/js/155.929a5106.js"><link rel="prefetch" href="/matheusblog/assets/js/156.e21d5c25.js"><link rel="prefetch" href="/matheusblog/assets/js/157.447ad58f.js"><link rel="prefetch" href="/matheusblog/assets/js/158.1e798a94.js"><link rel="prefetch" href="/matheusblog/assets/js/159.c4b4d020.js"><link rel="prefetch" href="/matheusblog/assets/js/16.efb4d417.js"><link rel="prefetch" href="/matheusblog/assets/js/160.e23157b4.js"><link rel="prefetch" href="/matheusblog/assets/js/161.836e906c.js"><link rel="prefetch" href="/matheusblog/assets/js/162.2491ca2c.js"><link rel="prefetch" href="/matheusblog/assets/js/163.22bc49a1.js"><link rel="prefetch" href="/matheusblog/assets/js/164.32f5a88c.js"><link rel="prefetch" href="/matheusblog/assets/js/165.7699866d.js"><link rel="prefetch" href="/matheusblog/assets/js/166.19408652.js"><link rel="prefetch" href="/matheusblog/assets/js/167.206a44e5.js"><link rel="prefetch" href="/matheusblog/assets/js/168.444ebdd0.js"><link rel="prefetch" href="/matheusblog/assets/js/169.0e21a86a.js"><link rel="prefetch" href="/matheusblog/assets/js/17.5ac69788.js"><link rel="prefetch" href="/matheusblog/assets/js/170.e8076921.js"><link rel="prefetch" href="/matheusblog/assets/js/171.84d99c45.js"><link rel="prefetch" href="/matheusblog/assets/js/172.c2b4dbde.js"><link rel="prefetch" href="/matheusblog/assets/js/173.9b559996.js"><link rel="prefetch" href="/matheusblog/assets/js/174.22f00407.js"><link rel="prefetch" href="/matheusblog/assets/js/175.0ad3a207.js"><link rel="prefetch" href="/matheusblog/assets/js/176.fd55158c.js"><link rel="prefetch" href="/matheusblog/assets/js/177.d494f1ba.js"><link rel="prefetch" href="/matheusblog/assets/js/178.d2d186f7.js"><link rel="prefetch" href="/matheusblog/assets/js/179.5b367d42.js"><link rel="prefetch" href="/matheusblog/assets/js/18.5dfcba6c.js"><link rel="prefetch" href="/matheusblog/assets/js/180.0d21d1b7.js"><link rel="prefetch" href="/matheusblog/assets/js/181.f031bf64.js"><link rel="prefetch" href="/matheusblog/assets/js/182.38aec3cc.js"><link rel="prefetch" href="/matheusblog/assets/js/183.544eeb04.js"><link rel="prefetch" href="/matheusblog/assets/js/184.d703ef58.js"><link rel="prefetch" href="/matheusblog/assets/js/185.22ad74fc.js"><link rel="prefetch" href="/matheusblog/assets/js/186.4d233e77.js"><link rel="prefetch" href="/matheusblog/assets/js/187.f1612e05.js"><link rel="prefetch" href="/matheusblog/assets/js/188.07d4d49b.js"><link rel="prefetch" href="/matheusblog/assets/js/189.34046a22.js"><link rel="prefetch" href="/matheusblog/assets/js/19.c2ddad5d.js"><link rel="prefetch" href="/matheusblog/assets/js/190.28514da8.js"><link rel="prefetch" href="/matheusblog/assets/js/191.310c0fb2.js"><link rel="prefetch" href="/matheusblog/assets/js/192.8df222b0.js"><link rel="prefetch" href="/matheusblog/assets/js/193.a12509c0.js"><link rel="prefetch" href="/matheusblog/assets/js/194.4656fa77.js"><link rel="prefetch" href="/matheusblog/assets/js/195.fa08b801.js"><link rel="prefetch" href="/matheusblog/assets/js/196.8b9f0daf.js"><link rel="prefetch" href="/matheusblog/assets/js/197.14ac5744.js"><link rel="prefetch" href="/matheusblog/assets/js/198.55548ef1.js"><link rel="prefetch" href="/matheusblog/assets/js/199.4fd85455.js"><link rel="prefetch" href="/matheusblog/assets/js/20.270b1421.js"><link rel="prefetch" href="/matheusblog/assets/js/200.e5385681.js"><link rel="prefetch" href="/matheusblog/assets/js/201.afa374ae.js"><link rel="prefetch" href="/matheusblog/assets/js/202.b3bac3de.js"><link rel="prefetch" href="/matheusblog/assets/js/203.af87168e.js"><link rel="prefetch" href="/matheusblog/assets/js/204.037c7497.js"><link rel="prefetch" href="/matheusblog/assets/js/205.c94bb33e.js"><link rel="prefetch" href="/matheusblog/assets/js/206.3dd69183.js"><link rel="prefetch" href="/matheusblog/assets/js/207.769e2022.js"><link rel="prefetch" href="/matheusblog/assets/js/208.48663681.js"><link rel="prefetch" href="/matheusblog/assets/js/209.07afc0eb.js"><link rel="prefetch" href="/matheusblog/assets/js/21.08d17898.js"><link rel="prefetch" href="/matheusblog/assets/js/210.148d6016.js"><link rel="prefetch" href="/matheusblog/assets/js/211.37c148cb.js"><link rel="prefetch" href="/matheusblog/assets/js/212.77b23d4b.js"><link rel="prefetch" href="/matheusblog/assets/js/213.a155bf2f.js"><link rel="prefetch" href="/matheusblog/assets/js/214.2821ea7d.js"><link rel="prefetch" href="/matheusblog/assets/js/215.8b15c0ae.js"><link rel="prefetch" href="/matheusblog/assets/js/216.cb510034.js"><link rel="prefetch" href="/matheusblog/assets/js/217.35db27a4.js"><link rel="prefetch" href="/matheusblog/assets/js/218.b7791038.js"><link rel="prefetch" href="/matheusblog/assets/js/219.97dd815f.js"><link rel="prefetch" href="/matheusblog/assets/js/22.e3256929.js"><link rel="prefetch" href="/matheusblog/assets/js/220.892e3aea.js"><link rel="prefetch" href="/matheusblog/assets/js/221.fe02ce4f.js"><link rel="prefetch" href="/matheusblog/assets/js/222.a302c42a.js"><link rel="prefetch" href="/matheusblog/assets/js/223.4585a64b.js"><link rel="prefetch" href="/matheusblog/assets/js/224.3e41f6c2.js"><link rel="prefetch" href="/matheusblog/assets/js/225.e8f5a34f.js"><link rel="prefetch" href="/matheusblog/assets/js/226.45468e0e.js"><link rel="prefetch" href="/matheusblog/assets/js/227.d5b2b61b.js"><link rel="prefetch" href="/matheusblog/assets/js/228.43be673e.js"><link rel="prefetch" href="/matheusblog/assets/js/229.342839d2.js"><link rel="prefetch" href="/matheusblog/assets/js/23.c1eaa223.js"><link rel="prefetch" href="/matheusblog/assets/js/230.fd4f98c6.js"><link rel="prefetch" href="/matheusblog/assets/js/231.78d43da1.js"><link rel="prefetch" href="/matheusblog/assets/js/232.b8f88ce9.js"><link rel="prefetch" href="/matheusblog/assets/js/233.7b7ad4f5.js"><link rel="prefetch" href="/matheusblog/assets/js/234.c181bfa2.js"><link rel="prefetch" href="/matheusblog/assets/js/235.bf864b8c.js"><link rel="prefetch" href="/matheusblog/assets/js/236.08664f8f.js"><link rel="prefetch" href="/matheusblog/assets/js/237.b43b3610.js"><link rel="prefetch" href="/matheusblog/assets/js/238.c7e5998f.js"><link rel="prefetch" href="/matheusblog/assets/js/239.94378099.js"><link rel="prefetch" href="/matheusblog/assets/js/24.dfb54a3c.js"><link rel="prefetch" href="/matheusblog/assets/js/240.d3f496e1.js"><link rel="prefetch" href="/matheusblog/assets/js/241.fbc0fe6f.js"><link rel="prefetch" href="/matheusblog/assets/js/242.104a148e.js"><link rel="prefetch" href="/matheusblog/assets/js/243.6302ef15.js"><link rel="prefetch" href="/matheusblog/assets/js/244.515798fe.js"><link rel="prefetch" href="/matheusblog/assets/js/245.c2183458.js"><link rel="prefetch" href="/matheusblog/assets/js/246.cf2ddfd5.js"><link rel="prefetch" href="/matheusblog/assets/js/247.500dc0e2.js"><link rel="prefetch" href="/matheusblog/assets/js/249.d5a77494.js"><link rel="prefetch" href="/matheusblog/assets/js/25.dc89ad31.js"><link rel="prefetch" href="/matheusblog/assets/js/250.0f87a41c.js"><link rel="prefetch" href="/matheusblog/assets/js/251.b862a851.js"><link rel="prefetch" href="/matheusblog/assets/js/252.6a0af2de.js"><link rel="prefetch" href="/matheusblog/assets/js/253.fdced5e9.js"><link rel="prefetch" href="/matheusblog/assets/js/254.d2fa4cb8.js"><link rel="prefetch" href="/matheusblog/assets/js/255.c84e8abd.js"><link rel="prefetch" href="/matheusblog/assets/js/256.ff60e778.js"><link rel="prefetch" href="/matheusblog/assets/js/257.47ee7d72.js"><link rel="prefetch" href="/matheusblog/assets/js/258.c9890de0.js"><link rel="prefetch" href="/matheusblog/assets/js/259.3a303d4b.js"><link rel="prefetch" href="/matheusblog/assets/js/26.80fb9a14.js"><link rel="prefetch" href="/matheusblog/assets/js/260.328d38f6.js"><link rel="prefetch" href="/matheusblog/assets/js/261.ecfcddde.js"><link rel="prefetch" href="/matheusblog/assets/js/262.26bc9c5f.js"><link rel="prefetch" href="/matheusblog/assets/js/263.384a4bd5.js"><link rel="prefetch" href="/matheusblog/assets/js/264.1743d0e5.js"><link rel="prefetch" href="/matheusblog/assets/js/265.4bbd508f.js"><link rel="prefetch" href="/matheusblog/assets/js/266.14a430ab.js"><link rel="prefetch" href="/matheusblog/assets/js/267.c0803d87.js"><link rel="prefetch" href="/matheusblog/assets/js/268.b35cbd0e.js"><link rel="prefetch" href="/matheusblog/assets/js/269.2768b8c7.js"><link rel="prefetch" href="/matheusblog/assets/js/27.ad7e2024.js"><link rel="prefetch" href="/matheusblog/assets/js/270.6abbe65f.js"><link rel="prefetch" href="/matheusblog/assets/js/271.036a29df.js"><link rel="prefetch" href="/matheusblog/assets/js/272.269b20e1.js"><link rel="prefetch" href="/matheusblog/assets/js/273.a5dd6aaa.js"><link rel="prefetch" href="/matheusblog/assets/js/274.cb36ce22.js"><link rel="prefetch" href="/matheusblog/assets/js/275.c9f43bd6.js"><link rel="prefetch" href="/matheusblog/assets/js/276.f45b6deb.js"><link rel="prefetch" href="/matheusblog/assets/js/277.cb2d572f.js"><link rel="prefetch" href="/matheusblog/assets/js/278.07c876f2.js"><link rel="prefetch" href="/matheusblog/assets/js/279.ea9540cd.js"><link rel="prefetch" href="/matheusblog/assets/js/28.b11b952d.js"><link rel="prefetch" href="/matheusblog/assets/js/280.667e8e0b.js"><link rel="prefetch" href="/matheusblog/assets/js/281.2e20f12e.js"><link rel="prefetch" href="/matheusblog/assets/js/282.38765511.js"><link rel="prefetch" href="/matheusblog/assets/js/283.166c95a6.js"><link rel="prefetch" href="/matheusblog/assets/js/284.f3d7759c.js"><link rel="prefetch" href="/matheusblog/assets/js/285.08468c19.js"><link rel="prefetch" href="/matheusblog/assets/js/286.d688cf78.js"><link rel="prefetch" href="/matheusblog/assets/js/287.f09ca3d4.js"><link rel="prefetch" href="/matheusblog/assets/js/288.1be9801f.js"><link rel="prefetch" href="/matheusblog/assets/js/289.86ff4b6b.js"><link rel="prefetch" href="/matheusblog/assets/js/29.867a4c94.js"><link rel="prefetch" href="/matheusblog/assets/js/290.50e776c1.js"><link rel="prefetch" href="/matheusblog/assets/js/291.bd2e26fb.js"><link rel="prefetch" href="/matheusblog/assets/js/292.1b2394c2.js"><link rel="prefetch" href="/matheusblog/assets/js/293.7124554d.js"><link rel="prefetch" href="/matheusblog/assets/js/294.0e5d9e9a.js"><link rel="prefetch" href="/matheusblog/assets/js/295.2a67d3db.js"><link rel="prefetch" href="/matheusblog/assets/js/296.c7ebae38.js"><link rel="prefetch" href="/matheusblog/assets/js/297.f53428c1.js"><link rel="prefetch" href="/matheusblog/assets/js/298.db63e00c.js"><link rel="prefetch" href="/matheusblog/assets/js/299.c70a9b22.js"><link rel="prefetch" href="/matheusblog/assets/js/3.72b45d0e.js"><link rel="prefetch" href="/matheusblog/assets/js/30.6c5b11ef.js"><link rel="prefetch" href="/matheusblog/assets/js/300.a47f7ffa.js"><link rel="prefetch" href="/matheusblog/assets/js/301.92436d52.js"><link rel="prefetch" href="/matheusblog/assets/js/302.42f70a52.js"><link rel="prefetch" href="/matheusblog/assets/js/303.008576f5.js"><link rel="prefetch" href="/matheusblog/assets/js/304.eee68e1c.js"><link rel="prefetch" href="/matheusblog/assets/js/305.3ac95bcc.js"><link rel="prefetch" href="/matheusblog/assets/js/306.67d137af.js"><link rel="prefetch" href="/matheusblog/assets/js/307.e6ac963e.js"><link rel="prefetch" href="/matheusblog/assets/js/308.d4179de2.js"><link rel="prefetch" href="/matheusblog/assets/js/309.2680a25e.js"><link rel="prefetch" href="/matheusblog/assets/js/31.625b862c.js"><link rel="prefetch" href="/matheusblog/assets/js/310.aeb22bed.js"><link rel="prefetch" href="/matheusblog/assets/js/311.6036ffa0.js"><link rel="prefetch" href="/matheusblog/assets/js/312.fe1fabc2.js"><link rel="prefetch" href="/matheusblog/assets/js/313.07558fed.js"><link rel="prefetch" href="/matheusblog/assets/js/314.5aefce48.js"><link rel="prefetch" href="/matheusblog/assets/js/315.d2470947.js"><link rel="prefetch" href="/matheusblog/assets/js/316.9e3bfc2f.js"><link rel="prefetch" href="/matheusblog/assets/js/317.51ad477f.js"><link rel="prefetch" href="/matheusblog/assets/js/318.647f2ae7.js"><link rel="prefetch" href="/matheusblog/assets/js/319.c14d92d4.js"><link rel="prefetch" href="/matheusblog/assets/js/32.9f9ec8da.js"><link rel="prefetch" href="/matheusblog/assets/js/320.28a0281a.js"><link rel="prefetch" href="/matheusblog/assets/js/321.f0c26a73.js"><link rel="prefetch" href="/matheusblog/assets/js/322.76413da6.js"><link rel="prefetch" href="/matheusblog/assets/js/323.7ba9ce8c.js"><link rel="prefetch" href="/matheusblog/assets/js/324.bd204076.js"><link rel="prefetch" href="/matheusblog/assets/js/325.11659385.js"><link rel="prefetch" href="/matheusblog/assets/js/326.4a6ccc49.js"><link rel="prefetch" href="/matheusblog/assets/js/327.8ca3be5a.js"><link rel="prefetch" href="/matheusblog/assets/js/328.4dbb5b16.js"><link rel="prefetch" href="/matheusblog/assets/js/329.3358677f.js"><link rel="prefetch" href="/matheusblog/assets/js/33.fcf30d66.js"><link rel="prefetch" href="/matheusblog/assets/js/330.1390db8c.js"><link rel="prefetch" href="/matheusblog/assets/js/331.f045fbfc.js"><link rel="prefetch" href="/matheusblog/assets/js/332.e910dd5b.js"><link rel="prefetch" href="/matheusblog/assets/js/333.b070014f.js"><link rel="prefetch" href="/matheusblog/assets/js/334.15c06e3e.js"><link rel="prefetch" href="/matheusblog/assets/js/335.d4ac7f98.js"><link rel="prefetch" href="/matheusblog/assets/js/336.c697ac11.js"><link rel="prefetch" href="/matheusblog/assets/js/337.de4c1bb5.js"><link rel="prefetch" href="/matheusblog/assets/js/338.94769d94.js"><link rel="prefetch" href="/matheusblog/assets/js/339.0f555803.js"><link rel="prefetch" href="/matheusblog/assets/js/34.000dcb63.js"><link rel="prefetch" href="/matheusblog/assets/js/340.c3f15f9d.js"><link rel="prefetch" href="/matheusblog/assets/js/341.0cd0ee16.js"><link rel="prefetch" href="/matheusblog/assets/js/342.4f6ac312.js"><link rel="prefetch" href="/matheusblog/assets/js/343.01d04852.js"><link rel="prefetch" href="/matheusblog/assets/js/344.86ac0c05.js"><link rel="prefetch" href="/matheusblog/assets/js/345.7c0e2955.js"><link rel="prefetch" href="/matheusblog/assets/js/346.91de993d.js"><link rel="prefetch" href="/matheusblog/assets/js/347.577dee5f.js"><link rel="prefetch" href="/matheusblog/assets/js/348.ef8d51da.js"><link rel="prefetch" href="/matheusblog/assets/js/349.bbd13fb4.js"><link rel="prefetch" href="/matheusblog/assets/js/35.9b62ce77.js"><link rel="prefetch" href="/matheusblog/assets/js/350.ffeefdff.js"><link rel="prefetch" href="/matheusblog/assets/js/351.3d1cc7e7.js"><link rel="prefetch" href="/matheusblog/assets/js/352.6f8657d3.js"><link rel="prefetch" href="/matheusblog/assets/js/353.14ee8709.js"><link rel="prefetch" href="/matheusblog/assets/js/354.a6cd38e3.js"><link rel="prefetch" href="/matheusblog/assets/js/355.eacc8df7.js"><link rel="prefetch" href="/matheusblog/assets/js/356.93222709.js"><link rel="prefetch" href="/matheusblog/assets/js/357.6db9ff37.js"><link rel="prefetch" href="/matheusblog/assets/js/358.f1c01f19.js"><link rel="prefetch" href="/matheusblog/assets/js/359.e6e39db1.js"><link rel="prefetch" href="/matheusblog/assets/js/36.0d228988.js"><link rel="prefetch" href="/matheusblog/assets/js/37.cf681e5f.js"><link rel="prefetch" href="/matheusblog/assets/js/38.e4cb2178.js"><link rel="prefetch" href="/matheusblog/assets/js/39.6c130629.js"><link rel="prefetch" href="/matheusblog/assets/js/4.f97b0e6f.js"><link rel="prefetch" href="/matheusblog/assets/js/40.be7f69f0.js"><link rel="prefetch" href="/matheusblog/assets/js/41.a0283ce1.js"><link rel="prefetch" href="/matheusblog/assets/js/42.f85a67cf.js"><link rel="prefetch" href="/matheusblog/assets/js/43.dd769a56.js"><link rel="prefetch" href="/matheusblog/assets/js/44.94dcb602.js"><link rel="prefetch" href="/matheusblog/assets/js/45.34849d22.js"><link rel="prefetch" href="/matheusblog/assets/js/46.7a8dc91d.js"><link rel="prefetch" href="/matheusblog/assets/js/47.8f376fca.js"><link rel="prefetch" href="/matheusblog/assets/js/48.a160148c.js"><link rel="prefetch" href="/matheusblog/assets/js/49.2431274e.js"><link rel="prefetch" href="/matheusblog/assets/js/5.53cb08a5.js"><link rel="prefetch" href="/matheusblog/assets/js/50.7f1fb9b7.js"><link rel="prefetch" href="/matheusblog/assets/js/51.ab96bd3a.js"><link rel="prefetch" href="/matheusblog/assets/js/52.fe4b5422.js"><link rel="prefetch" href="/matheusblog/assets/js/53.47e34b1c.js"><link rel="prefetch" href="/matheusblog/assets/js/54.b304935a.js"><link rel="prefetch" href="/matheusblog/assets/js/55.380c9369.js"><link rel="prefetch" href="/matheusblog/assets/js/56.294c0074.js"><link rel="prefetch" href="/matheusblog/assets/js/57.786434c1.js"><link rel="prefetch" href="/matheusblog/assets/js/58.aa7a20dd.js"><link rel="prefetch" href="/matheusblog/assets/js/59.16773dea.js"><link rel="prefetch" href="/matheusblog/assets/js/6.c4d98514.js"><link rel="prefetch" href="/matheusblog/assets/js/60.996ce5cf.js"><link rel="prefetch" href="/matheusblog/assets/js/61.c315b046.js"><link rel="prefetch" href="/matheusblog/assets/js/62.bc39e5c5.js"><link rel="prefetch" href="/matheusblog/assets/js/63.5b713917.js"><link rel="prefetch" href="/matheusblog/assets/js/64.f676b801.js"><link rel="prefetch" href="/matheusblog/assets/js/65.e0d146a9.js"><link rel="prefetch" href="/matheusblog/assets/js/66.8fab4343.js"><link rel="prefetch" href="/matheusblog/assets/js/67.f2a648fd.js"><link rel="prefetch" href="/matheusblog/assets/js/68.8643a0fe.js"><link rel="prefetch" href="/matheusblog/assets/js/69.45b1a9f5.js"><link rel="prefetch" href="/matheusblog/assets/js/7.07082aa5.js"><link rel="prefetch" href="/matheusblog/assets/js/70.a465681b.js"><link rel="prefetch" href="/matheusblog/assets/js/71.a62e40b6.js"><link rel="prefetch" href="/matheusblog/assets/js/72.9e9f835d.js"><link rel="prefetch" href="/matheusblog/assets/js/73.ff6c7cda.js"><link rel="prefetch" href="/matheusblog/assets/js/74.a24a6bcf.js"><link rel="prefetch" href="/matheusblog/assets/js/75.b1c2daea.js"><link rel="prefetch" href="/matheusblog/assets/js/76.d0794ba2.js"><link rel="prefetch" href="/matheusblog/assets/js/77.ae004606.js"><link rel="prefetch" href="/matheusblog/assets/js/78.2b27382a.js"><link rel="prefetch" href="/matheusblog/assets/js/79.7ab6f975.js"><link rel="prefetch" href="/matheusblog/assets/js/8.e28dffe9.js"><link rel="prefetch" href="/matheusblog/assets/js/80.3a5b6231.js"><link rel="prefetch" href="/matheusblog/assets/js/81.ba6e0e49.js"><link rel="prefetch" href="/matheusblog/assets/js/82.d6c039d9.js"><link rel="prefetch" href="/matheusblog/assets/js/83.b7e99e90.js"><link rel="prefetch" href="/matheusblog/assets/js/84.b05e5d7b.js"><link rel="prefetch" href="/matheusblog/assets/js/85.d8cced0b.js"><link rel="prefetch" href="/matheusblog/assets/js/86.8c64e0a1.js"><link rel="prefetch" href="/matheusblog/assets/js/87.d8109a65.js"><link rel="prefetch" href="/matheusblog/assets/js/88.837746be.js"><link rel="prefetch" href="/matheusblog/assets/js/89.0b17d72c.js"><link rel="prefetch" href="/matheusblog/assets/js/9.74970767.js"><link rel="prefetch" href="/matheusblog/assets/js/90.c09f7f92.js"><link rel="prefetch" href="/matheusblog/assets/js/91.d4628d03.js"><link rel="prefetch" href="/matheusblog/assets/js/92.a07e85b8.js"><link rel="prefetch" href="/matheusblog/assets/js/93.45063d84.js"><link rel="prefetch" href="/matheusblog/assets/js/94.c35094bd.js"><link rel="prefetch" href="/matheusblog/assets/js/95.30e27fa4.js"><link rel="prefetch" href="/matheusblog/assets/js/96.6afa2ece.js"><link rel="prefetch" href="/matheusblog/assets/js/97.9a5dd3dd.js"><link rel="prefetch" href="/matheusblog/assets/js/98.c0943473.js"><link rel="prefetch" href="/matheusblog/assets/js/99.e8cf5ede.js">
    <link rel="stylesheet" href="/matheusblog/assets/css/0.styles.633991d7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/matheusblog/" class="home-link router-link-active"><!----> <span class="site-name">Java 全栈知识体系</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Menu" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java Menu" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/basic/helloworld.html" class="nav-link">
  认识编程
</a></li></ul></li><li class="dropdown-item"><h4>
          集合
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/collection/泛型和集合.html" class="nav-link">
  泛型和集合
</a></li></ul></li><li class="dropdown-item"><h4>
          IO
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/io/IO.html" class="nav-link">
  IO
</a></li></ul></li><li class="dropdown-item"><h4>
          并发编程
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/thread/多线程.html" class="nav-link">
  多线程
</a></li></ul></li><li class="dropdown-item"><h4>
          JVM
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/jvm/01JVM简介.html" class="nav-link">
  JVM简介
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web Menu" class="dropdown-title"><span class="title">Web基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web Menu" class="mobile-dropdown-title"><span class="title">Web基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/html5/01HTML概述.html" class="nav-link">
  HTML概述
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/css/01基础选择器+字体文本样式.html" class="nav-link">
  基础选择器+字体文本样式
</a></li></ul></li><li class="dropdown-item"><h4>
          JS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/js/01JavaScript基础.html" class="nav-link">
  JavaScript基础
</a></li></ul></li><li class="dropdown-item"><h4>
          VUE
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/vue/01Vue简介与安装使用.html" class="nav-link">
  Vue简介与安装使用
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="database Menu" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="database Menu" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MySQL
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/mysql/01数据库软件的安装与使用.html" class="nav-link">
  数据库软件的安装与使用
</a></li></ul></li><li class="dropdown-item"><h4>
          Redis
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          MongoDB
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/mongodb/01数据库和集合基本操作.html" class="nav-link">
  数据库和集合基本操作
</a></li></ul></li><li class="dropdown-item"><h4>
          ElasticSearch
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/elasticsearch/02Elasticsearch-Docker搭建ES.html" class="nav-link">
  Docker搭建ES
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringFramework Menu" class="dropdown-title"><span class="title">SpringFramework</span> <span class="arrow down"></span></button> <button type="button" aria-label="SpringFramework Menu" class="mobile-dropdown-title"><span class="title">SpringFramework</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Maven
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/spring/Spring概述.html" class="nav-link">
  Spring概述
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringMVC
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/springmvc/springMVC框架.html" class="nav-link">
  SpringMVC框架
</a></li></ul></li><li class="dropdown-item"><h4>
          MyBatis-plus
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/mybatis/01MyBatis简介.html" class="nav-link">
  MyBatis简介
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringBoot
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/springboot/SpringBoot简介.html" class="nav-link">
  SpringBoot简介
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/project/jt-project/problem.html" class="nav-link">
  项目
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Devops Menu" class="dropdown-title"><span class="title">DevOps</span> <span class="arrow down"></span></button> <button type="button" aria-label="Devops Menu" class="mobile-dropdown-title"><span class="title">DevOps</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          linux
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/linux/00 Centos.html" class="nav-link">
  CentOS
</a></li></ul></li><li class="dropdown-item"><h4>
          tools
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/tools/VS Code使用.html" class="nav-link">
  VS Code使用
</a></li></ul></li><li class="dropdown-item"><h4>
          Docker
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/docker/01Docker入门.html" class="nav-link">
  Docker入门
</a></li></ul></li><li class="dropdown-item"><h4>
          k8s
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/k8s/01Kubernetes介绍及使用.html" class="nav-link">
  K8s介绍与使用
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/springcloud/note.html" class="nav-link">
  SpringCloud
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="develop Menu" class="dropdown-title"><span class="title">开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="develop Menu" class="mobile-dropdown-title"><span class="title">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          代码规范
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/code-style/effective-java/目录.html" class="nav-link">
  Effective-Java
</a></li></ul></li><li class="dropdown-item"><h4>
          开发环境
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/JUnit/01什么是单元测试.html" class="nav-link">
  开发部署
</a></li></ul></li><li class="dropdown-item"><h4>
          部署环境
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/pattern/设计模式.html" class="nav-link">
  上线部署
</a></li></ul></li><li class="dropdown-item"><h4>
          设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/pattern/设计模式.html" class="nav-link">
  设计模式
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/arch/计算机软件架构发展历史.html" class="nav-link">
  架构
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="other-languages Menu" class="dropdown-title"><span class="title">其他语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="other-languages Menu" class="mobile-dropdown-title"><span class="title">其他语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Go
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/other-languages/go/01Go语言介绍.html" class="nav-link">
  Go语言介绍
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Menu" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java Menu" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/basic/helloworld.html" class="nav-link">
  认识编程
</a></li></ul></li><li class="dropdown-item"><h4>
          集合
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/collection/泛型和集合.html" class="nav-link">
  泛型和集合
</a></li></ul></li><li class="dropdown-item"><h4>
          IO
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/io/IO.html" class="nav-link">
  IO
</a></li></ul></li><li class="dropdown-item"><h4>
          并发编程
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/thread/多线程.html" class="nav-link">
  多线程
</a></li></ul></li><li class="dropdown-item"><h4>
          JVM
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/jvm/01JVM简介.html" class="nav-link">
  JVM简介
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web Menu" class="dropdown-title"><span class="title">Web基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web Menu" class="mobile-dropdown-title"><span class="title">Web基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/html5/01HTML概述.html" class="nav-link">
  HTML概述
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/css/01基础选择器+字体文本样式.html" class="nav-link">
  基础选择器+字体文本样式
</a></li></ul></li><li class="dropdown-item"><h4>
          JS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/js/01JavaScript基础.html" class="nav-link">
  JavaScript基础
</a></li></ul></li><li class="dropdown-item"><h4>
          VUE
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/vue/01Vue简介与安装使用.html" class="nav-link">
  Vue简介与安装使用
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="database Menu" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="database Menu" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MySQL
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/mysql/01数据库软件的安装与使用.html" class="nav-link">
  数据库软件的安装与使用
</a></li></ul></li><li class="dropdown-item"><h4>
          Redis
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          MongoDB
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/mongodb/01数据库和集合基本操作.html" class="nav-link">
  数据库和集合基本操作
</a></li></ul></li><li class="dropdown-item"><h4>
          ElasticSearch
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/elasticsearch/02Elasticsearch-Docker搭建ES.html" class="nav-link">
  Docker搭建ES
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringFramework Menu" class="dropdown-title"><span class="title">SpringFramework</span> <span class="arrow down"></span></button> <button type="button" aria-label="SpringFramework Menu" class="mobile-dropdown-title"><span class="title">SpringFramework</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Maven
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/spring/Spring概述.html" class="nav-link">
  Spring概述
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringMVC
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/springmvc/springMVC框架.html" class="nav-link">
  SpringMVC框架
</a></li></ul></li><li class="dropdown-item"><h4>
          MyBatis-plus
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/mybatis/01MyBatis简介.html" class="nav-link">
  MyBatis简介
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringBoot
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/springboot/SpringBoot简介.html" class="nav-link">
  SpringBoot简介
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/project/jt-project/problem.html" class="nav-link">
  项目
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Devops Menu" class="dropdown-title"><span class="title">DevOps</span> <span class="arrow down"></span></button> <button type="button" aria-label="Devops Menu" class="mobile-dropdown-title"><span class="title">DevOps</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          linux
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/linux/00 Centos.html" class="nav-link">
  CentOS
</a></li></ul></li><li class="dropdown-item"><h4>
          tools
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/tools/VS Code使用.html" class="nav-link">
  VS Code使用
</a></li></ul></li><li class="dropdown-item"><h4>
          Docker
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/docker/01Docker入门.html" class="nav-link">
  Docker入门
</a></li></ul></li><li class="dropdown-item"><h4>
          k8s
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/k8s/01Kubernetes介绍及使用.html" class="nav-link">
  K8s介绍与使用
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/springcloud/note.html" class="nav-link">
  SpringCloud
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="develop Menu" class="dropdown-title"><span class="title">开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="develop Menu" class="mobile-dropdown-title"><span class="title">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          代码规范
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/code-style/effective-java/目录.html" class="nav-link">
  Effective-Java
</a></li></ul></li><li class="dropdown-item"><h4>
          开发环境
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/JUnit/01什么是单元测试.html" class="nav-link">
  开发部署
</a></li></ul></li><li class="dropdown-item"><h4>
          部署环境
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/pattern/设计模式.html" class="nav-link">
  上线部署
</a></li></ul></li><li class="dropdown-item"><h4>
          设计模式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/pattern/设计模式.html" class="nav-link">
  设计模式
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/arch/计算机软件架构发展历史.html" class="nav-link">
  架构
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="other-languages Menu" class="dropdown-title"><span class="title">其他语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="other-languages Menu" class="mobile-dropdown-title"><span class="title">其他语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Go
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/other-languages/go/01Go语言介绍.html" class="nav-link">
  Go语言介绍
</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JUnit</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matheusblog/md/develop/JUnit/01什么是单元测试.html" class="sidebar-link">什么是软件测试</a></li><li><a href="/matheusblog/md/develop/JUnit/02第一个单元测试.html" class="sidebar-link">第一个单元测试</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>设计模式</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matheusblog/md/develop/pattern/设计模式.html" class="active sidebar-link">设计模式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Effective-Java</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matheusblog/md/develop/code-style/effective-java/目录.html" class="sidebar-link">Effective-Java目录</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="设计模式"><a href="#设计模式" class="header-anchor">#</a> 设计模式</h1> <p></p><div class="table-of-contents"><ul><li><a href="#开闭原则">开闭原则</a></li><li><a href="#里氏替换原则">里氏替换原则</a></li><li><a href="#依赖倒置原则">依赖倒置原则</a></li><li><a href="#单一职责原则">单一职责原则</a></li><li><a href="#接口隔离原则">接口隔离原则</a></li><li><a href="#迪米特法则-最少知道原则">迪米特法则(最少知道原则)</a></li><li><a href="#合成复用原则">合成复用原则</a></li><li><a href="#单例模式">单例模式</a><ul><li><a href="#饿汉单例模式">饿汉单例模式</a></li><li><a href="#懒汉单例模式">懒汉单例模式</a></li></ul></li><li><a href="#三大工厂模式">三大工厂模式</a><ul><li><a href="#简单工厂模式">简单工厂模式</a></li><li><a href="#工厂方法模式">工厂方法模式</a></li><li><a href="#抽象工厂模式">抽象工厂模式</a></li><li><a href="#对比">对比</a></li></ul></li><li><a href="#建造者模式">建造者模式</a></li><li><a href="#适配器模式">适配器模式</a></li><li><a href="#桥接模式">桥接模式</a></li><li><a href="#装饰器模式">装饰器模式</a></li><li><a href="#外观模式">外观模式</a></li><li><a href="#享元模式">享元模式</a></li><li><a href="#代理模式">代理模式</a></li><li><a href="#命令模式">命令模式</a></li><li><a href="#中介模式">中介模式</a></li><li><a href="#观察者模式">观察者模式</a></li><li><a href="#状态模式">状态模式</a></li><li><a href="#策略模式">策略模式</a></li></ul></div><p></p> <h1 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h1> <p>设计模式（Design pattern）代表了最佳的实践，通常被有经验的面向对象的软件开发人员所采用。设计模式是软件开发人员在软件开发过程中面临的一般问题的解决方案。这些解决方案是众多软件开发人员经过相当长的一段时间的试验和错误总结出来的。</p> <p>Java中有23 种设计模式，本质是面向对象设计原则的实际运用，是对类的封装性、继承性和多态性，以及类的关联关系和组合关系的充分理解。
当然，软件设计模式只是一个引导，在实际的软件开发中，必须根据具体的需求来选择。
1、 对于简单的程序，可能写一个简单的算法要比引入某种设计模式更加容易。
2、 但是对于大型项目开发或者框架设计，用设计模式来组织代码显然更好。</p> <p><img src="https://doc.shiyanlou.com/courses/3031/600404/ca5a45816c77e117aefdcdb9b15dab43-0" alt="img"></p> <p>开始实验之前，有必要先了解一些背景信息和相关基础知识。</p> <blockquote><p>在<a href="https://zh.wikipedia.org/wiki/%E8%BB%9F%E9%AB%94%E5%B7%A5%E7%A8%8B" target="_blank" rel="noopener noreferrer">软件工程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中，<strong>设计模式</strong>（design pattern）是对<a href="https://zh.wikipedia.org/wiki/%E8%BB%9F%E4%BB%B6%E8%A8%AD%E8%A8%88" target="_blank" rel="noopener noreferrer">软件设计<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中普遍存在（反复出现）的各种问题，所提出的解决方案。</p> <p>设计模式并不直接用来完成<a href="https://zh.wikipedia.org/wiki/%E7%A8%8B%E5%BC%8F%E7%A2%BC" target="_blank" rel="noopener noreferrer">代码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的编写，而是描述在各种不同情况下，要怎么解决问题的一种方案。<a href="https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">面向对象<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>设计模式通常以<a href="https://zh.wikipedia.org/wiki/%E9%A1%9E%E5%88%A5" target="_blank" rel="noopener noreferrer">类别<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>或<a href="https://zh.wikipedia.org/wiki/%E7%89%A9%E4%BB%B6_(%E9%9B%BB%E8%85%A6%E7%A7%91%E5%AD%B8)" target="_blank" rel="noopener noreferrer">对象<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>来描述其中的关系和相互作用，但不涉及用来完成应用程序的特定类别或对象。设计模式能使不稳定依赖于相对稳定、具体依赖于相对抽象，避免会引起麻烦的紧耦合，以增强软件设计面对并适应变化的能力。</p> <p>《<a href="https://zh.wikipedia.org/wiki/%E8%AE%BE%E8%AE%A1%E8%8C%83%E4%BE%8B" target="_blank" rel="noopener noreferrer">设计模式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>》一书原先把设计模式分为创建型模式、结构型模式、行为型模式，把它们通过授权、聚合、诊断的概念来描述</p> <p>--参考维基百科</p></blockquote> <p>设计模式主要分为三大类，各自还有许多子类：</p> <ul><li>创建型模式</li></ul> <table><thead><tr><th>模式名</th> <th>描述</th></tr></thead> <tbody><tr><td>抽象工厂模式</td> <td>为一个产品族提供了统一的创建接口。当需要这个产品族的某一系列的时候，可以从抽象工厂中选出相应的系列创建一个具体的工厂类。</td></tr> <tr><td>工厂方法模式</td> <td>定义一个接口用于创建对象，但是让子类决定初始化哪个类。工厂方法把一个类的初始化下放到子类。</td></tr> <tr><td>生成器模式</td> <td>将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。</td></tr> <tr><td>惰性初始模式</td> <td>推迟对象的创建、数据的计算等需要耗费较多资源的操作，只有在第一次访问的时候才执行。</td></tr> <tr><td>对象池模式</td> <td>通过回收利用对象避免获取和释放资源所需的昂贵成本。</td></tr> <tr><td>原型模式</td> <td>用原型实例指定创建对象的种类，并且通过拷贝这些原型创建新的对象。</td></tr> <tr><td>单例模式</td> <td>确保一个类只有一个实例，并提供对该实例的全局访问。</td></tr></tbody></table> <ul><li>结构性模式</li></ul> <table><thead><tr><th>模式名</th> <th>描述</th></tr></thead> <tbody><tr><td>适配器模式</td> <td>将某个类的接口转换成客户端期望的另一个接口表示。适配器模式可以消除由于接口不匹配所造成的类兼容性问题。</td></tr> <tr><td>桥接模式</td> <td>将一个抽象与实现解耦，以便两者可以独立的变化。</td></tr> <tr><td>组合模式</td> <td>把多个对象组成树状结构来表示局部与整体，这样用户可以一样的对待单个对象和对象的组合。</td></tr> <tr><td>修饰模式</td> <td>向某个对象动态地添加更多的功能。修饰模式是除类继承外另一种扩展功能的方法。</td></tr> <tr><td>外观模式</td> <td>为子系统中的一组接口提供一个一致的界面， 外观模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。</td></tr> <tr><td>享元</td> <td>通过共享以便有效的支持大量小颗粒对象。</td></tr> <tr><td>代理</td> <td>为其他对象提供一个代理以控制对这个对象的访问。</td></tr></tbody></table> <ul><li>行为型模式</li></ul> <table><thead><tr><th>模式名</th> <th>描述</th></tr></thead> <tbody><tr><td>黑板</td> <td>广义的观察者在系统范围内交流信息，允许多位读者和写者。</td></tr> <tr><td>责任链</td> <td>为解除请求的发送者和接收者之间耦合，而使多个对象都有机会处理这个请求。将这些对象连成一条链，并沿着这条链传递该请求，直到有一个对象处理它。</td></tr> <tr><td>命令</td> <td>将一个请求封装为一个对象，从而使你可用不同的请求对客户进行参数化；对请求排队或记录请求日志，以及支持可取消的操作。</td></tr> <tr><td>解释器</td> <td>给定一个语言, 定义它的文法的一种表示，并定义一个解释器, 该解释器使用该表示来解释语言中的句子。</td></tr> <tr><td>迭代器</td> <td>提供一种方法顺序访问一个聚合对象中各个元素, 而又不需暴露该对象的内部表示。</td></tr> <tr><td>中介者</td> <td>包装了一系列对象相互作用的方式，使得这些对象不必相互明显作用，从而使它们可以松散偶合。当某些对象之间的作用发生改变时，不会立即影响其他的一些对象之间的作用，保证这些作用可以彼此独立的变化。</td></tr> <tr><td>备忘录</td> <td>备忘录对象是一个用来存储另外一个对象内部状态的快照的对象。备忘录模式的用意是在不破坏封装的条件下，将一个对象的状态捉住，并外部化，存储起来，从而可以在将来合适的时候把这个对象还原到存储起来的状态。</td></tr> <tr><td>空对象</td> <td>通过提供默认对象来避免空引用。</td></tr> <tr><td>观察者模式</td> <td>在对象间定义一个一对多的联系性，由此当一个对象改变了状态，所有其他相关的对象会被通知并且自动刷新。</td></tr> <tr><td>规格</td> <td>以布尔形式表示的可重绑定的商业逻辑。</td></tr> <tr><td>状态</td> <td>让一个对象在其内部状态改变的时候，其行为也随之改变。状态模式需要对每一个系统可能获取的状态创立一个状态类的子类。当系统的状态变化时，系统便改变所选的子类。</td></tr> <tr><td>策略</td> <td>定义一个算法的系列，将其各个分装，并且使他们有交互性。策略模式使得算法在用户使用的时候能独立的改变。</td></tr> <tr><td>模板方法</td> <td>模板方法模式准备一个抽象类，将部分逻辑以具体方法及具体构造子类的形式实现，然后声明一些抽象方法来迫使子类实现剩余的逻辑。不同的子类可以以不同的方式实现这些抽象方法，从而对剩余的逻辑有不同的实现。先构建一个顶级逻辑框架，而将逻辑的细节留给具体的子类去实现。</td></tr> <tr><td>访问者</td> <td>封装一些施加于某种数据结构元素之上的操作。一旦这些操作需要修改，接受这个操作的数据结构可以保持不变。访问者模式适用于数据结构相对未定的系统，它把数据结构和作用于结构上的操作之间的耦合解脱开，使得操作集合可以相对自由的演化。</td></tr></tbody></table> <p>当你看完上面这些介绍，可能你已经感受到了来自设计模式的压力，我也不例外，虽然我了解一些设计模式的知识，但是面对上面总结的各种模式，我也感到很无力，毕竟这是无数大牛精心设计且经过实践证明的''真理''。但是，越是这样的技术，越具有挑战性，你只要完全掌握上面内容的三分之一，你的编程水平已经上了一个台阶。了解并掌握设计模式的思想和原理，不仅有助于你写出优质健壮的代码，也将极大地提高系统的性能。同时你也将更容易的看懂他人优秀的代码。</p> <h1 id="七大原则"><a href="#七大原则" class="header-anchor">#</a> 七大原则</h1> <p>在软件开发过程中，为了提高系统的可维护性、可复用性、可扩展性以及灵活性，产生了七大设计原则，这些原则也会贯穿体现在设计模式中。设计模式会尽量遵循这些原则，但是也可能为了某一个侧重点从而牺牲某些原则，在我们日常开发中也只能说尽量遵守，但是并不必为了遵守而遵守。</p> <h2 id="开闭原则"><a href="#开闭原则" class="header-anchor">#</a> 开闭原则</h2> <p>开闭原则：<code>Open-Closed Principle</code>，简称为 <code>OCP</code>。其核心是指在一个软件实体中（如类，函数等），我们应该对扩展开放、对修改关闭，这样就可以提高软件系统的可复用性和可维护性。</p> <p>开闭原则是面向对象设计的最基本原则，而遵守开闭原则的核心思想就是面向抽象编程。</p> <p>下面我们以超市中的商品为例进行说明，请大家跟着我一起完成这个实验。</p> <p>因为我们有七大原则需要讲解，有些原则之间类会同名，为了方便区分，我们以每一个原则的简称来新建一个目录，比如开闭原则新建的目录名为 <code>ocp</code>，然后相关的类就创建在 <code>ocp</code> 目录下。</p> <ul><li>新建一个商品接口 <code>IGoods.java</code>，接口中定义了两个方法：一个获取商品名，一个获取商品出售价。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">ocp</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigDecimal</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IGoods</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取商品名称</span>
    <span class="token class-name">BigDecimal</span> <span class="token function">getSalePrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取商品每kg出售价格</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>新建一个具体商品蔬菜类 <code>Cabbage.java</code> 来实现商品接口。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">ocp</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigDecimal</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cabbage</span> <span class="token keyword">implements</span> <span class="token class-name">IGoods</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//获取商品名称</span>
        <span class="token keyword">return</span> <span class="token string">&quot;蔬菜&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">BigDecimal</span> <span class="token function">getSalePrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//获取商品每kg出售价格</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">&quot;3.98&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>上面我们看到，蔬菜售价是 3.98/kg，那么这时候到了晚上，需要打折，售价要改为 1.98/kg，这时候普通的做法有三种选择：</p> <ul><li>直接修改 <code>Cabbage</code> 类的 <code>getSalePrice</code>。</li> <li>接口中再新增一个打折价方法。</li> <li>直接在 <code>Cabbage</code> 方法中新增一个获取打折后价钱的方法。</li></ul> <p>这三种方法中：</p> <ol><li>第一种可能影响到其它不需要打折的地方或者后面不打折了又要改回来，那么就需要反复修改源码，不可行。</li> <li>第二种直接修改接口，影响就太大了，每个实现类都被迫需要改动（当然如果是 JDK 1.8 之后的版本可以选择新增 <code>default</code> 方法，这样方法二就和第三种方法等价了）。</li> <li>第三种方法貌似改动是最小的，但毕竟还是修改了源码。</li></ol> <p>简而言之，这三种方法都需要修改源码，违背了开闭原则中的对修改关闭这一条。所以如果要遵循开闭原则，那么我们的做法应该是再新建一个蔬菜打折类来实现 <code>IGoods</code> 商品。</p> <ul><li>新建一个打折蔬菜类 <code>DiscountCabbage.java</code>。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">ocp</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigDecimal</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DiscountCabbage</span> <span class="token keyword">implements</span> <span class="token class-name">IGoods</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//获取商品名称</span>
        <span class="token keyword">return</span> <span class="token string">&quot;蔬菜&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">BigDecimal</span> <span class="token function">getSalePrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//获取商品每kg出售价格</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">&quot;1.98&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li>最后让我们新建一个测试类 <code>TestOCP.java</code> 来看看运行结果。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">ocp</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestOCP</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;蔬菜原价：&quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Cabbage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSalePrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取蔬菜原价</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;蔬菜打折价：&quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">DiscountCabbage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSalePrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取蔬菜打折价</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>接下来需要执行 <code>javac ocp/*.java</code> 命令进行编译。</p> <p>最后再执行 <code>java ocp.TestOCP</code> 命令运行测试类（大家一定要自己动手运行哦，只有自己实际去运行了才能更深入体会其中的思想）。</p> <p>这样就符合开闭原则了，而且后面有其它商品需要打折或者其它活动，都可以通过新建一个类来实现，扩展非常方便。</p> <h2 id="里氏替换原则"><a href="#里氏替换原则" class="header-anchor">#</a> 里氏替换原则</h2> <p>里氏替换原则：<code>Liskov Substitution Principle</code>，简称为 <code>LSP</code>。其指的是继承必须确保超类所拥有的性质在子类中仍然成立，也就是说如果对每一个类型为 T1 的对象 o1 都有类型为 T2 的对象 o2，使得以 T1 所定义的程序 P 在所有的对象 o1 都替换成为 o2 时，程序 P 的行为没有发生改变。</p> <p>里氏替换原则具体可以总结为以下 4 点：</p> <ul><li>子类可以实现父类的抽象方法，但是不能覆盖父类的非抽象方法。</li> <li>子类中可以增加自己的特有方法。</li> <li>当子类方法重载父类的方法时，方法的前置条件（即方法的输入/入参）要比父类方法输入的参数更宽松。</li> <li>当子类实现父类的方法（重载/重写/实现抽象方法），方法的后置条件（即方法的输出/返回值）要比父类更严格或者相等。</li></ul> <p>我们以动物鸟类飞翔举例进行说明。同样的，这里需要新建一个 <code>lsp</code> 目录，相关类创建在 <code>lsp</code> 目录下。</p> <ul><li>新建一个鸟类 <code>Bird.java</code>。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">lsp</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bird</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;我正在天上飞&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>再新建一个鹰类 <code>Eagle.java</code> 来继承 Bird，并重写其中的 fly 方法。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">lsp</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Eagle</span> <span class="token keyword">extends</span> <span class="token class-name">Bird</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;我正在8000米高空飞翔&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>新建一个测试类 <code>TestLSP.java</code> 来测试。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">lsp</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestLSP</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Bird</span> bird <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bird</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bird<span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：我正在天上飞</span>

        <span class="token class-name">Eagle</span> eagle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Eagle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//替换成子类Eagle，子类重写了父类Bird的fly方法</span>
        eagle<span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：我正在8000米高空飞翔</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>接下来我们需要先执行 <code>javac lsp/*.java</code> 命令进行编译。然后再执行 <code>java lsp.TestLSP</code> 命令运行测试类（大家一定要自己动手运行哦，只有自己实际去运行了才会更能体会其中的思想）。</p> <p>可以看到上面的例子中将父类替换成子类之后，<code>fly</code> 方法变成了在 8000 米高空飞翔（普通鸟类达不到），这就改变了父类的行为，导致替换不成立，所以这个例子就违背了里氏替换原则。</p> <h2 id="依赖倒置原则"><a href="#依赖倒置原则" class="header-anchor">#</a> 依赖倒置原则</h2> <p>依赖倒置原则：<code>Dependence Inversion Principle</code>，简称为 <code>DIP</code>。其指的是在设计代码结构时，高层模块不应该依赖低层模块，而是都应该依赖其抽象。抽象不应该依赖细节，细节应该依赖抽象。通过依赖倒置原则可以减少类与类之间的耦合性，提高系统的稳定性，提高代码的可读性和可维护性，而且能够降低修改程序所带来的风险。</p> <p>我们以超市出售商品举例进行说明（同样的，这里我们需要新建一个 <code>dip</code> 目录，相关类创建在 <code>dip</code> 目录下）。</p> <ul><li>假设一家超市刚开张，只有青菜卖，所以我们新建一个超市类 <code>SuperMarket.java</code>，里面只定义一个卖蔬菜的方法。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">dip</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SuperMarket</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saleCabbage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;我有蔬菜可以卖&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>这个超市类直接和蔬菜绑定了，也就是依赖了具体的商品。假如要卖其它商品就需要修改源码，违背了开闭原则，我们应该修改超市类依赖于抽象商品，而不能直接绑定具体商品。</p> <ul><li>新增一个商品接口 <code>IGoods.java</code>，接口中定义一个出售商品方法。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">dip</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IGoods</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">sale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>再新建一个蔬菜类 <code>Cabbage.java</code> 实现商品接口。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">dip</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cabbage</span> <span class="token keyword">implements</span> <span class="token class-name">IGoods</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sale</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;我有蔬菜可以卖&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>然后还需要编辑 <code>SuperMarket.java</code> 文件，将原先的超市类 SuperMarket 修改一下。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">dip</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SuperMarket</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sale</span><span class="token punctuation">(</span><span class="token class-name">IGoods</span> goods<span class="token punctuation">)</span><span class="token punctuation">{</span>
        goods<span class="token punctuation">.</span><span class="token function">sale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>最后让我们新建一个测试类 <code>TestDIP.java</code> 来测试结果。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">dip</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDIP</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SuperMarket</span> superMarket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperMarket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        superMarket<span class="token punctuation">.</span><span class="token function">sale</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cabbage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：我有蔬菜可以卖</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>接下来我们需要先执行 <code>javac dip/*.java</code> 命令进行编译。然后再执行 <code>java dip.TestDIP</code> 命令运行测试类（大家一定要自己动手运行哦，只有自己实际去运行了才会更能体会其中的思想）。</p> <p>这时候如果需要新增其它商品，只需要新建一个具体商品类来实现 <code>IGoods</code> 接口，并作为参数传入 <code>sale</code> 方法就可以了。</p> <h2 id="单一职责原则"><a href="#单一职责原则" class="header-anchor">#</a> 单一职责原则</h2> <p>单一职责原则：<code>Single Responsibility Principle</code>，简称为 <code>SRP</code>。其指的是不要存在多于一个导致类变更的原因。假如我们有一个类里面有两个职责，一旦其中一个职责发生需求变更，那我们修改其中一个职责就有可能导致另一个职责出现问题，在这种情况应该把两个职责放在两个 Class 对象之中。</p> <p>单一职责可以降低类的复杂度，提高类的可读性和系统的可维护性，也降低了变更职责引发的风险。</p> <p>我们以超市的进货和出售举例进行说明（同样的，这里我们需要新建一个 <code>srp</code> 目录，相关类创建在 <code>srp</code> 目录下）。</p> <ul><li>新建一个商品类 <code>Goods.java</code>。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">srp</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Goods</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;进货&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;我要去进货了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;售卖&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;我要卖商品&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>这个方法里面有两个分支：进货和售卖。也就是一个方法里面有两个功能（职责），假如业务逻辑非常复杂，那么一个功能发生变化需要修改有很大的风险导致另一个功能也发生异常。所以为了符合单一职责原则我们应该进行如下改写，将这两个职责拆分成两个类。</p> <ul><li>商品进货类 <code>BuyGoods.java</code>。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">srp</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BuyGoods</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;我要去进货了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>商品售卖类 <code>SaleGoods.java</code>。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">srp</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SaleGoods</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;我要卖商品&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>最后我们写一个测试类 <code>TestSRP.java</code> 来对比一下两种写法。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">srp</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSRP</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//不符合单一职责写法</span>
        <span class="token class-name">Goods</span> goods <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        goods<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token string">&quot;进货&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：我要去进货了</span>
        goods<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token string">&quot;售卖&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：我要卖商品</span>

        <span class="token comment">//符合单一职责写法</span>
        <span class="token class-name">BuyGoods</span> buyGoods <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BuyGoods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        buyGoods<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：我要去进货了</span>
        <span class="token class-name">SaleGoods</span> saleGoods <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SaleGoods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        saleGoods<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：我要卖商品</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>接下来我们需要先执行 <code>javac srp/*.java</code> 命令进行编译。然后再执行 <code>java srp.TestSRP</code> 命令运行测试类（大家一定要自己动手运行哦，只有自己实际去运行了才会更能体会其中的思想）。</p> <p>这样对比之后大家应该一目了然，单一职责原则的两个行为是两个独立的类，修改其中一个功能，就绝对不会导致另一个功能出现异常，符合了单一职责原则。</p> <h2 id="接口隔离原则"><a href="#接口隔离原则" class="header-anchor">#</a> 接口隔离原则</h2> <p>接口隔离原则：<code>Interface Segregation Principle</code>，简称为 <code>ISP</code>。接口隔离原则符合我们所说的高内聚低耦合的设计思想，从而使得类具有很好的可读性、可扩展性和可维护性，在设计接口的时候应该注意以下三点：</p> <ul><li>一个类对其它类的依赖应建立在最小的接口之上。</li> <li>建立单一的接口，不建立庞大臃肿的接口。</li> <li>尽量细化接口，接口中的方法应适度。</li></ul> <p>我们以常见的动物的行为举例进行说明（同样的，这里我们需要新建一个 <code>isp</code> 目录，相关类创建在 <code>isp</code> 目录下）。</p> <ul><li>新建一个动物接口 <code>IAnimal.java</code>，定义三个方法：run，swim，fly。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">isp</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IAnimal</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//地上跑</span>
    <span class="token keyword">void</span> <span class="token function">swim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//水里游</span>
    <span class="token keyword">void</span> <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//天上飞</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>新建一个 Dog 类 <code>Dog.java</code> 来实现 IAnimal 接口。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">isp</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">IAnimal</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;我跑的很快&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">swim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;我还会游泳&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>可以看到，fly 方法我什么也没做，因为狗不会飞，但是因为 fly 方法和其它方法定义在了同一个接口里面，所以使得狗具备了不该具有的行为，这就属于接口没有隔离，我们应该把不同特征的行为进行隔离，即拆分成不同的接口。</p> <ul><li>新建一个接口 <code>IFlyAnimal.java</code>，只定义一个 fly 方法。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">isp</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IFlyAnimal</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>新建一个接口 <code>IRunAnimal.java</code>，只定义一个 run 方法。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">isp</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IRunAnimal</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>新建一个接口 <code>ISwimAnimal.java</code>，只定义一个 swim 方法。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">isp</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ISwimAnimal</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">swim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>然后对上面的 Dog 类 <code>Dog.java</code> 进行改写。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">isp</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">IRunAnimal</span><span class="token punctuation">,</span><span class="token class-name">ISwimAnimal</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;我跑的很快&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">swim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;我还会游泳&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>最后我们新建一个测试类 <code>TestISP.java</code> 来看一下运行效果。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">isp</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestISP</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Dog</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dog<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//狗会跑</span>
        dog<span class="token punctuation">.</span><span class="token function">swim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//狗会游泳</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>接下来我们需要先执行 <code>javac isp/*.java</code> 命令进行编译。然后再执行 <code>java isp.TestISP</code> 命令运行测试类（大家一定要自己动手运行哦，只有自己实际去运行了才会更能体会其中的思想）。</p> <p>这时候 Dog 需要什么行为就实现什么行为，不会再具有自己不该有的行为 fly 了。</p> <h2 id="迪米特法则-最少知道原则"><a href="#迪米特法则-最少知道原则" class="header-anchor">#</a> 迪米特法则(最少知道原则)</h2> <p>迪米特法则：<code>Law of Demeter</code>，简称为 <code>LoD</code>，又叫作最少知道原则（<code>Least Knowledge Principle</code>，<code>LKP</code>)。是指一个对象对其它对象应该保持最少的了解，尽量降低类与类之间的耦合。</p> <p>我们以超市售卖青菜，老板和经理想知道卖出去了多少斤举例进行说明（同样的，这里我们需要新建一个 <code>lod</code> 目录，相关类创建在 <code>lod</code> 目录下）。</p> <ul><li>新建一个蔬菜商品类 <code>Cabbage.java</code>。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">lod</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cabbage</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//获取商品名</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;蔬菜&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saleRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//获取蔬菜售卖记录</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;蔬菜今天卖出去了100斤&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>这时候经理和老板都需要知道商品出售情况，那么是不是经理和老板都需要直接和商品打交道呢？实际上不需要，按常理老板只需要向经理询问就可以了，而经理直接和商品打交道就行了。</p> <ul><li>新建一个经理类 <code>Manager.java</code>。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">lod</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Manager</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Cabbage</span> cabbage<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token class-name">Cabbage</span> cabbage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cabbage <span class="token operator">=</span> cabbage<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getCabbageSaleMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        cabbage<span class="token punctuation">.</span><span class="token function">saleRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>可以看到经理类里面集成了具体的商品，然后调用了商品的方法获得商品的出售记录。</p> <ul><li>新建老板类 <code>Boss.java</code>。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">lod</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Boss</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getCabbageSaleRecord</span><span class="token punctuation">(</span><span class="token class-name">Manager</span> manager<span class="token punctuation">)</span><span class="token punctuation">{</span>
        manager<span class="token punctuation">.</span><span class="token function">getCabbageSaleMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>新建一个测试类 <code>TestLoD.java</code> 来看看运行结果。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">lod</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestLoD</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Boss</span> boss <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//构建Boss实例</span>
        <span class="token class-name">Manager</span> manager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cabbage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//构建经理实例，经理需要和商品打交道</span>

        <span class="token comment">//这里老板只需要和经理打交道就行了</span>
        boss<span class="token punctuation">.</span><span class="token function">getCabbageSaleRecord</span><span class="token punctuation">(</span>manager<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获得蔬菜售卖机记录</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>接下来我们需要先执行 <code>javac lod/*.java</code> 命令进行编译。然后再执行 <code>java lod.TestLoD</code> 命令运行测试类（大家一定要自己动手运行哦，只有自己实际去运行了才会更能体会其中的思想）。</p> <p>上面 Boss 类不会直接和商品打交道，而是通过经理去获取想要的接口，这就是迪米特法则。不该知道的不要知道，我只要让该知道的人知道就好了，你想知道那你就去找那个该知道的人。后面我们要介绍的中介者模式就是一种典型的遵守了迪米特法则的设计模式。</p> <h2 id="合成复用原则"><a href="#合成复用原则" class="header-anchor">#</a> 合成复用原则</h2> <p>合成复用原则：<code>Composite Reuse Principle</code>，简称为 <code>CRP</code>，又叫组合/聚合复用原则（<code>Composition/Aggregate Reuse Principle</code>，<code>CARP</code>）。指的是在软件复用时，要尽量先使用组合（has-a）或者聚合（contains-a）等关联关系来实现，这样可以使系统更加灵活，降低类与类之间的耦合度，一个类的变化对其它类造成的影响相对较少。</p> <p>继承通常也称之为白箱复用，相当于把所有的实现细节都暴露给子类。组合/聚合也称之为黑箱复用，对类以外的对象是无法获取到实现细节的。</p> <p>这个原则还是非常好理解的，像我们开发中经常用的依赖注入，其实就是组合，还有上面的迪米特法则中的经理类就是组合了商品类，所以在这里就不再单独举例子了。</p> <h1 id="创造型模式"><a href="#创造型模式" class="header-anchor">#</a> 创造型模式</h1> <h2 id="单例模式"><a href="#单例模式" class="header-anchor">#</a> 单例模式</h2> <p>单例模式可以说是大多数开发人员在实际中使用最多的，常见的Spring默认创建的bean就是单例模式的。
单例模式有很多好处，比如可节约系统内存空间，控制资源的使用。
其中单例模式最重要的是确保对象只有一个。
简单来说，保证一个类在内存中的对象就一个。</p> <p><strong>设计模式</strong>是一套被前人反复使用,多数人知晓,经过分类编目的代码设计经验的总结,后来者可以直接拿来解决问题.好的设计模式可以进一步提高代码的重用性.</p> <p>单例模式又叫做 Singleton模式，指的是一个类，在一个JVM里，只有一个实例存在。</p> <blockquote><p><strong>单例模式</strong>，也叫<strong>单子模式</strong>，是一种常用的<a href="https://zh.wikipedia.org/wiki/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener noreferrer">软件设计模式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。在应用这个模式时，单例对象的<a href="https://zh.wikipedia.org/wiki/%E7%B1%BB" target="_blank" rel="noopener noreferrer">类<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>必须保证只有一个实例存在。许多时候整个系统只需要拥有一个的全局<a href="https://zh.wikipedia.org/wiki/%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">对象<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，这样有利于我们协调系统整体的行为。</p> <p>实现单例模式的思路是：一个类能返回对象一个引用(永远是同一个)和一个获得该实例的方法（必须是静态方法，通常使用getInstance这个名称）；当我们调用这个方法时，如果类持有的引用不为空就返回这个引用，如果类保持的引用为空就创建该类的实例并将实例的引用赋予该类保持的引用；同时我们还将该类的<a href="https://zh.wikipedia.org/wiki/%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0" target="_blank" rel="noopener noreferrer">构造函数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>定义为私有方法，这样其他处的代码就无法通过调用该类的构造函数来实例化该类的对象，只有通过该类提供的静态方法来得到该类的唯一实例。</p> <p>---维基百科</p></blockquote> <p>单例模式的要点有：某个类只能有一个实例；它必须自行创建本身的实例；它必须自行向整个系统提供这个实例。单例模式是一种对象创建型模式。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>角色：
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Singleton：单例类</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UML 类图：
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://doc.shiyanlou.com/document-uid108299labid2297timestamp1486368498821.png" alt="此处输入图片的描述"></p> <h3 id="饿汉单例模式"><a href="#饿汉单例模式" class="header-anchor">#</a> 饿汉单例模式</h3> <p>目的：控制外界创建对象的个数只能创建1个对象
开发步骤：
1、 私有化构造方法
2、 在类的内部创建好对象
3、 对外界提供一个公共的get()，返回一个已经准备好的对象</p> <p>在用类获取对象的时候,对象已经提前为你创建好了.</p> <p><strong>拿对象速度比较快</strong></p> <h4 id="设计步骤"><a href="#设计步骤" class="header-anchor">#</a> 设计步骤</h4> <ol><li>定义一个类,把构造方法私有.</li> <li>定义一个公开的静态成员变量存储一个类的对象.</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SingleInstance</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * 2.定义一个公开的静态的成员变量存储一个类的对象.
     * 饿汉:在这里加载静态变量的时候就会创造对象了
     */</span>
    <span class="token keyword">public</span>  <span class="token keyword">static</span>  <span class="token class-name">SingleInstance</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SingleInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 1.将构造方法私有
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">SingleInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SingleInstance</span> s1 <span class="token operator">=</span> <span class="token class-name">SingleInstance</span><span class="token punctuation">.</span>instance<span class="token punctuation">;</span>
        <span class="token class-name">SingleInstance</span> s2 <span class="token operator">=</span> <span class="token class-name">SingleInstance</span><span class="token punctuation">.</span>instance<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>tedu<span class="token punctuation">.</span>single</span><span class="token punctuation">;</span>
<span class="token comment">//测试单例设计模式	</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test8_Single</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">Single</span> s <span class="token operator">=</span> <span class="token class-name">Single</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Single</span> s1 <span class="token operator">=</span> <span class="token class-name">Single</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//get()多少次，内存中使用的都是同一个对象</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//cn.tedu.single.Single@15db9742</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//cn.tedu.single.Single@15db9742</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Single</span><span class="token punctuation">{</span>
<span class="token comment">//	1、私有化构造方法，不让外界直接new</span>
	<span class="token keyword">private</span> <span class="token class-name">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
	
<span class="token comment">//	2、在类的内部，创建好对象</span>
	<span class="token comment">//static ：静态只能调用静态</span>
	<span class="token keyword">static</span> <span class="token keyword">private</span>  <span class="token class-name">Single</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment">//	3、对外界提供一个公共的get()，返回一个已经准备好的对象</span>
<span class="token comment">//static是为了外界不通过对象访问而是通过类名直接方法	</span>
	<span class="token keyword">static</span> <span class="token keyword">public</span> <span class="token class-name">Single</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">//注意：静态只能调用静态</span>
		<span class="token keyword">return</span> s<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="懒汉单例模式"><a href="#懒汉单例模式" class="header-anchor">#</a> 懒汉单例模式</h3> <p>在真正需要该对象的时候,采取创建一个对象(延迟加载对象).</p> <p><strong>更节约内存</strong></p> <h4 id="设计步骤-2"><a href="#设计步骤-2" class="header-anchor">#</a> 设计步骤</h4> <ol><li>定义一个类,把构造方法私有.</li> <li>定义一个静态变量存储一个对象.</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SingleInstance</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * 2.定义一个静态变量存储一个对象即可;属于类,与类一起加载一次
     * 此时不能初始化对象
     */</span>
    <span class="token keyword">public</span>  <span class="token keyword">static</span>  <span class="token class-name">SingleInstance</span> instance <span class="token punctuation">;</span><span class="token comment">//null</span>
    <span class="token comment">//高手一般是私有,显得比较专业和安全</span>
    <span class="token comment">//private  static  SingleInstance instance ;</span>

    <span class="token comment">/**
     * 1.将构造方法私有
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">SingleInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token comment">/**
     *
     * 3.必须提供一个方法返回一个单例对象
     */</span>
    <span class="token keyword">public</span>  <span class="token keyword">static</span>  <span class="token class-name">SingleInstance</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            instance <span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token class-name">SingleInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SingleInstance</span> s1 <span class="token operator">=</span> <span class="token class-name">SingleInstance</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SingleInstance</span> s2 <span class="token operator">=</span> <span class="token class-name">SingleInstance</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Single</span><span class="token punctuation">{</span>
<span class="token comment">//	1、私有化构造方法，不让外界直接new</span>
	<span class="token keyword">private</span> <span class="token class-name">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
	
<span class="token comment">//	2、在类的内部，创建好对象</span>
	<span class="token comment">//static ：静态只能调用静态</span>
	<span class="token keyword">static</span> <span class="token keyword">private</span>  <span class="token class-name">Single</span> s <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	
<span class="token comment">//	3、对外界提供一个公共的get()，返回一个已经准备好的对象</span>
<span class="token comment">//static是为了外界不通过对象访问而是通过类名直接方法	</span>
<span class="token keyword">synchronized</span>	<span class="token keyword">static</span> <span class="token keyword">public</span> <span class="token class-name">Single</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">//注意：静态只能调用静态</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//会有安全问题</span>
<span class="token punctuation">}</span>
		<span class="token keyword">return</span> s<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//懒汉式 -- 面试重点！！延迟加载思想+线程不安全</span>
<span class="token keyword">class</span> <span class="token class-name">MySingleTon2</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1,私有化改造方法 -- 目的就是控制外界创建对象的权利</span>
    <span class="token keyword">private</span> <span class="token class-name">MySingleTon2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 2,封装创建好的对象 -- 先不创建对象，啥时候用啥时候创建！！</span>
    <span class="token keyword">static</span> <span class="token keyword">private</span> <span class="token class-name">MySingleTon2</span> my<span class="token punctuation">;</span>
    <span class="token comment">// 3,提供公的获取对象的方法</span>
    <span class="token comment">// 静态方法，因为没法new了，还想用，就用类名访问--修饰成静态的</span>
    <span class="token keyword">synchronized</span> <span class="token keyword">static</span> <span class="token keyword">public</span> <span class="token class-name">MySingleTon2</span> <span class="token function">getMy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//b，方法里都是同步代码，可以是同步方法</span>
<span class="token comment">//     synchronized (MySingleTon2.class) {//a，同步代码块，静态方法的锁，是类名.class本类的字节码对象</span>
           <span class="token comment">// t1,t2,t3来准备new</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span>my <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token comment">// t1 new</span>
              <span class="token comment">// t2 new</span>
              <span class="token comment">// t3 new</span>
              my <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MySingleTon2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 开始创建！！ 延迟加载</span>
           <span class="token punctuation">}</span>
<span class="token comment">//     }</span>
       <span class="token keyword">return</span> my<span class="token punctuation">;</span><span class="token comment">// 静态只能调静态</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="三大工厂模式"><a href="#三大工厂模式" class="header-anchor">#</a> 三大工厂模式</h2> <p>其中简单工厂并不属于 GoF 23 种设计模式，工厂方法和抽象工厂模式则是属于 GoF 23 种设计模式之中的 2 种。工厂模式作为一种非常常用的设计模式，在日常开发中非常常见，也是一种非常基础的设计模式。</p> <h3 id="简单工厂模式"><a href="#简单工厂模式" class="header-anchor">#</a> 简单工厂模式</h3> <p>简单工厂设计模式：<code>Simple Factory Pattern</code>，指的是由一个工厂对象来决定创建具体的产品实例，简单工厂模式并不属于 GoF 23 种设计模式之一，但是我们在平常开发中也运用的非常广泛。</p> <p>又称为静态工厂方法(Static Factory Method)模式，它属于类创建型模式。在简单工厂模式中，可以根据参数的不同返回不同类的实例。简单工厂模式专门定义一个类来负责创建其他类的实例，被创建的实例通常都具有共同的父类。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>角色：
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Factory类：负责创建具体产品的实例</p> <p>Product类：抽象产品类，定义产品子类的公共接口</p> <p>ConcreteProduct 类：具体产品类，实现Product父类的接口功能，也可添加自定义的功能</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UML类图：
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://doc.shiyanlou.com/document-uid108299labid2293timestamp1479202997019.png" alt="此处输入图片的描述"></p> <h4 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h4> <p>下面我们就农场里面种植水果来举例看看简单工厂模式该怎么写（这里我们需要新建一个 <code>simple</code> 目录，相关类创建在 <code>simple</code> 目录下）。</p> <ul><li>新建一个产品接口 <code>IProduct.java</code>，接口中定义了一个种植方法。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">simple</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IProduct</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//种植水果</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>新建一个苹果类 <code>Apple.java</code> 来实现产品接口。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">simple</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Apple</span> <span class="token keyword">implements</span> <span class="token class-name">IProduct</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;种植苹果&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>新建一个桔子类 <code>Orange.java</code> 来实现产品接口。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">simple</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Orange</span> <span class="token keyword">implements</span> <span class="token class-name">IProduct</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;种植桔子&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>如果不用工厂模式那么创建 Apple 和 Orange 对象都直接 new 一个出来就好了，但是这种方式很不友好，一旦一个对象的创建非常复杂，那么会非常不方便，所以需要一个工厂来帮助我们创建具体的产品类，从而隐藏创建细节。</p> <ul><li>新建一个简单工厂类 <code>SimpleFactory.java</code> 来创建产品，其中定义了一个创建方法，根据产品类型来决定创建哪种产品。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">simple</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">IProduct</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token class-name">String</span> productType<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>productType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Apple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;orange&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>productType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Orange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>新建一个测试类 <code>TestSimpleFactory.java</code> 来测试一下。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">simple</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSimpleFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SimpleFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">IProduct</span> apple <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        apple<span class="token punctuation">.</span><span class="token function">grow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：种植苹果</span>

        <span class="token class-name">IProduct</span> orange <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token string">&quot;orange&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        orange<span class="token punctuation">.</span><span class="token function">grow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：种植桔子</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>接下来我们需要先执行 <code>javac simple/*.java</code> 命令进行编译。然后再执行 <code>java simple.TestSimpleFactory</code> 命令运行测试类（大家一定要自己动手运行哦，只有自己实际去运行了才会更能体会其中的思想）。</p> <p>这时候我们就将创建细节隐藏了，全部产品都通过 SimpleFactory 来帮忙创建。但是这种写法仍然存在两个问题：</p> <ul><li>假如我调用 createProduct 方法参数写错了，比如 apple 写成了 aple，这时候代码编译可以通过，运行的时候才能发现问题。</li> <li>如果产品很多，那么 SimpleFactory 类中会产生大量的 if 分支。</li></ul> <p>所以为了解决上面的两个问题，我们可以再优化一下 SimpleFactory 类中的 createProduct 方法。</p> <ul><li>改造一下 SimpleFactory 类，新增一个 createProduct2 方法。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">simple</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">IProduct</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token class-name">String</span> productType<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>productType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Apple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;orange&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>productType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Orange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">IProduct</span> <span class="token function">createProduct2</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">IProduct</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> clazz<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;无法识别的产品&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li>同样的，我们再重新建立一个测试类 <code>TestSimpleFactory2.java</code>，改成调用 createProduct2 方法来获取产品对象。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">simple</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSimpleFactory2</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">SimpleFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">IProduct</span> apple <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">createProduct2</span><span class="token punctuation">(</span><span class="token class-name">Apple</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        apple<span class="token punctuation">.</span><span class="token function">grow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：种植苹果</span>

        <span class="token class-name">IProduct</span> orange <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">createProduct2</span><span class="token punctuation">(</span><span class="token class-name">Orange</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        orange<span class="token punctuation">.</span><span class="token function">grow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：种植桔子</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>同样的我们需要再执行 <code>javac simple/*.java</code> 命令进行编译。然后再执行 <code>java simple.TestSimpleFactory2</code> 命令运行测试类（大家一定要自己动手运行哦，只有自己实际去运行了才会更能体会其中的思想）。</p> <p>可以看到，这种写法完美的解决了上面存在的两个问题（不过一般我们的工厂类都会将创建对象实例的方法设置成静态方法）。</p> <h4 id="简单工厂模式适用场景"><a href="#简单工厂模式适用场景" class="header-anchor">#</a> 简单工厂模式适用场景</h4> <p>简单工厂适用于工厂类负责创建的对象较少的场景，且客户端只需要传入工厂类的参数，对于如何创建对象的逻辑不需要关心。</p> <p>简单工厂模式最大的优点在于实现对象的创建和对象的使用分离，将对象的创建交给专门的工厂类负责，但是其最大的缺点在于工厂类不够灵活，增加新的具体产品需要修改工厂类的判断逻辑代码，而且产品较多时，工厂方法代码将会非常复杂。</p> <h4 id="简单工厂模式存在的问题"><a href="#简单工厂模式存在的问题" class="header-anchor">#</a> 简单工厂模式存在的问题</h4> <p>假如每种产品创建不仅仅只是实例化一个对象，还有其它逻辑需要处理，那么我们无法直接使用一句反射语句来创建对象，所以还是避免不了要写很多 if 或者 switch 循环分支。这样每新增一个产品我们都需要修改简单工厂类，违背了开闭原则，而且随着产品越来越丰富，工厂的职责会变得越来越多，久而久之会越来越难以维护。</p> <p>为了弥补简单工厂方法的不足之处，所以就有了工厂方法模式。</p> <h3 id="工厂方法模式"><a href="#工厂方法模式" class="header-anchor">#</a> 工厂方法模式</h3> <p>工厂方法模式：<code>Fatory Method Pattern</code>，主要用来解决简单工厂模式存在的问题。其是指定义一个创建对象的接口，然后创建不同的具体工厂来创建对应的产品。工厂方法让类的实例化推迟到工厂子类中进行，在工厂方法模式中用户只需要关心所需产品对应的工厂，无须关心创建细节。</p> <p>工厂方法模式中假如需要新增产品，只需要再新建工厂实现类，无需修改源码，符合开闭原则。</p> <p>此模式中，通过定义一个抽象的核心工厂类，并定义创建产品对象的接口，创建具体产品实例的工作延迟到其工厂子类去完成。这样做的好处是核心类只关注工厂类的接口定义，而具体的产品实例交给具体的工厂子类去创建。当系统需要新增一个产品，无需修改现有系统代码，只需要添加一个具体产品类和其对应的工厂子类，使系统的扩展性变得很好，符合面向对象编程的<code>开闭原则</code>;</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>角色：
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Product：抽象产品类</p> <p>ConcreteProduct：具体产品类</p> <p>Factory：抽象工厂类</p> <p>ConcreteFactory：具体工厂类</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UML类图：
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://doc.shiyanlou.com/document-uid108299labid2297timestamp1486374011050.png" alt="此处输入图片的描述"></p> <h4 id="示例-2"><a href="#示例-2" class="header-anchor">#</a> 示例</h4> <p>我们还是以上面农场种植水果举例进行说明，产品接口和产品类不做修改，为了方便大家练习的时候对照，所以我还是把产品接口和产品类在下面重写一下（这里我们需要新建一个 <code>method</code> 目录，相关类创建在 <code>method</code> 目录下）。</p> <ul><li>新建一个产品接口 <code>IProduct.java</code>。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">method</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IProduct</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>新建一个具体产品苹果类 <code>Apple.java</code>。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">method</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Apple</span> <span class="token keyword">implements</span> <span class="token class-name">IProduct</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;种植苹果&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>新建一个具体产品桔子类 <code>Orange.java</code>。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">method</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Orange</span> <span class="token keyword">implements</span> <span class="token class-name">IProduct</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;种植桔子&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>现在我们需要将工厂也抽象化，新建一个工厂接口 <code>IFarmFactory.java</code>，定义一个 create 方法，这个方法的返回值就是产品。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">method</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IFarmFactory</span> <span class="token punctuation">{</span>
    <span class="token class-name">IProduct</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//创建产品</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>新建一个生产苹果的具体工厂类 <code>AppleFactory.java</code>，并实现工厂接口 IFarmFactory。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">method</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppleFactory</span> <span class="token keyword">implements</span> <span class="token class-name">IFarmFactory</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">IProduct</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Apple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//苹果工厂生产苹果</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>新建一个生产桔子的具体工厂类 <code>OrangeFactory.java</code>，并实现工厂接口 IFarmFactory。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">method</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrangeFactory</span> <span class="token keyword">implements</span> <span class="token class-name">IFarmFactory</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">IProduct</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Orange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//桔子工厂生产桔子</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>到这里大家应该很明白工厂方法和简单工厂的区别了，简单工厂就是所有产品都由一个工厂类一个方法来创建，而工厂方法将工厂的职责也进行细化了，每种产品都由自己特定的工厂来生产，这也是单一职责原则的体现。</p> <ul><li>最后新建一个测试类 <code>TestFactoryMethod.java</code> 来进行测试。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">method</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestFactoryMethod</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">IFarmFactory</span> appleFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AppleFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">IProduct</span> apple <span class="token operator">=</span> appleFactory<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        apple<span class="token punctuation">.</span><span class="token function">grow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：种植苹果</span>

        <span class="token class-name">IFarmFactory</span> orangeFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrangeFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">IProduct</span> orange <span class="token operator">=</span> orangeFactory<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        orange<span class="token punctuation">.</span><span class="token function">grow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：种植桔子</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>接下来我们需要先执行 <code>javac method/*.java</code> 命令进行编译。然后再执行 <code>java method.TestFactoryMethod</code> 命令运行测试类（大家一定要自己动手运行哦，只有自己实际去运行了才会更能体会其中的思想）。</p> <p>这时候如果需要新增其它商品，需要创建两个类：一个具体产品类，一个具体工厂类，所以说灵活的同时付出的代价就是类的数量变多了，学习到后面大家就知道，这也是设计模式的共性。</p> <h4 id="工厂方法模式的适用场景"><a href="#工厂方法模式的适用场景" class="header-anchor">#</a> 工厂方法模式的适用场景</h4> <p>工厂方法模式主要适用于以下场景：</p> <ul><li>创建对象需要大量重复的代码。</li> <li>客户端（应用层）不依赖于产品类实例如何被创建、实现等细节。</li> <li>一个类通过其子类来指定创建哪个对象。</li></ul> <p>工厂方法模式是简单工厂模式的进一步抽象和推广。由于使用了面向对象的多态性，工厂方法模式保持了简单工厂模式的优点，而且克服了它的缺点。在工厂方法模式中，核心的工厂类不再负责所有产品的创建，而是将具体创建工作交给子类去做。这个核心类仅仅负责给出具体工厂必须实现的接口，而不负责产品类被实例化这种细节，这使得工厂方法模式可以允许系统在不修改工厂角色的情况下引进新产品。</p> <h4 id="工厂方法模式的缺点"><a href="#工厂方法模式的缺点" class="header-anchor">#</a> 工厂方法模式的缺点</h4> <p>工厂方法模式的缺点也是很明显的，每新增一个产品就需要新增两个类，一旦产品数量上来了，类的个数也会过多，就会增加了系统的复杂度，也使得系统更加抽象难以理解。</p> <h3 id="抽象工厂模式"><a href="#抽象工厂模式" class="header-anchor">#</a> 抽象工厂模式</h3> <p>抽象工厂模式：<code>Abstract Factory Pattern</code>，是指提供一个创建一系列相关或相互依赖对象的接口，而无须指定它们具体的类。客户端（应用层）不依赖于产品类实例如何被创建、实现等细节。</p> <p>抽象工厂模式强调的是一系列相关的产品对象（属于同一产品族）一起使用创建对象时需要大量重复的代码。此时我们就需要提供一个产品类的库，使得所有的产品以同样的接口出现，这样客户端就可以不依赖于具体实现。</p> <p>提供一个创建一系列相关或相互依赖对象的接口，而无须指定它们具体的类。抽象工厂模式又称为Kit模式，属于对象创建型模式。</p> <p>此模式是对工厂方法模式的进一步扩展。在工厂方法模式中，一个具体的工厂负责生产一类具体的产品，即一对一的关系，但是，如果需要一个具体的工厂生产多种产品对象，那么就需要用到抽象工厂模式了。</p> <p>为了便于理解此模式，这里介绍两个概念：</p> <ul><li><p><strong>产品等级结构</strong>：产品等级结构即产品的继承结构，如一个抽象类是电视机，其子类有海尔电视机、海信电视机、TCL电视机，则抽象电视机与具体品牌的电视机之间构成了一个产品等级结构，抽象电视机是父类，而具体品牌的电视机是其子类。</p></li> <li><p>**产品族 ：**在抽象工厂模式中，产品族是指由同一个工厂生产的，位于不同产品等级结构中的一组产品，如海尔电器工厂生产的海尔电视机、海尔电冰箱，海尔电视机位于电视机产品等级结构中，海尔电冰箱位于电冰箱产品等级结构中。</p> <p><code>角色：</code></p> <p>抽象工厂（AbstractFactory）：担任这个角色的是抽象工厂模式的核心，是与应用系统的商业逻辑无关的。</p> <p>具体工厂（Factory）：这个角色直接在客户端的调用下创建产品的实例，这个角色含有选择合适的产品对象的逻辑，而这个逻辑是与应用系统商业逻辑紧密相关的。</p> <p>抽象产品（AbstractProduct）：担任这个角色的类是抽象工厂模式所创建的对象的父类，或它们共同拥有的接口</p> <p>具体产品（Product）：抽象工厂模式所创建的任何产品对象都是一个具体的产品类的实例。</p> <p><code>UML类图：</code></p> <p><img src="https://doc.shiyanlou.com/document-uid108299labid2293timestamp1479204958020.png" alt="此处输入图片的描述"></p></li></ul> <h4 id="什么是产品族"><a href="#什么是产品族" class="header-anchor">#</a> 什么是产品族</h4> <p>在学习抽象工厂模式之前，我们需要先了解一下什么叫产品族。产品族指的就是相似的产品，比如说我们常用的手机，有华为、小米、OPPO，这些不同品牌的手机就属于同一个产品族，它们隶属于不同的公司，也就是需要由不同的工厂进行生产，这些工厂都可以共用同一个抽象方法来生产手机，这就是抽象工厂模式的本质，将相似的产品（同一产品族）抽象出公共的方法，统一对外接口。</p> <h4 id="示例-3"><a href="#示例-3" class="header-anchor">#</a> 示例</h4> <p>接下来我们还是以农场种植水果举例进行说明。为了方便举例，我们只将水果和农场分为南北两个品种，比如南方农场生产的苹果和桔子称之为南方苹果和南方桔子，而北方农场生产的苹果和桔子就称之为北方苹果和北方桔子（这里我们需要新建一个 <code>abstractFactory</code> 目录，相关类创建在 <code>abstractFactory</code> 目录下）。</p> <ul><li>新建一个苹果的接口 <code>IApple.java</code>，定义一个种植苹果的方法。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">abstractFactory</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IApple</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">growApple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//种植苹果</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>新建一个具体产品“南方苹果”类 <code>SouthApple.java</code> 来实现 IApple 接口。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">abstractFactory</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SouthApple</span> <span class="token keyword">implements</span> <span class="token class-name">IApple</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">growApple</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;种植南方苹果&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>新建一个桔子的接口 <code>IOrange.java</code>，定义一个种植桔子的方法。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">abstractFactory</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IOrange</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">growOrange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//种植桔子</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>新建一个具体产品“南方桔子”类 <code>SouthOrange.java</code> 来实现 IOrange 接口。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">abstractFactory</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SouthOrange</span> <span class="token keyword">implements</span> <span class="token class-name">IOrange</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">growOrange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;种植南方桔子&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>以上就是一个将产品抽象化的过程，接下来我们就需要将产品交给工厂进行创建。</p> <ul><li>新建一个抽象工厂接口 <code>IFactory.java</code>，定义两个方法：一个用来创建苹果对象，一个用来创建桔子对象。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">abstractFactory</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IFactory</span> <span class="token punctuation">{</span>
    <span class="token class-name">IApple</span> <span class="token function">createApple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">IOrange</span> <span class="token function">createOrange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>新建一个具体工厂“南方工厂”类 <code>SouthFarmFactory.java</code> 来实现 IFactory 接口，并实现其中的两个抽象方法。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">abstractFactory</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SouthFarmFactory</span> <span class="token keyword">implements</span> <span class="token class-name">IFactory</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">IApple</span> <span class="token function">createApple</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SouthApple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//南方农场生产南方苹果</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">IOrange</span> <span class="token function">createOrange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SouthOrange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//南方农场生产南方桔子</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>现在我们可以新建一个测试类 <code>TestAbstractFactory.java</code> 来进行测试。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">abstractFactory</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestAbstractFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">IFactory</span> southFarmFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SouthFarmFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//构建南方农场</span>
        <span class="token class-name">IApple</span> apple <span class="token operator">=</span> southFarmFactory<span class="token punctuation">.</span><span class="token function">createApple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获得南方苹果</span>
        apple<span class="token punctuation">.</span><span class="token function">growApple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：种植南方苹果</span>

        <span class="token class-name">IOrange</span> orange <span class="token operator">=</span> southFarmFactory<span class="token punctuation">.</span><span class="token function">createOrange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获得南方桔子</span>
        orange<span class="token punctuation">.</span><span class="token function">growOrange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：种植南方桔子</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>接下来我们需要先执行 <code>javac abstractFactory/*.java</code> 命令进行编译。然后再执行 <code>java abstractFactory.TestAbstractFactory</code> 命令运行测试类。</p> <p>这就是一个抽象工厂的设计模式示例，不过上面我并没有完成北方农场的示例，这个就作为本次实验留给大家的作业，大家可以自己把北方农场生产北方苹果和北方桔子的类完善了并进行测试，自己动手才能加深印象。</p> <p>假如这时候又有一个新的农场要建立生产一样的产品，那么就可以再新建一个对应的产品类和对应的工厂类就可以实现了。</p> <h4 id="抽象工厂模式的适用场景"><a href="#抽象工厂模式的适用场景" class="header-anchor">#</a> 抽象工厂模式的适用场景</h4> <p>抽象工厂模式适用于我们有一系列类似的产品（比如上面的南方苹果和北方苹果，还有华为手机和小米手机），然后这些产品的实现又有细节上的不同，那么这时候就可以利用抽象工厂模式来将产品进行抽象化。</p> <h4 id="抽象工厂模式的缺点"><a href="#抽象工厂模式的缺点" class="header-anchor">#</a> 抽象工厂模式的缺点</h4> <p>根据上面的例子再结合设计模式七大原则，其实我们可以发现抽象工厂有一个很大的缺点，那就是扩展产品相当困难，比如示例中现在农场想种植西瓜，那么我们需要修改工厂的源码，新增种植西瓜的方法，这样的话抽象工厂、具体工厂都需要修改，显然违背了开闭原则。所以抽象工厂模式使用的前提必须是产品比较稳定，不会轻易作出修改，否则后期的维护将会非常困难。</p> <h3 id="对比"><a href="#对比" class="header-anchor">#</a> 对比</h3> <p>工厂模式只是一个统称，大部分人都知道工厂模式，但是却并不是所有人都知道工厂模式也分为了 3 种。在实际开发过程中，当我们需要隐藏对象的创建细节时，可以考虑使用工厂模式，但是却更应该根据实际业务场景，选择一种比较合适的工厂模式。</p> <h2 id="建造者模式"><a href="#建造者模式" class="header-anchor">#</a> 建造者模式</h2> <p>又名：生成器模式，是一种对象构建模式。它可以将复杂对象的建造过程抽象出来（抽象类别），使这个抽象过程的不同实现方法可以构造出不同表现（属性）的对象。</p> <p>建造者模式是一步一步创建一个复杂的对象，它允许用户只通过指定复杂对象的类型和内容就可以构建它们，用户不需要知道内部的具体构建细节。例如，一辆汽车由轮子，发动机以及其他零件组成，对于普通人而言，我们使用的只是一辆完整的车，这时，我们需要加入一个构造者，让他帮我们把这些组件按序组装成为一辆完整的车。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>角色：
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Builder：抽象构造者类，为创建一个Product对象的各个部件指定抽象接口。</p> <p>ConcreteBuilder：具体构造者类，实现Builder的接口以构造和装配该产品的各个部件。定义并明确它所创建的表示。提供一个检索产品的接口</p> <p>Director：指挥者，构造一个使用Builder接口的对象。</p> <p>Product：表示被构造的复杂对象。ConcreateBuilder创建该产品的内部表示并定义它的装配过程。</p> <p>包含定义组成部件的类，包括将这些部件装配成最终产品的接口。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UML类图：
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://doc.shiyanlou.com/document-uid108299labid2297timestamp1486373749271.png" alt="此处输入图片的描述"></p> <h1 id="结构型模式"><a href="#结构型模式" class="header-anchor">#</a> 结构型模式</h1> <h2 id="适配器模式"><a href="#适配器模式" class="header-anchor">#</a> 适配器模式</h2> <blockquote><p>在[设计模式](https://zh.wikipedia.org/wiki/设计模式_(计算机)中，<strong>适配器模式</strong>（英语：adapter pattern）有时候也称包装样式或者包装(wrapper)。将一个<a href="https://zh.wikipedia.org/wiki/%E7%B1%BB_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)" target="_blank" rel="noopener noreferrer">类<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的接口转接成用户所期待的。一个适配使得因接口不兼容而不能在一起工作的类工作在一起，做法是将类自己的接口包裹在一个已存在的类中。</p> <p>---维基百科</p></blockquote> <p>顾名思义，此模式是源于类似于电源适配器的设计和编码技巧。比如现在有一些类，提供一些可用的接口，但是可能客户端因为不兼容的原因，不能直接调用这些现有的接口，这时就需要一个适配器来作为中转站，适配器类可以向用户提供可用的接口，其内部将收到的请求转换为对适配者对应接口的真实请求，从而实现对不兼容的类的复用。</p> <p>优点：将目标类和适配者类解耦，通过引入一个适配器类来重用现有的适配者类，而无须修改原有代码。增加了类的透明性和复用性，将具体的实现封装在适配者类中，对于客户端类来说是透明的，而且提高了适配者的复用性。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>角色：
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Target：目标抽象类</p> <p>Adapter：适配器类</p> <p>Adaptee：适配者类</p> <p>Client：客户类</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UML 类图:
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://doc.shiyanlou.com/document-uid108299labid2297timestamp1486370324222.png" alt="此处输入图片的描述"></p> <h2 id="桥接模式"><a href="#桥接模式" class="header-anchor">#</a> 桥接模式</h2> <p>桥接模式是<a href="https://zh.wikipedia.org/wiki/%E8%BB%9F%E4%BB%B6%E8%A8%AD%E8%A8%88%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener noreferrer">软件设计模式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中最复杂的模式之一，它把事物对象和其具体行为、具体特征分离开来，使它们可以各自独立的变化。事物对象仅是一个抽象的概念。如“圆形”、“三角形”归于抽象的“形状”之下，而“画圆”、“画三角”归于实现行为的“画图”类之下，然后由“形状”调用“画图”。</p> <p>理解桥接模式，重点需要理解如何将抽象化(Abstraction)与实现化(Implementation)脱耦，使得二者可以独立地变化。桥接模式提高了系统的可扩充性，在两个变化维度中任意扩展一个维度，都不需要修改原有系统。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>角色：
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Abstraction：定义抽象的接口，该接口包含实现具体行为、具体特征的Implementor接口</p> <p>Refined Abstraction：抽象接口Abstraction的子类，依旧是一个抽象的事物名</p> <p>Implementor：定义具体行为、具体特征的应用接口</p> <p>ConcreteImplementor：实现Implementor接口</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UML类图
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://doc.shiyanlou.com/document-uid108299labid2297timestamp1486371373063.png" alt="此处输入图片的描述"></p> <h2 id="装饰器模式"><a href="#装饰器模式" class="header-anchor">#</a> 装饰器模式</h2> <p><strong>修饰模式</strong>，是<a href="https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B" target="_blank" rel="noopener noreferrer">面向对象编程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>领域中，一种动态地往一个类中添加新的行为的<a href="https://zh.wikipedia.org/wiki/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener noreferrer">设计模式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。就功能而言，修饰模式相比生成<a href="https://zh.wikipedia.org/wiki/%E5%AD%90%E7%B1%BB" target="_blank" rel="noopener noreferrer">子类<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>更为灵活，这样可以给某个对象而不是整个类添加一些功能。</p> <p>一般来说，给一个对象或者类增加行为的方式可以有两种：</p> <ul><li><p>继承机制，使用继承机制是给现有类添加功能的一种有效途径，通过继承一个现有类可以使得子类在拥有自身方法的同时还拥有父类的方法。但是这种方法是静态的，用户不能控制增加行为的方式和时机。</p></li> <li><p>关联机制，即将一个类的对象嵌入另一个对象中，由另一个对象来决定是否调用嵌入对象的行为以便扩展自己的行为，我们称这个嵌入的对象为装饰器(Decorator)</p> <p>通过使用修饰模式，可以在运行时扩充一个类的功能。原理是：增加一个修饰类包裹原来的类，包裹的方式一般是通过在将原来的对象作为修饰类的构造函数的参数。装饰类实现新的功能，但是，在不需要用到新功能的地方，它可以直接调用原来的类中的方法。修饰类必须和原来的类有相同的接口。</p> <p>修饰模式是类继承的另外一种选择。类继承在编译时候增加行为，而装饰模式是在运行时增加行为。</p> <p><code>角色</code></p> <p>Component: 抽象构件</p> <p>ConcreteComponent: 具体构件</p> <p>Decorator: 抽象装饰类</p> <p>ConcreteDecorator: 具体装饰类</p> <p><code>UML 类图</code></p> <p><img src="https://doc.shiyanlou.com/document-uid108299labid2293timestamp1479221663191.png" alt="此处输入图片的描述"></p></li></ul> <h2 id="外观模式"><a href="#外观模式" class="header-anchor">#</a> 外观模式</h2> <p>外观模式(Facade Pattern)：外部与一个子系统的通信必须通过一个统一的外观对象进行，为子系统中的一组接口提供一个一致的界面，外观模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。外观模式又称为门面模式，它是一种对象结构型模式。</p> <p>举一个简单的例子，相信大家都使用过 C++ 语言，他是一门编译型语言，写完代码之后，我们需要经过编译之后才能运行，在IDE中，会有一个 Build 的按钮，点击它即可完成编译过程，但是这一个简单的动作背后，却是一系列复杂操作的协调配合，至少包括词法分析，语法分析，生成中间代码，生成汇编代码以及链接等操作，作为普通开发人员，我们不必在意这些过程是如何完成的，只需要点击Build按钮，IDE就会自动帮我们完成背后的工作。那么这个Build按钮就是IDE为我们提供的高级接口，通过他来完成各种子系统的协调工作。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>角色：
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Facade：外观角色，提供高级接口</p> <p>SubSystem：子系统角色，负责各自的功能实现</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UML 类图
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://doc.shiyanlou.com/document-uid108299labid2297timestamp1486374473372.png" alt="此处输入图片的描述"></p> <p>使用外观模式最大的优点就是子系统与客户端之间是松耦合的关系，客户端不必知道具体有哪些子系统，也无需知道他们是如何工作的，通过引入一个外观类，提供一个客户端间接访问子系统的高级接口。子系统和外观类可以独立运作，修改某一个子系统的内容，不会影响到其他子系统，也不会影响到外观对象。不过它的缺点就是它不够灵活，当需要增加一个子系统的时候，需要修改外观类。</p> <h2 id="享元模式"><a href="#享元模式" class="header-anchor">#</a> 享元模式</h2> <ul><li><p><a href="https://design-patterns.readthedocs.io/zh_CN/latest/structural_patterns/flyweight.html" target="_blank" rel="noopener noreferrer"><strong>享元模式</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>享元模式</strong>（英语：Flyweight Pattern）是一种软件<a href="https://zh.wikipedia.org/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_(%E8%AE%A1%E7%AE%97%E6%9C%BA)" target="_blank" rel="noopener noreferrer">设计模式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。它使用共享物件，用来尽可能减少内存使用量以及分享资讯给尽可能多的相似物件；它适合用于当大量物件只是重复因而导致无法令人接受的使用大量内存。通常物件中的部分状态是可以分享。常见做法是把它们放在外部数据结构，当需要使用时再将它们传递给享元。由于享元模式要求能够共享的对象必须是细粒度对象，因此它又称为轻量级模式，它是一种对象结构型模式。</p> <p>要理解享元模式，先要理解两个重要的概念：内部状态和外部状态。</p> <p>内部状态存储于flyweight中，它包含了独立于flyweight场景的信息，这些信息使得flyweight可以被共享。而外部状态取决于flyweight场景，并根据场景而变化，因此不可共享。用户对象负责在必要的时候将外部状态传递给flyweight。</p> <p><code>角色</code></p> <p>Flyweight： 抽象享元类</p> <p>ConcreteFlyweight： 具体享元类</p> <p>UnsharedConcreteFlyweight： 非共享具体享元类</p> <p>FlyweightFactory： 享元工厂类</p> <p><code>UML类图</code></p> <p><img src="https://doc.shiyanlou.com/document-uid108299labid2297timestamp1486374834526.png" alt="此处输入图片的描述"></p></li></ul> <p>享元模式的核心在于享元工厂类，享元工厂类的作用在于提供一个用于存储享元对象的享元池，用户需要对象时，首先从享元池中获取，如果享元池中不存在，则创建一个新的享元对象返回给用户，并在享元池中保存该新增对象。</p> <h2 id="代理模式"><a href="#代理模式" class="header-anchor">#</a> 代理模式</h2> <h4 id="简介-2"><a href="#简介-2" class="header-anchor">#</a> 简介</h4> <blockquote><p>代理模式：为其他对象提供一种代理以控制对这个对象的访问。在某些情况下，一个对象不适合或者不能直接引用另一个对象，而代理对象可以在客户端和目标对象之间起到中介的作用。</p></blockquote> <p>所谓的代理者是指一个类别可以作为其它东西的接口。代理者可以作任何东西的接口：网络连接、内存中的大对象、文件或其它昂贵或无法复制的资源。</p> <p>代理对象可以在客户端和目标对象之间起到 中介的作用，并且可以通过代理对象去掉客户不能看到 的内容和服务或者添加客户需要的额外服务。</p> <p>可能大家听得最多且最常用的就是VPN网络代理，或者代理服务器等。</p> <h4 id="优点"><a href="#优点" class="header-anchor">#</a> 优点</h4> <ol><li>隐藏原始对象并控制对象的访问。</li> <li>访问对象时提供其他的功能。</li></ol> <h4 id="类图"><a href="#类图" class="header-anchor">#</a> 类图</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>角色
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Subject: 抽象主题角色</p> <p>Proxy: 代理主题角色</p> <p>RealSubject: 真实主题角色</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UML类图
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://doc.shiyanlou.com/document-uid108299labid2297timestamp1486375056301.png" alt="此处输入图片的描述"></p> <p><img src="https://doc.shiyanlou.com/document-uid441493labid8432timestamp1547283663316.png" alt="此处输入图片的描述"></p> <p>说明：</p> <ul><li><code>Subject</code>: 一个客户端可用的公开的功能接口。</li> <li><code>RealSubject</code>：实现 <code>Subject</code> 接口的类，提供了接口方法的具体实现。</li> <li><code>Proxy</code>：实现 <code>Subject</code> 接口的代理类，通过 <code>RealSubject</code> 类的业务逻辑方法来实现抽象方法，可以附加自己的操作。</li></ul> <h4 id="编程实战"><a href="#编程实战" class="header-anchor">#</a> 编程实战</h4> <p>假设我们需要建设一栋楼房，但是建设之前我们需要购买原材料（如水泥...)，接着才可以开始建设，楼房主体建设完成后，还需要封顶操作。</p> <p><code>LouSubject.java</code>：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">LouSubject</span><span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>LouRealSubject.java</code>：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LouRealSubject</span> <span class="token keyword">implements</span> <span class="token class-name">LouSubject</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;建设实验楼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>LouProxy.java</code>：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LouProxy</span> <span class="token keyword">implements</span> <span class="token class-name">LouSubject</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">LouSubject</span> target<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">LouProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LouRealSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;购买材料&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        target<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;封顶&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">LouClient</span><span class="token punctuation">.</span>java
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LouClient</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">LouSubject</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LouProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxy<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h1 id="行为型模式"><a href="#行为型模式" class="header-anchor">#</a> 行为型模式</h1> <h2 id="命令模式"><a href="#命令模式" class="header-anchor">#</a> 命令模式</h2> <p>在软件设计中，我们有时需要向某些对象发送请求(命令)，但是对于请求(命令)发送者来说，并不知道请求(命令)的接收者是谁，它只需要发送命令即可；对于请求(命令)的接受者来说，他也并不知道给他发送请求(命令)的是谁，它只需要在有请求(命令)时执行自己的 action 即可。具体的请求(命令)发送者和接受者，我们就可以根据自己的需求自由组合。使得请求发送者与请求接收者消除彼此之间的耦合，让对象之间的调用关系更加灵活。</p> <p>主要特点就是将一个请求封装为一个对象，从而使我们可用不同的请求对客户进行参数化；对请求排队或者记录请求日志，以及支持可撤销的操作。命令模式是一种对象行为型模式，其别名为动作(Action)模式或事务(Transaction)模式。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>角色
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Command: 抽象命令类</p> <p>ConcreteCommand: 具体命令类</p> <p>Invoker: 调用者</p> <p>Receiver: 接收者</p> <p>Client:客户类</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UML类图
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://doc.shiyanlou.com/document-uid108299labid2297timestamp1486375353023.png" alt="此处输入图片的描述"></p> <h2 id="中介模式"><a href="#中介模式" class="header-anchor">#</a> 中介模式</h2> <h4 id="简介-3"><a href="#简介-3" class="header-anchor">#</a> 简介</h4> <blockquote><p>定义了一个对象，该对象封装了一组对象的交互方式。对象之间的通信将封装在中介对象中。对象不再直接相互通信，而是通过中介进行通信。这减少了通信对象之间的依赖性，从而减少了耦合。</p></blockquote> <p>《设计模式:可复用面向对象软件的基础》一书中对中介者模式定义：用一个中介对象来封装一系列的对象交互。中介者使各对象不需要显式地相互引用，从而使其耦合松散，而且可以独立地改变它们之间的交互。</p> <p>举个简单的例子，就比如大家平时喜欢用微信聊天，你发送的聊天内容需要通过微信服务器进行中间处理，然后下发给你的好友，微信服务器就是一个中介者。</p> <h4 id="优点-2"><a href="#优点-2" class="header-anchor">#</a> 优点</h4> <ol><li>避免一组交互对象之间的紧密耦合。</li> <li>可以独立地改变一组对象之间的交互。</li></ol> <p>中介者模式的两个主要作用：中转作用（结构性）：通过中介者提供的中转作用，各个同事对象就不再需要显式引用其他同事，当需要和其他同事进行通信时，通过中介者即可。该中转作用属于中介者在结构上的支持。</p> <p>协调作用（行为性）：中介者可以更进一步的对同事之间的关系进行封装，同事可以一致地和中介者进行交互，而不需要指明中介者需要具体怎么做，中介者根据封装在自身内部的协调逻辑，对同事的请求进行进一步处理，将同事成员之间的关系行为进行分离和封装。该协调作用属于中介者在行为上的支持。</p> <h4 id="类图-2"><a href="#类图-2" class="header-anchor">#</a> 类图</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>角色
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Mediator: 抽象中介者</p> <p>ConcreteMediator: 具体中介者</p> <p>Colleague: 抽象同事类</p> <p>ConcreteColleague: 具体同事类</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UML类图
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://doc.shiyanlou.com/document-uid108299labid2297timestamp1486375717275.png" alt="此处输入图片的描述"></p> <p>对应中介对象来说，互相交互的对象叫做同事类，中介者对象维护同事类之间的关系，中介对象需要知道所有同事对象，所以也会带来一个问题，当同事类过多时，中介者类将异常复杂。</p> <p><img src="https://doc.shiyanlou.com/document-uid441493labid8432timestamp1547430100321.png" alt="此处输入图片的描述"></p> <ol><li>Mediator：抽象中介类，用于与各同事对象之间进行通信。</li> <li>ConcreteMediator：具体中介类，协调各同事类。</li> <li>Colleague：抽象同事类。</li> <li>ConcreteColleague：具体同事类。</li></ol> <h4 id="编程实战-2"><a href="#编程实战-2" class="header-anchor">#</a> 编程实战</h4> <p>比如我们要实现一个聊天室的功能，聊天室就是中介，而聊天的人就是一个同事类，发送的每个消息都由聊天室转发给其他人。</p> <p><code>AbstractChatRoom.java</code>（Mediator）：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractChatRoom</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">notice</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>ChatRoom.java</code>(ConcreteMediator)：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>


<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChatRoom</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractChatRoom</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notice</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> u <span class="token operator">:</span> users<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>u <span class="token operator">!=</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                u<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><code>User.java</code>(Colleague)。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token class-name">AbstractChatRoom</span> chatRoom<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token class-name">AbstractChatRoom</span> chatRoom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>chatRoom <span class="token operator">=</span> chatRoom<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 发送消息
     *
     * @param msg
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 接受消息
     *
     * @param msg
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><code>UserA.java</code>(ConcreteColleague)：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserA</span> <span class="token keyword">extends</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">UserA</span><span class="token punctuation">(</span><span class="token class-name">AbstractChatRoom</span> chatRoom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>chatRoom<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;用户A发送 &quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        chatRoom<span class="token punctuation">.</span><span class="token function">notice</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;用户A收到 &quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><code>UserB.java</code>(ConcreteColleague)：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserB</span> <span class="token keyword">extends</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">UserB</span><span class="token punctuation">(</span><span class="token class-name">AbstractChatRoom</span> chatRoom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>chatRoom<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;用户B发送 &quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        chatRoom<span class="token punctuation">.</span><span class="token function">notice</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;用户B收到 &quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><code>Client.java</code>：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ChatRoom</span> chatRoom <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ChatRoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserA</span> userA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserA</span><span class="token punctuation">(</span>chatRoom<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserB</span> userB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserB</span><span class="token punctuation">(</span>chatRoom<span class="token punctuation">)</span><span class="token punctuation">;</span>
        chatRoom<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>userA<span class="token punctuation">)</span><span class="token punctuation">;</span>
        chatRoom<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>userB<span class="token punctuation">)</span><span class="token punctuation">;</span>
        userA<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token string">&quot;你好！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userB<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token string">&quot;再见！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="观察者模式"><a href="#观察者模式" class="header-anchor">#</a> 观察者模式</h2> <p>在此种模式中，一个目标对象管理所有相依于它的观察者对象，并且在它本身的状态改变时主动发出通知。这通常透过呼叫各观察者所提供的方法来实现。此种模式通常被用来实时事件处理系统。观察者模式又叫做发布-订阅（Publish/Subscribe）模式、模型-视图（Model/View）模式、源-监听器（Source/Listener）模式或从属者（Dependents）模式。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>角色
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Subject: 抽象目标类，一般至少提供三个接口：</p> <ul><li><p>添附(Attach)：新增观察者到串炼内，以追踪目标对象的变化。</p></li> <li><p>解附(Detach)：将已经存在的观察者从串炼中移除。</p></li> <li><p>通知(Notify)：利用观察者所提供的更新函式来通知此目标已经产生变化。</p> <p>ConcreteSubject: 具体目标，提供了观察者欲追踪的状态，也可设置目标状态</p> <p>Observer: 抽象观察者，定义观察者的更新操作接口</p> <p>ConcreteObserver: 具体观察者，实现抽象观察者的接口，做出自己的更新操作</p> <p><code>UML类图</code></p> <p><img src="https://doc.shiyanlou.com/document-uid108299labid2297timestamp1486376064027.png" alt="此处输入图片的描述"></p></li></ul> <p>主要作用：</p> <ul><li>当抽象个体有两个互相依赖的层面时。封装这些层面在单独的对象内将可允许程序员单独地去变更与重复使用这些对象，而不会产生两者之间交互的问题。</li> <li>当其中一个对象的变更会影响其他对象，却又不知道多少对象必须被同时变更时。</li> <li>当对象应该有能力通知其他对象，又不应该知道其他对象的实做细节时。</li></ul> <h2 id="状态模式"><a href="#状态模式" class="header-anchor">#</a> 状态模式</h2> <p>状态模式：允许一个对象在其内部状态改变时改变它的行为。对象看起来似乎修改了它的类。其别名为状态对象(Objects for States)，状态模式是一种对象行为型模式。</p> <p>有时，一个对象的行为受其一个或多个具体的属性变化而变化，这样的属性也叫作状态，这样的的对象也叫作有状态的对象。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>角色
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Context: 环境类，维护一个ConcreteState子类的实例，这个实例定义当前状态；</p> <p>State: 抽象状态类，定义一个接口以封装与Context的一个特定状态相关的行为；</p> <p>ConcreteState: 具体状态类，每一个子类实现一个与Context的一个状态相关的行为。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UML类图
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://doc.shiyanlou.com/document-uid108299labid2297timestamp1486376254211.png" alt="此处输入图片的描述"></p> <h2 id="策略模式"><a href="#策略模式" class="header-anchor">#</a> 策略模式</h2> <p>策略模式(Strategy Pattern)：定义一系列算法，将每一个算法封装起来，并让它们可以相互替换。策略模式让算法独立于使用它的客户而变化，也称为政策模式(Policy)。</p> <p>常见示例：常见的排序算法有快速排序，冒泡排序，归并排序，选择排序等，如果我们需要在一个算法类中提供这些算法，一个常见的解决方法就是在类中定义多个方法，每个方法定义一种具体的排序算法，然后使用 if...else...去判断到底是哪种算法，或者直接调用某个具体方法。这种方法是将算法的实现硬编码到类中，这样做最大的弊端就是算法类类非常臃肿，而且当需要增加或者更换一种新的排序方法时候，需要修改算法类的代码，同时也需要修改客户端调用处的代码。策略模式就是为了解决这列问题而设计的。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>角色
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Context: 环境类，使用一个ConcreteStrategy对象来配置；维护一个对Stategy对象的引用，同时，可以定义一个接口来让Stategy访问它的数据。</p> <p>Strategy: 抽象策略类，定义所有支持的算法的公共接口。Context使用这个接口来调用某ConcreteStrategy定义的算法；</p> <p>ConcreteStrategy: 具体策略类，实现 Strategy 接口的具体算法；</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UML类图
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://doc.shiyanlou.com/document-uid108299labid2297timestamp1486376535542.png" alt="此处输入图片的描述"></p> <h1 id="责任链模式"><a href="#责任链模式" class="header-anchor">#</a> 责任链模式</h1> <blockquote><p>责任链模式是一种由命令对象源和一系列处理对象组成的设计模式。每个处理对象都包含定义它可以处理的命令对象类型的逻辑；其余的传递给链中的下一个处理对象。还存在一种机制，用于将新处理对象添加到该链的末尾。责任链模式在结构上与装饰器模式几乎相同，不同之处在于对于装饰器，所有类都处理请求，而对于责任链，链中的一个类恰好处理请求。</p></blockquote> <h4 id="优点-3"><a href="#优点-3" class="header-anchor">#</a> 优点</h4> <ol><li>避免将请求的发送方与其接收方耦合。</li> <li>可以使用多个接收器处理请求。</li></ol> <h4 id="类图-3"><a href="#类图-3" class="header-anchor">#</a> 类图</h4> <p><img src="https://doc.shiyanlou.com/document-uid441493labid8432timestamp1547442693961.png" alt="此处输入图片的描述"></p> <p>handler：抽象处理者。</p> <p>ConcreteHandler：具体处理者，接受到请求后，可以选择处理请求或者传递给下一个处理者。</p> <h4 id="编程实战-3"><a href="#编程实战-3" class="header-anchor">#</a> 编程实战</h4> <p>假设我们有一个请假系统，不同的职位可以处理不同的请假请求，比如：</p> <p>组长：可以处理两天以内的请求</p> <p>厂长：可以处理七天以内的请求</p> <p>老板：可以处理十五天以内的请求</p> <p>如果组长可以处理，那么就直接处理了，如果组长不可以处理，那么我们再继续往下传递。</p> <p><code>Handler.java</code>：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * 下个处理者
     */</span>
    <span class="token keyword">protected</span> <span class="token class-name">Handler</span> successor<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSuccessor</span><span class="token punctuation">(</span><span class="token class-name">Handler</span> successor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>successor <span class="token operator">=</span> successor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">handlerRequest</span><span class="token punctuation">(</span><span class="token keyword">int</span> heaven<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">GroupLeaderHandler</span><span class="token punctuation">.</span>java
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GroupLeaderHandler</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handlerRequest</span><span class="token punctuation">(</span><span class="token keyword">int</span> heaven<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>heaven <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;组长处理&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">super</span><span class="token punctuation">.</span>successor <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">super</span><span class="token punctuation">.</span>successor<span class="token punctuation">.</span><span class="token function">handlerRequest</span><span class="token punctuation">(</span>heaven<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p><code>FactoryManagerHandler.java</code>：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FactoryManagerHandler</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handlerRequest</span><span class="token punctuation">(</span><span class="token keyword">int</span> heaven<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>heaven <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;厂长处理&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">super</span><span class="token punctuation">.</span>successor <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">super</span><span class="token punctuation">.</span>successor<span class="token punctuation">.</span><span class="token function">handlerRequest</span><span class="token punctuation">(</span>heaven<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>BossHandler.java</code>：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BossHandler</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handlerRequest</span><span class="token punctuation">(</span><span class="token keyword">int</span> heaven<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>heaven <span class="token operator">&lt;=</span> <span class="token number">15</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;老板处理&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">super</span><span class="token punctuation">.</span>successor <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">super</span><span class="token punctuation">.</span>successor<span class="token punctuation">.</span><span class="token function">handlerRequest</span><span class="token punctuation">(</span>heaven<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>Client.java</code>：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Handler</span> groupLeaderHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GroupLeaderHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Handler</span> factoryManagerHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FactoryManagerHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Handler</span> bossHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BossHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        groupLeaderHandler<span class="token punctuation">.</span><span class="token function">setSuccessor</span><span class="token punctuation">(</span>factoryManagerHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
        factoryManagerHandler<span class="token punctuation">.</span><span class="token function">setSuccessor</span><span class="token punctuation">(</span>bossHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//请假一天</span>
        groupLeaderHandler<span class="token punctuation">.</span><span class="token function">handlerRequest</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//请假6天</span>
        groupLeaderHandler<span class="token punctuation">.</span><span class="token function">handlerRequest</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//请假10天</span>
        groupLeaderHandler<span class="token punctuation">.</span><span class="token function">handlerRequest</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h1 id="其他参考资料"><a href="#其他参考资料" class="header-anchor">#</a> 其他参考资料</h1> <p><strong>参考资料</strong></p> <ul><li><p><a href="https://design-patterns.readthedocs.io/zh_CN/latest/index.html" target="_blank" rel="noopener noreferrer">图说设计模式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://zh.wikipedia.org/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_(%E8%AE%A1%E7%AE%97%E6%9C%BA)" target="_blank" rel="noopener noreferrer">维基百科：设计模式 (计算机)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/matheusblog/md/develop/JUnit/02第一个单元测试.html" class="prev">
        第一个单元测试
      </a></span> <span class="next"><a href="/matheusblog/md/develop/code-style/effective-java/目录.html">
        Effective-Java目录
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/matheusblog/assets/js/app.c8cdbcd7.js" defer></script><script src="/matheusblog/assets/js/2.de611079.js" defer></script><script src="/matheusblog/assets/js/248.c5ff9967.js" defer></script>
  </body>
</html>
